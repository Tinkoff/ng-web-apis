"use strict";(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[894],{6513:(B,d,n)=>{n.r(d),n.d(d,{default:()=>R});var i=n(1423),p=n(6610),e=n(2978),y=n(3308),P=n(9406),F=n(8448),w=n(2489),m=n(8129),h=n(7236),W=n(6340),k=n(6104),x=n(8486);class l extends P.c{constructor(r,o){let t,a;try{t=new Worker(r,o)}catch(c){a=c}super(c=>{let g=F.w;a?c.error(a):this.destroy$.isStopped?c.complete():t&&(g=(0,w.h)((0,m.R)(t,"message").pipe((0,h.M)(f=>c.next(f))),(0,m.R)(t,"error").pipe((0,h.M)(f=>c.error(f)))).pipe((0,W.Q)(this.destroy$))),g.subscribe().add(c)}),(0,i.A)(this,"worker",void 0),(0,i.A)(this,"url",void 0),(0,i.A)(this,"destroy$",void 0),this.worker=t,this.url=r,this.destroy$=new k.B}static fromFunction(r,o){return new l(l.createFnUrl(r),o)}static execute(r,o){return(0,y.A)(function*(){const t=l.fromFunction(r),a=t.pipe((0,x.s)(1)).toPromise();return t.postMessage(o),a.then(c=>(t.terminate(),c))})()}static createFnUrl(r){const t=new Blob([`(\nfunction(fn){\n    function isFunction(type){\n        return type === 'function';\n    }\n\n    self.addEventListener('message', function(e) {\n        var result = fn.call(null, e.data);\n        if (result && [typeof result.then, typeof result.catch].every(isFunction)){\n            result\n                .then(postMessage)\n                .catch(function(error) {\n                    setTimeout(function(){throw error}, 0)\n                })\n        } else {\n            postMessage(result);\n        }\n    })\n}\n)(${r});`],{type:"text/javascript"});return URL.createObjectURL(t)}terminate(){this.destroy$.isStopped||(this.worker&&this.worker.terminate(),URL.revokeObjectURL(this.url),this.destroy$.next(),this.destroy$.complete())}postMessage(r){this.worker&&this.worker.postMessage(r)}}var u=n(3527),$=n(4135),j=n(9738),M=n(3229);let E=(()=>{var s;class r{constructor(){(0,i.A)(this,"date$",(0,M.O)(0,1e3).pipe((0,u.T)(()=>Date.now())))}}return s=r,(0,i.A)(r,"\u0275fac",function(t){return new(t||s)}),(0,i.A)(r,"\u0275cmp",e.VBU({type:s,selectors:[["app-clock"]],standalone:!0,features:[e.aNF],decls:3,vars:6,template:function(t,a){1&t&&(e.EFF(0),e.nI1(1,"date"),e.nI1(2,"async")),2&t&&e.SpI(" ",e.i5U(1,1,e.bMT(2,4,a.date$),"mediumTime")," ")},dependencies:[p.MD,p.Jj,p.vh],encapsulation:2,changeDetection:0})),r})();function I(s,r){if(1&s){const o=e.RV6();e.qex(0),e.nrm(1,"app-clock"),e.j41(2,"div",1)(3,"button",2),e.bIt("click",function(){e.eBV(o);const a=e.XpG();return e.Njj(a.workerThread.postMessage())}),e.EFF(4," Run in worker process "),e.k0s(),e.j41(5,"p"),e.EFF(6),e.nI1(7,"async"),e.k0s(),e.j41(8,"tui-notification",3),e.EFF(9,"This would be calculated in several seconds in a background thread"),e.k0s()(),e.j41(10,"div",1)(11,"button",2),e.bIt("click",function(){e.eBV(o);const a=e.XpG();return e.Njj(a.emitter.next())}),e.EFF(12," Run in main process "),e.k0s(),e.j41(13,"p"),e.EFF(14),e.nI1(15,"async"),e.k0s(),e.j41(16,"tui-notification",3),e.EFF(17,"This would freeze your main thread for several seconds"),e.k0s()(),e.bVm()}if(2&s){const o=e.XpG();e.R7$(6),e.SpI("Execution time: ",e.bMT(7,2,o.workerData$),""),e.R7$(8),e.SpI("Execution time: ",e.bMT(15,4,o.result$),"")}}function v(){const s=performance.now();return Array.from({length:16e3}).forEach((r,o)=>Array.from({length:o}).reduce(t=>t+1,0)),performance.now()-s}const R=(()=>{var s;class r{constructor(){(0,i.A)(this,"platformId",(0,e.WQX)(e.Agw)),(0,i.A)(this,"isBrowser",(0,p.UE)(this.platformId)),(0,i.A)(this,"workerThread",l.fromFunction(v)),(0,i.A)(this,"workerData$",this.workerThread.pipe(function A(){return(0,u.T)(({data:s})=>s)}())),(0,i.A)(this,"emitter",new k.B),(0,i.A)(this,"result$",this.emitter.pipe((0,u.T)(v)))}}return s=r,(0,i.A)(r,"\u0275fac",function(t){return new(t||s)}),(0,i.A)(r,"\u0275cmp",e.VBU({type:s,selectors:[["workers-page"]],standalone:!0,features:[e.aNF],decls:1,vars:1,consts:[[4,"ngIf"],[1,"example"],["appearance","secondary","tuiButton","",3,"click"],["size","m"]],template:function(t,a){1&t&&e.DNE(0,I,18,6,"ng-container",0),2&t&&e.Y8G("ngIf",a.isBrowser)},dependencies:[E,p.MD,p.bT,p.Jj,$.p,j.wS],styles:["[_nghost-%COMP%]{display:block;max-width:600px;margin:0 auto}.example[_ngcontent-%COMP%]{min-width:360px;border-top:1px solid gainsboro;margin-top:16px;padding-top:16px}"],changeDetection:0})),r})()}}]);