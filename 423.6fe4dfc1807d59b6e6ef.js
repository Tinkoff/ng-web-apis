"use strict";(self.webpackChunkng_web_apis=self.webpackChunkng_web_apis||[]).push([[423],{65423:(L,m,s)=>{s.r(m),s.d(m,{WorkersPageModule:()=>W});var t=s(74788),v=s(87241),y=s(9018),x=s(21860),f=s(14581),d=s(9359),h=s(98168),w=s(13528),C=s(65598);class p extends v.y{constructor(n,o){let r,i;try{r=new Worker(n,o)}catch(c){i=c}super(c=>{let k=y.E;i?c.error(i):this.destroy$.isStopped?c.complete():r&&(k=(0,x.T)((0,f.R)(r,"message").pipe((0,h.b)(u=>c.next(u))),(0,f.R)(r,"error").pipe((0,h.b)(u=>c.error(u)))).pipe((0,w.R)(this.destroy$))),k.subscribe().add(c)}),this.worker=r,this.url=n,this.destroy$=new d.x}static fromFunction(n,o){return new p(p.createFnUrl(n),o)}static execute(n,o){const r=p.fromFunction(n),i=r.pipe((0,C.q)(1)).toPromise();return r.postMessage(o),i.then(c=>(r.terminate(),c))}static createFnUrl(n){const r=new Blob([`(\nfunction(fn){\n    function isFunction(type){\n        return type === 'function';\n    }\n\n    self.addEventListener('message', function(e) {\n        var result = fn.call(null, e.data);\n        if (result && [typeof result.then, typeof result.catch].every(isFunction)){\n            result\n                .then(postMessage)\n                .catch(function(error) {\n                    setTimeout(function(){throw error}, 0)\n                })\n        } else {\n            postMessage(result);\n        }\n    })\n}\n)(${n});`],{type:"text/javascript"});return URL.createObjectURL(r)}terminate(){this.destroy$.isStopped||(this.worker&&this.worker.terminate(),URL.revokeObjectURL(this.url),this.destroy$.next(),this.destroy$.complete())}postMessage(n){this.worker&&this.worker.postMessage(n)}}var l=s(27969),a=s(12057),U=s(18946);let Z=(()=>{class e{constructor(){this.date$=(0,U.H)(0,1e3).pipe((0,l.U)(()=>Date.now()))}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-clock"]],decls:3,vars:6,template:function(o,r){1&o&&(t._uU(0),t.ALo(1,"date"),t.ALo(2,"async")),2&o&&t.hij(" ",t.xi3(1,1,t.lcZ(2,4,r.date$),"mediumTime")," ")},pipes:[a.uU,a.Ov],encapsulation:2,changeDetection:0}),e})();function A(e,n){if(1&e){const o=t.EpF();t.ynx(0),t._UZ(1,"app-clock"),t.TgZ(2,"div",1),t.TgZ(3,"button",2),t.NdJ("click",function(){return t.CHM(o),t.oxw().workerThread.postMessage()}),t._uU(4," Run in worker process "),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.ALo(7,"async"),t.qZA(),t.qZA(),t.TgZ(8,"div",1),t.TgZ(9,"button",2),t.NdJ("click",function(){return t.CHM(o),t.oxw().emitter.next()}),t._uU(10,"Run in main process"),t.qZA(),t.TgZ(11,"p"),t._uU(12),t.ALo(13,"async"),t.qZA(),t.qZA(),t.BQk()}if(2&e){const o=t.oxw();t.xp6(6),t.hij("Execution time: ",t.lcZ(7,2,o.workerData$),""),t.xp6(6),t.hij("Execution time: ",t.lcZ(13,4,o.result$),"")}}function g(){const e=performance.now();return Array.from({length:16e3}).forEach((n,o)=>Array.from({length:o}).reduce(r=>r+1,0)),performance.now()-e}let $=(()=>{class e{constructor(o){this.platformId=o,this.isBrowser=(0,a.NF)(this.platformId),this.workerThread=p.fromFunction(g),this.workerData$=this.workerThread.pipe((0,l.U)(({data:e})=>e)),this.emitter=new d.x,this.result$=this.emitter.pipe((0,l.U)(g))}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(t.Lbi))},e.\u0275cmp=t.Xpm({type:e,selectors:[["workers-page"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"example"],[3,"click"]],template:function(o,r){1&o&&t.YNc(0,A,14,6,"ng-container",0),2&o&&t.Q6J("ngIf",r.isBrowser)},directives:[a.O5,Z],pipes:[a.Ov],styles:["[_nghost-%COMP%]{perspective:150vw;user-select:none;flex-direction:column;align-items:center}.example[_ngcontent-%COMP%]{min-width:360px;border-top:1px solid gainsboro;margin-top:16px;padding-top:16px}"],changeDetection:0}),e})();var F=s(23327);let P=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({}),e})(),W=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[a.ez,P,F.Bz.forChild([{path:"",component:$}])]]}),e})()}}]);