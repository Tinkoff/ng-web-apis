"use strict";(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[796],{8796:($,g,i)=>{i.r(g),i.d(g,{default:()=>O});var s=i(8974),l=i(6568),h=i(1100),d=i(3568),u=i(368),p=i(6740),m=i(4212),o=i(6528);function I(t,a){if(1&t){const c=o.KQA();o.I0R(0,"button",3),o.qCj("click",function(){o.usT(c);const e=o.GaO();return o.CGJ(e.watch=!0)}),o.OEk(1," Get my position!\n"),o.C$Y()}}function E(t,a){if(1&t&&o.wR5(0,"iframe",6),2&t){const c=a.ngIf,n=o.GaO(2);o.E7m("src",n.getUrl(c),o.CaN)}}function y(t,a){1&t&&o.wR5(0,"tui-loader")}function k(t,a){if(1&t&&(o.SAx(0),o.yuY(1,E,1,1,"iframe",4),o.wVc(2,"async"),o.yuY(3,y,1,0,"ng-template",null,5,o.gJz),o.k70()),2&t){const c=o.Gew(4),n=o.GaO();o.yG2(1),o.E7m("ngIf",o.kDX(2,2,n.geolocation$))("ngIfElse",c)}}let O=(()=>{var t;class a{constructor(n,e){(0,s.c)(this,"geolocation$",void 0),(0,s.c)(this,"sanitizer",void 0),(0,s.c)(this,"watch",!1),(0,s.c)(this,"sample","import {GeolocationService} from '@ng-web-apis/geolocation';\n\n// ...\n\nconstructor(private readonly geolocation$: GeolocationService) {}\n\ngetPosition() {\n  geolocation$.subscribe((position) => {\n     doSomethingWithPosition(position);\n  });\n}"),(0,s.c)(this,"sampleAsync",'<app-component-using-position\n  [position]="geolocation$ | async"\n></app-component-using-position>'),this.geolocation$=n,this.sanitizer=e}getUrl({coords:n}){const{longitude:e,latitude:r}=n;return this.sanitizer.bypassSecurityTrustResourceUrl(`//www.openstreetmap.org/export/embed.html?bbox=${e-.005},${r-.005},${e+.005},${r+.005}&marker=${r},${e}&layer=mapnik`)}}return t=a,(0,s.c)(a,"\u0275fac",function(n){return new(n||t)(o.GI1(d.Fb),o.GI1(h.mI))}),(0,s.c)(a,"\u0275cmp",o.In1({type:t,selectors:[["geolocation-page"]],standalone:!0,features:[o.UHJ],decls:42,vars:4,consts:[[3,"highlight"],["appearance","secondary","tuiButton","",3,"click",4,"ngIf"],[4,"ngIf"],["appearance","secondary","tuiButton","",3,"click"],["alt","url","title","geolocation",3,"src",4,"ngIf","ngIfElse"],["loading",""],["alt","url","title","geolocation",3,"src"]],template:function(n,e){1&n&&(o.I0R(0,"strong"),o.OEk(1,"Angular"),o.C$Y(),o.OEk(2,"\ndoes not have any built-in instruments to use\n"),o.I0R(3,"strong"),o.OEk(4,"Geolocation API"),o.C$Y(),o.OEk(5,"\n. This is an\n"),o.I0R(6,"code"),o.OEk(7,"Observable"),o.C$Y(),o.OEk(8,"\nbased abstraction over\n"),o.I0R(9,"strong"),o.OEk(10,"Geolocation API"),o.C$Y(),o.OEk(11,"\nto use with\n"),o.I0R(12,"strong"),o.OEk(13,"Angular"),o.C$Y(),o.I0R(14,"h2"),o.OEk(15,"How to use"),o.C$Y(),o.I0R(16,"p"),o.OEk(17," Usage is pretty simple: just import service in your component and subscribe to it. Service extends "),o.I0R(18,"code"),o.OEk(19,"Observable"),o.C$Y(),o.OEk(20," and will emit the "),o.I0R(21,"code"),o.OEk(22,"Position"),o.C$Y(),o.OEk(23," object.\n"),o.C$Y(),o.I0R(24,"pre"),o.wR5(25,"code",0),o.C$Y(),o.I0R(26,"p"),o.OEk(27,"You also can use async pipe"),o.C$Y(),o.I0R(28,"pre"),o.wR5(29,"code",0),o.C$Y(),o.I0R(30,"h2"),o.OEk(31,"Single position"),o.C$Y(),o.I0R(32,"p"),o.OEk(33," If you need to get position just once and stop observing user location, you can subscribe to "),o.I0R(34,"code"),o.OEk(35,"geolocation$"),o.C$Y(),o.OEk(36," and use "),o.I0R(37,"code"),o.OEk(38,"take(1)"),o.C$Y(),o.OEk(39," RxJS operator. Service is cold, meaning if there are no Subscribers, it doesn't track position\n"),o.C$Y(),o.yuY(40,I,2,0,"button",1),o.yuY(41,k,5,4,"ng-container",2)),2&n&&(o.yG2(25),o.E7m("highlight",e.sample),o.yG2(4),o.E7m("highlight",e.sampleAsync),o.yG2(11),o.E7m("ngIf",!e.watch),o.yG2(1),o.E7m("ngIf",e.watch))},dependencies:[l.MD,l.u_,l.a,u.CI,u.Kw,p.Sk,p.Cb,m.M9,m.gl],styles:["[_nghost-%COMP%]{display:block;max-width:600px;margin:0 auto;line-height:1.5;font-size:1.1em}button[_ngcontent-%COMP%]{margin:0 auto;display:block}iframe[_ngcontent-%COMP%]{width:100%;height:20rem}"],changeDetection:0})),a})()}}]);