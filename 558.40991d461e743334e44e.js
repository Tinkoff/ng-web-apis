"use strict";(self.webpackChunkng_web_apis=self.webpackChunkng_web_apis||[]).push([[558],{8558:(Se,O,l)=>{l.r(O),l.d(O,{AudioPageModule:()=>Oe});var e=l(4788);const g=new e.OlP("Web Audio API context",{providedIn:"root",factory:()=>new AudioContext});var T=l(2057),C=l(1422),$=l(4415);const v=new(l(2994).v)($.o),I=v;var E=l(7980),j=l(1830);function P(t=0,r=v){return t<0&&(t=0),function(t=0,r,n=I){let i=-1;return null!=r&&((0,j.K)(r)?n=r:i=r),new E.y(o=>{let a=function(t){return t instanceof Date&&!isNaN(t)}(t)?+t-n.now():t;a<0&&(a=0);let c=0;return n.schedule(function(){o.closed||(o.next(c++),0<=i?this.schedule(void 0,i):o.complete())},a)})}(t,t,r)}var M=l(7969),L=l(8168),V=l(2147),S=l(2085),F=l(8499),ee=l(4970);const p=new e.OlP("Web Audio API audio node",{factory:()=>null}),y=new e.OlP("Tests if constructor mode of node creation is supported or a fallback to factory method is needed",{providedIn:"root",factory:()=>{try{return!!new GainNode((0,e.f3M)(g))}catch(t){return!1}}});function d(t,r){t&&r&&t.connect(r)}let te=(()=>{class t extends AnalyserNode{constructor(n,i,o){if(!o){const a=n.createAnalyser();return Object.setPrototypeOf(a,t.prototype),t.init(a,i),a}super(n),t.init(this,i)}ngOnDestroy(){this.disconnect()}isSilent(n){return Math.abs(n.reduce((i,o)=>i+o,0))<.001}static init(n,i){d(i,n),n.fftSize=256,n.connect(n.context.destination),n.quiet=P(100).pipe(function(t){return(0,M.U)(()=>t)}(new Float32Array(n.fftSize)),(0,L.b)(o=>n.getFloatTimeDomainData(o)),(0,M.U)(o=>n.isSilent(o)),(0,V.x)(),(0,S.e)((r,n)=>{let i=!1;r.subscribe(new F.Q(n,a=>(i||(i=!a))&&n.next(a)))}),function(t,r=v){return(0,S.e)((n,i)=>{let o=null,a=null,c=null;const s=()=>{if(o){o.unsubscribe(),o=null;const u=a;a=null,i.next(u)}};function m(){const u=c+t,A=r.now();if(A<u)return o=this.schedule(void 0,u-A),void i.add(o);s()}n.subscribe(new F.Q(i,u=>{a=u,c=r.now(),o||(o=r.schedule(m,t),i.add(o))},()=>{s(),i.complete()},void 0,()=>{a=o=null}))})}(5e3),(0,ee.h)(o=>o))}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(g),e.Y36(p),e.Y36(y))},t.\u0275dir=e.lG2({type:t,selectors:[["","waAudioDestinationNode",""]],outputs:{quiet:"quiet"},exportAs:["AudioNode"],features:[e.qOj]}),t})();var h=l(4762),J=l(9359),Q=l(4945),B=l(1528);function D(t,r,n=0){t.cancelAndHoldAtTime?t.cancelAndHoldAtTime(n):(t.cancelScheduledValues(n),t.setValueAtTime(Z(t.value),n)),"number"!=typeof r?r instanceof Array?function(t,r,n){r.forEach(i=>{"mode"in i?U(t,i,n):t.setValueCurveAtTime(i.value,n,i.duration),n+=i.duration})}(t,r,n):"mode"in r?(t.setValueAtTime(Z(t.value),n),U(t,r,n)):t.setValueCurveAtTime(r.value,n,r.duration):t.setValueAtTime(Z(r),n)}function U(t,{value:r,mode:n="instant",duration:i},o){switch(n){case"instant":t.setValueAtTime(Z(r),o),t.setValueAtTime(Z(r),o+i);break;case"exponential":r<0||r*t.value<0?t.linearRampToValueAtTime(Z(r),o+i):t.exponentialRampToValueAtTime(Z(r),o+i),t.setValueAtTime(Z(r),o+i);break;case"linear":t.linearRampToValueAtTime(Z(r),o+i)}}function Z(t){return t||1e-8}function x(t=""){return(n,i)=>{Object.defineProperty(n,i,{set(o){o="string"==typeof o?Number.parseFloat(o):o;const a=this instanceof AudioWorkletNode?this.parameters.get(i):this[t];a instanceof AudioParam?D(a,o,this.context.currentTime):Object.defineProperty(n,i,{value:o})}})}}let Y=(()=>{class t{constructor(n){this.context=n,this.cache=new Map}fetch(n){return new Promise((i,o)=>{if(this.cache.has(n))return void i(this.cache.get(n));const a=new XMLHttpRequest;a.open("GET",n,!0),a.responseType="arraybuffer",a.onerror=o,a.onabort=o,a.onload=()=>{this.context.decodeAudioData(a.response,c=>{this.cache.set(n,c),i(c)},o)},a.send()})}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(g))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function f(t,r){const n=parseFloat(t||"");return isNaN(n)?r:n}let ie=(()=>{class t extends AudioBufferSourceNode{constructor(n,i,o,a,c,s){const m=f(c,0),u=f(s,1);if(!o){const A=i.createBufferSource();return Object.setPrototypeOf(t.prototype,Object.getPrototypeOf(A)),Object.setPrototypeOf(A,t.prototype),A.playbackRate.value=u,t.init(A,null,a,n),A}super(i,{detune:m,playbackRate:u}),t.init(this,null,a,n)}set bufferSetter(n){this.buffer$.next(n)}ngOnDestroy(){this.buffer$.complete();try{this.stop()}catch(n){}this.disconnect()}static init(n,i,o,a){null!==o&&n.start();const c=new e.vpe;n.ended=c,n.onended=()=>c.emit(),n.buffer$=new J.x,n.buffer$.pipe((0,B.w)(s=>"string"==typeof s?a.fetch(s):(0,Q.of)(s))).subscribe(s=>{n.buffer=s})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(Y),e.Y36(g),e.Y36(y),e.$8M("autoplay"),e.$8M("detune"),e.$8M("playbackRate"))},t.\u0275dir=e.lG2({type:t,selectors:[["","waAudioBufferSourceNode",""]],inputs:{loop:"loop",loopStart:"loopStart",loopEnd:"loopEnd",channelCount:"channelCount",channelCountMode:"channelCountMode",channelInterpretation:"channelInterpretation",bufferSetter:["buffer","bufferSetter"],detuneParam:["detune","detuneParam"],playbackRateParam:["playbackRate","playbackRateParam"]},outputs:{ended:"ended"},exportAs:["AudioNode"],features:[e._Bn([{provide:p,useExisting:(0,e.Gpc)(()=>t)}]),e.qOj]}),(0,h.gn)([x("detune")],t.prototype,"detuneParam",void 0),(0,h.gn)([x("playbackRate")],t.prototype,"playbackRateParam",void 0),t})();var b=l(4054),N=l(815);let ae=(()=>{class t extends AnalyserNode{constructor(n,i,o,a,c,s,m){const u=f(a,2048),A=f(c,-30),w=f(s,-100),q=f(m,.8);if(!o){const _=n.createAnalyser();return Object.setPrototypeOf(_,t.prototype),t.init(_,i),_.fftSize=u,_.maxDecibels=A,_.minDecibels=w,_.smoothingTimeConstant=q,_}super(n,{fftSize:u,maxDecibels:A,minDecibels:w,smoothingTimeConstant:q}),t.init(this,i)}ngOnDestroy(){this.disconnect()}static init(n,i){d(i,n);let o=new Uint8Array(n.frequencyBinCount),a=new Float32Array(n.frequencyBinCount),c=new Uint8Array(n.fftSize),s=new Float32Array(n.fftSize);n.frequencyByte$=P(0,b.Z).pipe((0,M.U)(()=>(o.length!==n.frequencyBinCount&&(o=new Uint8Array(n.frequencyBinCount)),n.getByteFrequencyData(o),o)),(0,N.B)()),n.frequencyFloat$=P(0,b.Z).pipe((0,M.U)(()=>(a.length!==n.frequencyBinCount&&(a=new Float32Array(n.frequencyBinCount)),n.getFloatFrequencyData(a),a)),(0,N.B)()),n.timeByte$=P(0,b.Z).pipe((0,M.U)(()=>(c.length!==n.fftSize&&(c=new Uint8Array(n.frequencyBinCount)),n.getByteTimeDomainData(c),c)),(0,N.B)()),n.timeFloat$=P(0,b.Z).pipe((0,M.U)(()=>(s.length!==n.fftSize&&(s=new Float32Array(n.frequencyBinCount)),n.getFloatTimeDomainData(s),s)),(0,N.B)())}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(g),e.Y36(p,4),e.Y36(y),e.$8M("fftSize"),e.$8M("maxDecibels"),e.$8M("minDecibels"),e.$8M("smoothingTimeConstant"))},t.\u0275dir=e.lG2({type:t,selectors:[["","waAnalyserNode",""]],inputs:{fftSize:"fftSize",minDecibels:"minDecibels",maxDecibels:"maxDecibels",smoothingTimeConstant:"smoothingTimeConstant",channelCount:"channelCount",channelCountMode:"channelCountMode",channelInterpretation:"channelInterpretation"},outputs:{frequencyByte$:"frequencyByte$",frequencyFloat$:"frequencyFloat$",timeByte$:"timeByte$",timeFloat$:"timeFloat$"},exportAs:["AudioNode"],features:[e._Bn([{provide:p,useExisting:(0,e.Gpc)(()=>t)}]),e.qOj]}),t})(),re=(()=>{class t extends GainNode{constructor(n,i,o){if(!o){const a=n.createGain();return Object.setPrototypeOf(a,t.prototype),d(i,a),a}super(n),d(i,this)}set waOutput(n){this.disconnect(),d(this,n)}ngOnDestroy(){this.disconnect()}static init(n,i){d(i,n)}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(g),e.Y36(p),e.Y36(y))},t.\u0275dir=e.lG2({type:t,selectors:[["","waOutput",""]],inputs:{waOutput:"waOutput"},features:[e.qOj]}),t})(),ce=(()=>{class t extends MediaElementAudioSourceNode{constructor(n,i,{nativeElement:o}){if(!i){const a=n.createMediaElementSource(o);return Object.setPrototypeOf(a,t.prototype),a}super(n,{mediaElement:o})}ngOnDestroy(){this.disconnect()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(g),e.Y36(y),e.Y36(e.SBq))},t.\u0275dir=e.lG2({type:t,selectors:[["audio","waMediaElementAudioSourceNode",""],["video","waMediaElementAudioSourceNode",""]],exportAs:["AudioNode"],features:[e._Bn([{provide:p,useExisting:(0,e.Gpc)(()=>t)}]),e.qOj]}),t})(),se=(()=>{class t extends OscillatorNode{constructor(n,i,o,a,c){const s=f(a,0),m=f(c,440);if(!i){const u=n.createOscillator();return Object.setPrototypeOf(t.prototype,Object.getPrototypeOf(u)),Object.setPrototypeOf(u,t.prototype),u.detune.value=s,u.frequency.value=m,t.init(u,null,o),u}super(n,{detune:s,frequency:m}),t.init(this,null,o)}set periodicWave(n){this.setPeriodicWave(n)}ngOnDestroy(){try{this.stop()}catch(n){}this.disconnect()}static init(n,i,o){d(i,n),null!==o&&n.start();const a=new e.vpe;n.ended=a,n.onended=()=>a.emit()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(g),e.Y36(y),e.$8M("autoplay"),e.$8M("detune"),e.$8M("frequency"))},t.\u0275dir=e.lG2({type:t,selectors:[["","waOscillatorNode",""]],inputs:{type:"type",channelCount:"channelCount",channelCountMode:"channelCountMode",channelInterpretation:"channelInterpretation",periodicWave:"periodicWave",detuneParam:["detune","detuneParam"],frequencyParam:["frequency","frequencyParam"]},outputs:{ended:"ended"},exportAs:["AudioNode"],features:[e._Bn([{provide:p,useExisting:(0,e.Gpc)(()=>t)}]),e.qOj]}),(0,h.gn)([x("detune")],t.prototype,"detuneParam",void 0),(0,h.gn)([x("frequency")],t.prototype,"frequencyParam",void 0),t})(),ue=(()=>{class t extends GainNode{constructor(n,i,o,a){const c=f(a,1);if(!o){const s=n.createGain();return Object.setPrototypeOf(s,t.prototype),d(i,s),s.gain.value=c,s}super(n,{gain:c}),d(i,this)}ngOnDestroy(){this.disconnect()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(g),e.Y36(p,4),e.Y36(y),e.$8M("gain"))},t.\u0275dir=e.lG2({type:t,selectors:[["","waGainNode",""]],inputs:{channelCount:"channelCount",channelCountMode:"channelCountMode",channelInterpretation:"channelInterpretation",gainParam:["gain","gainParam"]},exportAs:["AudioNode"],features:[e._Bn([{provide:p,useExisting:(0,e.Gpc)(()=>t)}]),e.qOj]}),(0,h.gn)([x("gain")],t.prototype,"gainParam",void 0),t})();function G(t){if(!t)return 0;if("number"==typeof t)return t;if(t instanceof Array){const r=t[t.length-1].value;return"number"==typeof r?r:r[r.length-1]}return t.value instanceof Array?t.value[t.value.length-1]:t.value}let le=(()=>{class t extends StereoPannerNode{constructor(n,i,o){const a=f(o,0);try{new StereoPannerNode(n)}catch(c){const s=n.createPanner();return Object.setPrototypeOf(s,t.prototype),s.fallbackToPannerNode(G(a)),d(i,s),s}super(n,{pan:a}),d(i,this)}set panParam(n){"setPosition"in this?this.fallbackToPannerNode(G(n)):D(this.pan,n,this.context.currentTime)}ngOnDestroy(){this.disconnect()}fallbackToPannerNode(n){const i=100*n,o=i>0?270-i:i+90,a=Math.sin(i*(Math.PI/180)),c=Math.sin(o*(Math.PI/180));this.setPosition(a,0,c)}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(g),e.Y36(p,4),e.$8M("pan"))},t.\u0275dir=e.lG2({type:t,selectors:[["","waStereoPannerNode",""]],inputs:{channelCount:"channelCount",channelCountMode:"channelCountMode",channelInterpretation:"channelInterpretation",panParam:["pan","panParam"]},exportAs:["AudioNode"],features:[e._Bn([{provide:p,useExisting:(0,e.Gpc)(()=>t)}]),e.qOj]}),t})(),de=(()=>{class t extends DelayNode{constructor(n,i,o,a,c){const s=f(a,0),m=f(c,1);if(!o){const u=n.createDelay(m);return Object.setPrototypeOf(u,t.prototype),d(i,u),u.delayTime.value=s,u}super(n,{delayTime:s,maxDelayTime:m}),d(i,this)}ngOnDestroy(){this.disconnect()}static init(n,i){d(i,n)}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(g),e.Y36(p,4),e.Y36(y),e.$8M("delayTime"),e.$8M("maxDelayTime"))},t.\u0275dir=e.lG2({type:t,selectors:[["","waDelayNode",""]],inputs:{channelCount:"channelCount",channelCountMode:"channelCountMode",channelInterpretation:"channelInterpretation",delayTimeParam:["delayTime","delayTimeParam"]},exportAs:["AudioNode"],features:[e._Bn([{provide:p,useExisting:(0,e.Gpc)(()=>t)}]),e.qOj]}),(0,h.gn)([x("delayTime")],t.prototype,"delayTimeParam",void 0),t})(),pe=(()=>{class t extends BiquadFilterNode{constructor(n,i,o,a,c,s,m){const u=f(a,0),A=f(c,350),w=f(s,0),q=f(m,1);if(!i){const _=n.createBiquadFilter();return Object.setPrototypeOf(_,t.prototype),_.detune.value=u,_.frequency.value=A,_.gain.value=w,_.Q.value=q,d(o,_),_}super(n,{detune:u,frequency:A,gain:w,Q:q}),d(o,this)}ngOnDestroy(){this.disconnect()}static init(n,i){d(i,n)}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(g),e.Y36(y),e.Y36(p,4),e.$8M("detune"),e.$8M("frequency"),e.$8M("gain"),e.$8M("Q"))},t.\u0275dir=e.lG2({type:t,selectors:[["","waBiquadFilterNode",""]],inputs:{type:"type",channelCount:"channelCount",channelCountMode:"channelCountMode",channelInterpretation:"channelInterpretation",detuneParam:["detune","detuneParam"],frequencyParam:["frequency","frequencyParam"],gainParam:["gain","gainParam"],qParam:["Q","qParam"]},exportAs:["AudioNode"],features:[e._Bn([{provide:p,useExisting:(0,e.Gpc)(()=>t)}]),e.qOj]}),(0,h.gn)([x("detune")],t.prototype,"detuneParam",void 0),(0,h.gn)([x("frequency")],t.prototype,"frequencyParam",void 0),(0,h.gn)([x("gain")],t.prototype,"gainParam",void 0),(0,h.gn)([x("Q")],t.prototype,"qParam",void 0),t})(),ge=(()=>{class t extends WaveShaperNode{constructor(n,i,o){if(!o){const a=n.createWaveShaper();return Object.setPrototypeOf(a,t.prototype),d(i,a),a}super(n),d(i,this)}ngOnDestroy(){this.disconnect()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(g),e.Y36(p,4),e.Y36(y))},t.\u0275dir=e.lG2({type:t,selectors:[["","waWaveShaperNode",""]],inputs:{oversample:"oversample",curve:"curve",channelCount:"channelCount",channelCountMode:"channelCountMode",channelInterpretation:"channelInterpretation"},exportAs:["AudioNode"],features:[e._Bn([{provide:p,useExisting:(0,e.Gpc)(()=>t)}]),e.qOj]}),t})(),fe=(()=>{class t extends ConvolverNode{constructor(n,i,o,a){if(!a){const c=i.createConvolver();return Object.setPrototypeOf(c,t.prototype),t.init(c,o,n),c}super(i),t.init(this,o,n)}set bufferSetter(n){this.buffer$.next(n)}ngOnDestroy(){this.buffer$.complete(),this.disconnect()}static init(n,i,o){d(i,n),n.buffer$=new J.x,n.buffer$.pipe((0,B.w)(a=>"string"==typeof a?o.fetch(a):(0,Q.of)(a))).subscribe(a=>{n.buffer=a})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(Y),e.Y36(g),e.Y36(p,4),e.Y36(y))},t.\u0275dir=e.lG2({type:t,selectors:[["","waConvolverNode",""]],inputs:{normalize:"normalize",channelCount:"channelCount",channelCountMode:"channelCountMode",channelInterpretation:"channelInterpretation",bufferSetter:["buffer","bufferSetter"]},exportAs:["AudioNode"],features:[e._Bn([{provide:p,useExisting:(0,e.Gpc)(()=>t)}]),e.qOj]}),t})(),_e=(()=>{class t{constructor(n){this.context=n}transform(n,i,o){return this.context.createPeriodicWave(new Float32Array(n),i?new Float32Array(i):new Float32Array(n.length),{disableNormalization:!!o})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(g,16))},t.\u0275pipe=e.Yjl({name:"waPeriodicWave",type:t,pure:!0}),t})(),me=(()=>{class t{transform(n,i,o="exponential"){return n instanceof Array?{value:n,duration:i}:{value:n,duration:i,mode:o}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275pipe=e.Yjl({name:"waAudioParam",type:t,pure:!0}),t})();const Ae=["chain"];function ye(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"button",2),e.NdJ("click",function(){return e.CHM(n),e.oxw().start()}),e._uU(1," Start AudioContext\n"),e.qZA()}}function he(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"button",16,17),e.NdJ("click",function(o){e.CHM(n);const a=e.MAs(1);return e.oxw(3).onClick(a,o.target)}),e._uU(2," Play "),e.ynx(3,18),e.NdJ("timeByte$",function(o){e.CHM(n),e.oxw(2);const a=e.MAs(34);return e.oxw().onTimeDomain(o,a)}),e.GkF(4,19),e.BQk(),e.qZA()}if(2&t){e.oxw(2);const n=e.MAs(33),i=e.oxw();e.Q6J("loop",!0),e.xp6(4),e.Q6J("waOutput",i.chain||n)}}function xe(t,r){if(1&t&&(e.ynx(0),e.YNc(1,he,5,2,"button",15),e.BQk()),2&t){const n=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",n.buffers)}}function Ce(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"audio",20),e.ynx(1,18),e.NdJ("timeByte$",function(o){e.CHM(n),e.oxw();const a=e.MAs(34);return e.oxw().onTimeDomain(o,a)}),e.GkF(2,19),e.BQk(),e.qZA()}if(2&t){e.oxw();const n=e.MAs(33),i=e.oxw();e.xp6(2),e.Q6J("waOutput",i.chain||n)}}function Ze(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"button",22,17),e.NdJ("click",function(o){e.CHM(n);const a=e.MAs(1);return e.oxw(3).onClick(a,o.target)}),e.ALo(2,"waPeriodicWave"),e._uU(3," Play "),e.ynx(4,18),e.NdJ("timeByte$",function(o){e.CHM(n),e.oxw(2);const a=e.MAs(34);return e.oxw().onTimeDomain(o,a)}),e.GkF(5,19),e.BQk(),e.qZA()}if(2&t){e.oxw(2);const n=e.MAs(33),i=e.oxw();e.Q6J("frequency",100)("periodicWave",e.lcZ(2,3,i.real)),e.xp6(5),e.Q6J("waOutput",i.chain||n)}}function Me(t,r){if(1&t&&(e.ynx(0),e.YNc(1,Ze,6,5,"button",21),e.BQk()),2&t){const n=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",n.buffers)}}function Te(t,r){if(1&t){const n=e.EpF();e.ynx(0),e.TgZ(1,"fieldset",23,24),e.ALo(3,"waAudioParam"),e.TgZ(4,"legend"),e._uU(5,"GainNode"),e.qZA(),e.TgZ(6,"input",25),e.NdJ("ngModelChange",function(o){return e.CHM(n),e.oxw(2).gain=o}),e.qZA(),e.TgZ(7,"fieldset",26),e.ALo(8,"waAudioParam"),e.TgZ(9,"legend"),e._uU(10,"StereoPannerNode"),e.qZA(),e.TgZ(11,"input",27),e.NdJ("ngModelChange",function(o){return e.CHM(n),e.oxw(2).pan=o}),e.qZA(),e.TgZ(12,"fieldset",9),e.TgZ(13,"legend"),e._uU(14,"AudioDestinationNode"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&t){const n=e.oxw(2);e.xp6(1),e.Q6J("gain",e.xi3(3,4,n.gain,.1)),e.xp6(5),e.Q6J("ngModel",n.gain),e.xp6(1),e.Q6J("pan",e.xi3(8,7,n.pan,.1)),e.xp6(4),e.Q6J("ngModel",n.pan)}}function Pe(t,r){if(1&t){const n=e.EpF();e.ynx(0),e.TgZ(1,"fieldset",23,24),e.ALo(3,"waAudioParam"),e.TgZ(4,"legend"),e._uU(5,"GainNode"),e.qZA(),e.TgZ(6,"em"),e._uU(7,"For feedback loop purposes only"),e.qZA(),e.TgZ(8,"fieldset",28),e.ALo(9,"waAudioParam"),e.TgZ(10,"legend"),e._uU(11,"DelayNode"),e.qZA(),e.TgZ(12,"input",25),e.NdJ("ngModelChange",function(o){return e.CHM(n),e.oxw(2).delayTime=o}),e.qZA(),e.TgZ(13,"fieldset",23),e.TgZ(14,"legend"),e._uU(15,"GainNode"),e.qZA(),e.TgZ(16,"input",25),e.NdJ("ngModelChange",function(o){return e.CHM(n),e.oxw(2).delayGain=o}),e.qZA(),e.TgZ(17,"fieldset",19),e.TgZ(18,"legend"),e._uU(19,"Output"),e.qZA(),e.TgZ(20,"em"),e._uU(21," Connected back to the beginning of the chain "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(22,"fieldset",9),e.TgZ(23,"legend"),e._uU(24,"AudioDestinationNode"),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&t){const n=e.MAs(2),i=e.oxw(2);e.xp6(1),e.Q6J("gain",e.xi3(3,6,i.gain,.1)),e.xp6(7),e.Q6J("delayTime",e.xi3(9,9,i.delayTime,.1)),e.xp6(4),e.Q6J("ngModel",i.delayTime),e.xp6(1),e.Q6J("gain",i.delayGain),e.xp6(3),e.Q6J("ngModel",i.delayGain),e.xp6(1),e.Q6J("waOutput",n)}}function we(t,r){if(1&t){const n=e.EpF();e.ynx(0),e.TgZ(1,"fieldset",29,24),e.ALo(3,"waAudioParam"),e.ALo(4,"waAudioParam"),e.ALo(5,"waAudioParam"),e.ALo(6,"waAudioParam"),e.TgZ(7,"legend"),e._uU(8,"BiquadFilterNode"),e.qZA(),e.TgZ(9,"label"),e.TgZ(10,"select",30),e.NdJ("ngModelChange",function(o){return e.CHM(n),e.oxw(2).type=o}),e.TgZ(11,"option",31),e._uU(12,"lowpass"),e.qZA(),e.TgZ(13,"option",32),e._uU(14,"highpass"),e.qZA(),e.TgZ(15,"option",33),e._uU(16,"bandpass"),e.qZA(),e.TgZ(17,"option",34),e._uU(18,"lowshelf"),e.qZA(),e.TgZ(19,"option",35),e._uU(20,"highshelf"),e.qZA(),e.TgZ(21,"option",36),e._uU(22,"peaking"),e.qZA(),e.TgZ(23,"option",37),e._uU(24,"notch"),e.qZA(),e.TgZ(25,"option",38),e._uU(26,"allpass"),e.qZA(),e.qZA(),e.TgZ(27,"code"),e._uU(28,"type"),e.qZA(),e.qZA(),e.TgZ(29,"label"),e.TgZ(30,"input",25),e.NdJ("ngModelChange",function(o){return e.CHM(n),e.oxw(2).filterGain=o}),e.qZA(),e.TgZ(31,"code"),e._uU(32,"gain"),e.qZA(),e.qZA(),e.TgZ(33,"label"),e.TgZ(34,"input",39),e.NdJ("ngModelChange",function(o){return e.CHM(n),e.oxw(2).frequency=o}),e.qZA(),e.TgZ(35,"code"),e._uU(36,"frequency"),e.qZA(),e.qZA(),e.TgZ(37,"label"),e.TgZ(38,"input",40),e.NdJ("ngModelChange",function(o){return e.CHM(n),e.oxw(2).Q=o}),e.qZA(),e.TgZ(39,"code"),e._uU(40,"Q"),e.qZA(),e.qZA(),e.TgZ(41,"label"),e.TgZ(42,"input",41),e.NdJ("ngModelChange",function(o){return e.CHM(n),e.oxw(2).detune=o}),e.qZA(),e.TgZ(43,"code"),e._uU(44,"detune"),e.qZA(),e.qZA(),e.TgZ(45,"fieldset",42),e.TgZ(46,"legend"),e._uU(47,"WaveShaperNode"),e.qZA(),e.TgZ(48,"input",43),e.NdJ("ngModelChange",function(o){return e.CHM(n),e.oxw(2).onCurveChange(o)}),e.qZA(),e.ynx(49,23),e.ALo(50,"waAudioParam"),e.TgZ(51,"fieldset",44),e.TgZ(52,"legend"),e._uU(53,"ConvolverNode"),e.qZA(),e.TgZ(54,"fieldset",9),e.TgZ(55,"legend"),e._uU(56,"AudioDestinationNode"),e.qZA(),e.qZA(),e.qZA(),e.BQk(),e.qZA(),e.qZA(),e.BQk()}if(2&t){const n=e.oxw(2);e.xp6(1),e.Q6J("type",n.type)("gain",e.xi3(3,13,n.filterGain,.1))("frequency",e.xi3(4,16,n.frequency,.1))("Q",e.xi3(5,19,n.Q,.1))("detune",e.xi3(6,22,n.detune,.1)),e.xp6(9),e.Q6J("ngModel",n.type),e.xp6(20),e.Q6J("ngModel",n.filterGain),e.xp6(4),e.Q6J("ngModel",n.frequency),e.xp6(4),e.Q6J("ngModel",n.Q),e.xp6(4),e.Q6J("ngModel",n.detune),e.xp6(3),e.Q6J("curve",n.curve),e.xp6(3),e.Q6J("ngModel",n.distortion),e.xp6(1),e.Q6J("gain",e.xi3(50,25,n.distortionCompensation,.1))}}function qe(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"section"),e.TgZ(1,"h1"),e._uU(2,"Description"),e.qZA(),e.TgZ(3,"p"),e._uU(4," This is a demo for "),e.TgZ(5,"code"),e.TgZ(6,"em"),e._uU(7,"@ng-web-apis/audio"),e.qZA(),e.qZA(),e._uU(8," \u2014 a Web Audio API declarative library for Angular. Here you can select different audio source options and see AudioNode graph for selected configuration. Demo page uses HTML elements as directives hosts, in real life scenario you can use "),e.TgZ(9,"code"),e._uU(10,"ng-container"),e.qZA(),e._uU(11," so you will not have redundant DOM tags. "),e.qZA(),e.qZA(),e.TgZ(12,"section"),e.TgZ(13,"h1"),e._uU(14,"Source"),e.qZA(),e.TgZ(15,"p"),e.TgZ(16,"label"),e.TgZ(17,"input",3),e.NdJ("ngModelChange",function(o){return e.CHM(n),e.oxw().selectedSource=o}),e.qZA(),e._uU(18," AudioBufferSourceNode "),e.qZA(),e.qZA(),e.TgZ(19,"p"),e.TgZ(20,"label"),e.TgZ(21,"input",4),e.NdJ("ngModelChange",function(o){return e.CHM(n),e.oxw().selectedSource=o}),e.qZA(),e._uU(22," MediaElementAudioSourceNode "),e.qZA(),e.qZA(),e.TgZ(23,"p"),e.TgZ(24,"label"),e.TgZ(25,"input",5),e.NdJ("ngModelChange",function(o){return e.CHM(n),e.oxw().selectedSource=o}),e.qZA(),e._uU(26," OscillatorNode "),e.qZA(),e.qZA(),e.ynx(27,6),e.YNc(28,xe,2,1,"ng-container",7),e.YNc(29,Ce,3,1,"audio",8),e.YNc(30,Me,2,1,"ng-container",7),e.BQk(),e.TgZ(31,"p"),e._UZ(32,"canvas",9,10),e.qZA(),e.qZA(),e.TgZ(35,"section"),e.TgZ(36,"h1"),e._uU(37,"Chain"),e.qZA(),e.TgZ(38,"p"),e.TgZ(39,"label"),e.TgZ(40,"input",11),e.NdJ("ngModelChange",function(o){return e.CHM(n),e.oxw().selectedChain=o}),e.qZA(),e._uU(41," Dry "),e.qZA(),e.qZA(),e.TgZ(42,"p"),e.TgZ(43,"label"),e.TgZ(44,"input",12),e.NdJ("ngModelChange",function(o){return e.CHM(n),e.oxw().selectedChain=o}),e.qZA(),e._uU(45," Balance "),e.qZA(),e.qZA(),e.TgZ(46,"p"),e.TgZ(47,"label"),e.TgZ(48,"input",13),e.NdJ("ngModelChange",function(o){return e.CHM(n),e.oxw().selectedChain=o}),e.qZA(),e._uU(49," Delay "),e.qZA(),e.qZA(),e.TgZ(50,"p"),e.TgZ(51,"label"),e.TgZ(52,"input",14),e.NdJ("ngModelChange",function(o){return e.CHM(n),e.oxw().selectedChain=o}),e.qZA(),e._uU(53," Complex "),e.qZA(),e.qZA(),e.ynx(54,6),e.YNc(55,Te,15,10,"ng-container",7),e.YNc(56,Pe,25,12,"ng-container",7),e.YNc(57,we,57,28,"ng-container",7),e.BQk(),e.qZA()}if(2&t){const n=e.oxw();e.xp6(17),e.Q6J("ngModel",n.selectedSource),e.xp6(4),e.Q6J("ngModel",n.selectedSource),e.xp6(4),e.Q6J("ngModel",n.selectedSource),e.xp6(2),e.Q6J("ngSwitch",n.selectedSource),e.xp6(1),e.Q6J("ngSwitchCase","buffer"),e.xp6(1),e.Q6J("ngSwitchCase","media"),e.xp6(1),e.Q6J("ngSwitchCase","oscillator"),e.xp6(10),e.Q6J("ngModel",n.selectedChain),e.xp6(4),e.Q6J("ngModel",n.selectedChain),e.xp6(4),e.Q6J("ngModel",n.selectedChain),e.xp6(4),e.Q6J("ngModel",n.selectedChain),e.xp6(2),e.Q6J("ngSwitch",n.selectedChain),e.xp6(1),e.Q6J("ngSwitchCase","balance"),e.xp6(1),e.Q6J("ngSwitchCase","delay"),e.xp6(1),e.Q6J("ngSwitchCase","complex")}}let be=(()=>{class t{constructor(n){this.context=n,this.buffers=[Date.now()],this.selectedChain="dry",this.selectedSource="buffer",this.gain=1,this.pan=0,this.delayTime=1,this.delayGain=.5,this.distortion=20,this.frequency=350,this.detune=0,this.filterGain=0,this.Q=1,this.type="lowpass",this.curve=W(this.distortion),this.started=!1,this.real=[0,0,1,0,1]}get distortionCompensation(){return 1.2-this.distortion/20}start(){this.started=!0,this.context.resume()}onCurveChange(n){this.distortion=n,this.curve=W(n)}onClick(n,i){"Play"===i.textContent.trim()?(i.textContent="Stop",n.start()):this.buffers[0]=Date.now()}onTimeDomain(n,i){const o=i.getContext("2d");if(!o)return;o.fillStyle="rgb(200, 200, 200)",o.fillRect(0,0,i.width,i.height),o.lineWidth=2,o.strokeStyle="rgb(0, 0, 0)",o.beginPath();const a=Number(i.width)/n.length;let c=0;for(let s=0;s<n.length;s++){const u=n[s]/128*i.height/2;0===s?o.moveTo(c,u):o.lineTo(c,u),c+=a}o.lineTo(i.width,i.height/2),o.stroke()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(g))},t.\u0275cmp=e.Xpm({type:t,selectors:[["audio-page"]],viewQuery:function(n,i){if(1&n&&e.Gf(Ae,5),2&n){let o;e.iGM(o=e.CRH())&&(i.chain=o.first)}},decls:3,vars:2,consts:[[3,"click",4,"ngIf","ngIfElse"],["graph",""],[3,"click"],["type","radio","value","buffer","name","source",3,"ngModel","ngModelChange"],["type","radio","value","media","name","source",3,"ngModel","ngModelChange"],["type","radio","value","oscillator","name","source",3,"ngModel","ngModelChange"],[3,"ngSwitch"],[4,"ngSwitchCase"],["waMediaElementAudioSourceNode","","src","assets/demo.mp3","loop","","controls","",4,"ngSwitchCase"],["waAudioDestinationNode",""],["fallback","AudioNode","canvas",""],["type","radio","name","chain","value","dry",3,"ngModel","ngModelChange"],["type","radio","name","chain","value","balance",3,"ngModel","ngModelChange"],["type","radio","name","chain","value","delay",3,"ngModel","ngModelChange"],["type","radio","name","chain","value","complex",3,"ngModel","ngModelChange"],["waAudioBufferSourceNode","","buffer","assets/demo.mp3",3,"loop","click",4,"ngFor","ngForOf"],["waAudioBufferSourceNode","","buffer","assets/demo.mp3",3,"loop","click"],["source","AudioNode"],["waAnalyserNode","",3,"timeByte$"],[3,"waOutput"],["waMediaElementAudioSourceNode","","src","assets/demo.mp3","loop","","controls",""],["waOscillatorNode","",3,"frequency","periodicWave","click",4,"ngFor","ngForOf"],["waOscillatorNode","",3,"frequency","periodicWave","click"],["waGainNode","",3,"gain"],["chain","AudioNode"],["type","range","min","0","max","1","step","0.01",3,"ngModel","ngModelChange"],["waStereoPannerNode","",3,"pan"],["type","range","min","-1","max","1","step","0.01",3,"ngModel","ngModelChange"],["waDelayNode","",3,"delayTime"],["waBiquadFilterNode","",3,"type","gain","frequency","Q","detune"],[3,"ngModel","ngModelChange"],["value","lowpass"],["value","highpass"],["value","bandpass"],["value","lowshelf"],["value","highshelf"],["value","peaking"],["value","notch"],["value","allpass"],["type","range","min","20","max","5000",3,"ngModel","ngModelChange"],["type","range","min","1","max","100",3,"ngModel","ngModelChange"],["type","range","min","0","max","100",3,"ngModel","ngModelChange"],["waWaveShaperNode","","oversample","4x",3,"curve"],["type","range","min","0","max","20","step","0.1",3,"ngModel","ngModelChange"],["waConvolverNode","","buffer","assets/response.m4a"]],template:function(n,i){if(1&n&&(e.YNc(0,ye,2,0,"button",0),e.YNc(1,qe,58,15,"ng-template",null,1,e.W1O)),2&n){const o=e.MAs(2);e.Q6J("ngIf",!i.started)("ngIfElse",o)}},directives:[T.O5,C._,C.Fj,C.JJ,C.On,T.RF,T.n9,te,T.sg,ie,ae,re,ce,se,ue,C.eT,le,de,pe,C.EJ,C.YN,C.Kr,ge,fe],pipes:[_e,me],encapsulation:2,changeDetection:0}),t})();function W(t){const r=44100,n=new Float32Array(r),i=Math.PI/180;for(let o=0;o<r;++o){const a=2*o/r-1;n[o]=(3+t)*a*20*i/(Math.PI+t*Math.abs(a))}return n}var Ne=l(5891);let ve=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({}),t})(),Oe=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[T.ez,C.u5,ve,Ne.Bz.forChild([{path:"",component:be}])]]}),t})()}}]);