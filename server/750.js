"use strict";var __defProp=Object.defineProperty,__name=(target,value)=>__defProp(target,"name",{value,configurable:!0});exports.id=750,exports.ids=[750],exports.modules={44385:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{j:()=>TuiInputColorComponent,S:()=>TuiInputColorModule});var tslib_es6=__webpack_require__(64762),core=__webpack_require__(74788),fesm2015_forms=__webpack_require__(24751),platform_browser=__webpack_require__(91211),taiga_ui_cdk_utils_math=__webpack_require__(85648),taiga_ui_cdk_utils_color=__webpack_require__(2330);function tuiGetElementPoint(x,y,element){const{left,top,width,height}=element.getBoundingClientRect();return[(0,taiga_ui_cdk_utils_math.Ki)(x-left,0,width)/width,(0,taiga_ui_cdk_utils_math.Ki)(y-top,0,height)/height]}function tuiGetGradientData(gradient){return gradient.slice(0,Math.max(0,gradient.length-1)).replace("linear-gradient(","")}function hasAttributes(markAttributes,attributes){const keys=Object.keys(attributes);return!keys.length||!!keys.filter(key=>attributes[key]===markAttributes[key]).length}function findMarkInSet(marks,markType,attributes={}){return marks.find(({attrs,type})=>type===markType&&hasAttributes(attrs,attributes))||null}function migration(element){for(const child of Array.from(element.children))if(child.children.length&&migration(child),"FONT"===child.tagName)if(child.hasAttribute("size"))switch(child.getAttribute("size")){case"6":migrateHeading("h1",child);break;case"5":migrateHeading("h2",child);break;case"4":migrateParagraph("17px",child);break;case"3":migrateParagraph("15px",child);break;case"2":migrateParagraph("13px",child)}else child.hasAttribute("color")&&migrateFontHighlight(child)}function migrateHeading(selector,element){var _a,_b,_c,_d,_e,_f,_g,_h,_j;const heading=document.createElement(selector);if(heading.innerHTML=element.innerHTML,"P"===(null===(_a=element.parentElement)||void 0===_a?void 0:_a.tagName)){const newRef=null===(_c=null===(_b=element.parentElement)||void 0===_b?void 0:_b.parentElement)||void 0===_c?void 0:_c.insertBefore(heading,element.parentElement);null===(_d=element.parentElement)||void 0===_d||_d.removeChild(element),(null==newRef?void 0:newRef.nextSibling)&&!(null===(_f=null===(_e=null==newRef?void 0:newRef.nextSibling)||void 0===_e?void 0:_e.textContent)||void 0===_f?void 0:_f.trim())&&(null===(_h=null===(_g=newRef.nextSibling)||void 0===_g?void 0:_g.parentElement)||void 0===_h||_h.removeChild(newRef.nextSibling))}else null===(_j=element.parentElement)||void 0===_j||_j.replaceChild(heading,element)}function migrateParagraph(fontSize,element){var _a;const p=document.createElement("p"),span=document.createElement("span");span.setAttribute("style",`font-size: ${fontSize}`),span.innerHTML=element.innerHTML,p.append(span),null===(_a=element.parentElement)||void 0===_a||_a.replaceChild("P"===element.parentElement.tagName?span:p,element)}function migrateFontHighlight(element){var _a;const span=document.createElement("span");span.setAttribute("style",`color: ${element.getAttribute("color")}`),span.innerHTML=element.innerHTML,null===(_a=element.parentElement)||void 0===_a||_a.replaceChild(span,element)}__name(function(state,dispatch,nodeName){const position=state.selection.$anchor;for(let depth=position.depth;depth>0;depth--)if(position.node(depth).type.name===nodeName)return dispatch&&dispatch(state.tr.delete(position.before(depth),position.after(depth)).scrollIntoView()),!0;return!1},"tuiDeleteNode"),__name(tuiGetElementPoint,"tuiGetElementPoint"),__name(tuiGetGradientData,"tuiGetGradientData"),__name(hasAttributes,"hasAttributes"),__name(findMarkInSet,"findMarkInSet"),__name(function(pos,type,attributes={}){if(!pos||!type)return null;const{node,offset}=pos.parent.childAfter(pos.parentOffset);if(!node)return null;const mark=findMarkInSet(node.marks,type,attributes);if(!mark)return null;let startIndex=pos.index(),startPos=pos.start()+offset,endIndex=startIndex+1,endPos=startPos+node.nodeSize;for(findMarkInSet(node.marks,type,attributes);startIndex>0&&mark.isInSet(pos.parent.child(startIndex-1).marks);)startIndex-=1,startPos-=pos.parent.child(startIndex).nodeSize;for(;endIndex<pos.parent.childCount&&findMarkInSet(pos.parent.child(endIndex).marks,type,attributes);)endPos+=pos.parent.child(endIndex).nodeSize,endIndex+=1;return{from:startPos,to:endPos}},"tuiGetMarkRange"),__name(function(node){const nodes=[];return node.content.forEach(child=>{child instanceof Node&&nodes.push([child.type.name,child.attrs])}),nodes},"tuiGetNestedNodes"),__name(function(state,current){const currentNodeContent=null!=current?current:state.selection.$head.parent.textContent,selected=state.doc.cut(state.selection.from,state.selection.to);return selected.content.size?getHTMLFromFragment(selected.content,state.schema):currentNodeContent},"tuiGetSelectedContent"),__name(function(doc,html){if(doc.queryCommandSupported("insertHTML"))return void doc.execCommand("insertHTML",!1,html);const selection=doc.getSelection();if(!selection)throw new TuiDocumentSelectionException;doc.execCommand("ms-beginUndoUnit");const range=selection.getRangeAt(0),documentFragment=range.createContextualFragment(html);range.deleteContents(),range.insertNode(documentFragment),doc.execCommand("ms-endUndoUnit")},"tuiInsertHtml"),__name(function(doc,text){if(doc.queryCommandSupported("insertText"))return void doc.execCommand("insertText",!1,text);const selection=doc.getSelection();if(!selection)throw new TuiDocumentSelectionException;doc.execCommand("ms-beginUndoUnit");const range=selection.getRangeAt(0);range.deleteContents(),range.insertNode(doc.createTextNode(text)),doc.execCommand("ms-endUndoUnit")},"tuiInsertText"),__name(function({anchorNode,focusNode},selector){return!!anchorNode&&!!focusNode&&tuiIsNodeIn(anchorNode,selector)&&tuiIsNodeIn(focusNode,selector)},"tuiIsSelectionIn"),__name(function(content){const tree=(new DOMParser).parseFromString(content,"text/html");return migration(tree.body),tree.body.innerHTML},"tuiLegacyEditorConverter"),__name(migration,"migration"),__name(migrateHeading,"migrateHeading"),__name(migrateParagraph,"migrateParagraph"),__name(migrateFontHighlight,"migrateFontHighlight");const REGEXP_ARRAY=["\\s*(","(?:","#(?:[a-f0-9]{6}|[a-f0-9]{3})","|","(?:rgb|hsl)","\\(\\s*(?:\\d{1,3}\\s*,\\s*){2}\\d{1,3}\\s*\\)","|","(?:rgba|hsla)","\\(\\s*(?:\\d{1,3}\\s*,\\s*){2}\\d{1,3}\\s*,\\s*\\d*\\.?\\d+\\)","|","[_a-z-][_a-z0-9-]*",")",")","(?:\\s+","(","(?:[+-]?\\d*\\.?\\d+)(?:%|[a-z]+)?","))?","(?:","\\s*,\\s*","\\s*)?"];function tuiParseGradient(input){const stopsRegexp=new RegExp(REGEXP_ARRAY.join(""),"gi"),stopsString=input.startsWith("to")||input.match(/^\d/)?input.slice(Math.max(0,input.indexOf(",")+1)).trim():input,side=input.startsWith("to")?input.split(",")[0]:"to bottom";let stops=[],matchColorStop=stopsRegexp.exec(stopsString);for(;null!==matchColorStop;)stops=stops.concat({color:matchColorStop[1],position:getPosition(matchColorStop[2],stops.length)}),matchColorStop=stopsRegexp.exec(stopsString);return stops=stops.filter(({color})=>color.startsWith("#")||color.startsWith("rgb")),{stops,side}}function getPosition(match,stops){const fallback=1===stops?"100%":`${stops}%`;return(null==match?void 0:match.includes("%"))?match:fallback}function tuiToGradient({stops,side}){return`linear-gradient(${side}, ${stops.map(({color,position})=>`rgba(${(0,taiga_ui_cdk_utils_color.Mp)(color).join(", ")}) ${position}`).join(", ")})`}__name(tuiParseGradient,"tuiParseGradient"),__name(getPosition,"getPosition"),__name(function(attrs){return attrs.reduce((result,attribute)=>(result[attribute]={parseHTML:element=>null==element?void 0:element.getAttribute(`${attribute}`)},result),{})},"tuiParseNodeAttributes"),__name(function(style){return style.split(";").reduce((ruleMap,ruleString)=>{var _a;const[left,right]=null!==(_a=ruleString.split(":"))&&void 0!==_a?_a:[];return left&&right&&(ruleMap[left.trim()]=right.trim()),ruleMap},{})},"tuiParseStyle"),__name(function(range){var _a;return range.endOffset-range.startOffset>0||0!==range.startOffset&&range.endOffset!==((null===(_a=range.endContainer.nodeValue)||void 0===_a?void 0:_a.length)||0)},"tuiIsSafeLinkRange"),__name(tuiToGradient,"tuiToGradient");var TuiEditorTool,TuiEditorTool2,taiga_ui_cdk_directives_active_zone=__webpack_require__(221),taiga_ui_cdk_abstract=__webpack_require__(76480),taiga_ui_cdk_decorators=__webpack_require__(44358),taiga_ui_core_components_hosted_dropdown=__webpack_require__(39505),taiga_ui_core_components_primitive_textfield=__webpack_require__(81620),taiga_ui_core_directives_textfield_controller=__webpack_require__(441),taiga_ui_core_directives_dropdown=__webpack_require__(98952),taiga_ui_cdk_services=__webpack_require__(30979),taiga_ui_cdk_utils_miscellaneous=__webpack_require__(11927),taiga_ui_kit_components_select=__webpack_require__(99485),taiga_ui_kit_components_input_count=__webpack_require__(91993),taiga_ui_kit_directives_value_accessor=__webpack_require__(75093),taiga_ui_kit_directives_mask=__webpack_require__(79514),taiga_ui_core_components_data_list=__webpack_require__(75111),taiga_ui_core_directives_hint=__webpack_require__(24638),taiga_ui_core_components_button=__webpack_require__(12628),taiga_ui_core_components_svg=__webpack_require__(54789),taiga_ui_core_components_group=__webpack_require__(95974),common=__webpack_require__(12057),taiga_ui_cdk_observables=__webpack_require__(2325),cjs=__webpack_require__(72921),operators=__webpack_require__(57192);class TuiPickerService extends cjs.Observable{constructor(destroy$,{nativeElement},doc){const point$=(0,taiga_ui_cdk_observables.mL)(nativeElement,"mousedown").pipe((0,taiga_ui_cdk_observables.mp)(),(0,operators.wt)(event=>{const mouseMove$=(0,taiga_ui_cdk_observables.mL)(doc,"mousemove").pipe((0,operators.UI)(({clientX,clientY})=>tuiGetElementPoint(clientX,clientY,nativeElement)),(0,operators.Rs)((0,taiga_ui_cdk_observables.mL)(doc,"mouseup")));return event.target===nativeElement?mouseMove$.pipe((0,operators.O4)(tuiGetElementPoint(event.clientX,event.clientY,nativeElement))):mouseMove$}),(0,operators.Rs)(destroy$));super(subscriber=>point$.subscribe(subscriber))}}__name(TuiPickerService,"TuiPickerService"),TuiPickerService.\u0275fac=__name(function(t){return new(t||TuiPickerService)(core.\u0275\u0275inject(taiga_ui_cdk_services.a3,2),core.\u0275\u0275inject(core.ElementRef),core.\u0275\u0275inject(common.K0))},"TuiPickerService_Factory"),TuiPickerService.\u0275prov=core.\u0275\u0275defineInjectable({token:TuiPickerService,factory:TuiPickerService.\u0275fac}),(TuiEditorTool2=TuiEditorTool||(TuiEditorTool={})).Undo="undo",TuiEditorTool2.Anchor="anchor",TuiEditorTool2.Size="fontSize",TuiEditorTool2.Bold="bold",TuiEditorTool2.Italic="italic",TuiEditorTool2.Underline="underline",TuiEditorTool2.Strikethrough="strikeThrough",TuiEditorTool2.Align="justify",TuiEditorTool2.List="list",TuiEditorTool2.Quote="quote",TuiEditorTool2.Color="foreColor",TuiEditorTool2.Hilite="hiliteColor",TuiEditorTool2.Clear="clear",TuiEditorTool2.Link="link",TuiEditorTool2.Attach="attach",TuiEditorTool2.Tex="tex",TuiEditorTool2.Code="code",TuiEditorTool2.Img="image",TuiEditorTool2.HR="insertHorizontalRule",TuiEditorTool2.Sup="superscript",TuiEditorTool2.Sub="subscript",TuiEditorTool2.Table="insertTable",TuiEditorTool2.MergeCells="mergeCells",TuiEditorTool2.SplitCells="splitCells",TuiEditorTool2.RowsColumnsManaging="rowsColumnsManaging",TuiEditorTool2.Details="details",TuiEditorTool2.Group="group";const defaultEditorColors=new Map([["transparent","transparent"],["color-black-300","#333333"],["color-black-200","#666666"],["color-black-100","#909090"],["color-yellow-100","#FFDD2C"],["color-yellow-200","#FCC521"],["color-yellow-300","#FAB618"],["color-gray-100","#f5f5f6"],["color-gray-200","#e7e8ea"],["color-gray-300","#cbcfd3"],["color-gray-400","#959ba4"],["color-gray-500","#79818c"],["color-gray-600","#616871"],["color-light-blue-100","#ecf1f7"],["color-light-blue-200","#e4ebf3"],["color-light-blue-300","#dde4ed"],["color-blue-100","#1771e6"],["color-blue-200","#1464cc"],["color-blue-300","#0953b3"],["color-green-100","#39b54a"],["color-green-200","#2ca53a"],["color-green-300","#168a21"],["color-red-100","#e01f19"],["color-red-200","#d3120e"],["color-red-300","#c40b08"]]);TuiEditorTool.Undo,TuiEditorTool.Size,TuiEditorTool.Bold,TuiEditorTool.Italic,TuiEditorTool.Underline,TuiEditorTool.Align,TuiEditorTool.List,TuiEditorTool.Quote,TuiEditorTool.Link,TuiEditorTool.Anchor,TuiEditorTool.Color,TuiEditorTool.Hilite,TuiEditorTool.Clear,TuiEditorTool.Strikethrough,TuiEditorTool.Code,TuiEditorTool.Img,TuiEditorTool.HR,TuiEditorTool.Sup,TuiEditorTool.Sub,TuiEditorTool.Table,TuiEditorTool.Details;function tuiDefaultFontOptionsHandler(texts){return[{px:13,name:texts.small},{px:15,name:texts.normal},{px:17,name:texts.large},{px:24,family:"var(--tui-font-heading)",name:texts.subtitle,headingLevel:2,weight:"bold"},{px:30,family:"var(--tui-font-heading)",name:texts.title,headingLevel:1,weight:"bold"}]}__name(tuiDefaultFontOptionsHandler,"tuiDefaultFontOptionsHandler");const TUI_DEFAULT_LINK_OPTIONS={protocol:"https://"};var taiga_ui_i18n_tools=__webpack_require__(50932);new core.InjectionToken("[TUI_EDITOR_EXTENSIONS]"),new core.InjectionToken("[LAZY_EDITOR_EXTENSIONS]");const TUI_EDITOR_DEFAULT_OPTIONS={colors:defaultEditorColors,blankColor:"rgb(51, 51, 51)",linkOptions:TUI_DEFAULT_LINK_OPTIONS,fontOptions:tuiDefaultFontOptionsHandler},TUI_EDITOR_OPTIONS=new core.InjectionToken("[TUI_EDITOR_OPTIONS]",{factory:()=>TUI_EDITOR_DEFAULT_OPTIONS});__name(function(options){return{provide:TUI_EDITOR_OPTIONS,useValue:Object.assign(Object.assign({},TUI_EDITOR_DEFAULT_OPTIONS),options)}},"tuiEditorOptionsProvider");new core.InjectionToken("[TUI_EDITOR_CONTENT_PROCESSOR]",{factory:()=>cjs.identity}),new core.InjectionToken("[TUI_EDITOR_VALUE_TRANSFORMER]"),new core.InjectionToken("[TUI_ATTACH_FILES_OPTIONS]",{factory:()=>({accept:"*/*",multiple:!0})}),new core.InjectionToken("[TUI_ATTACH_FILES_LOADER]");const TUI_EDITOR_COLOR_SELECTOR_MODE_NAMES=new core.InjectionToken("[TUI_EDITOR_COLOR_SELECTOR_MODE_NAMES]",{factory:()=>["Solid color","Gradient"]});new core.InjectionToken("[TUI_EDITOR_TOOLBAR_TEXTS]",{factory:(0,taiga_ui_i18n_tools.v)("toolbarTools")}),new core.InjectionToken("[TUI_EDITOR_TABLE_COMMANDS]",{factory:(0,taiga_ui_i18n_tools.v)("editorTableCommands")}),new core.InjectionToken("[TUI_EDITOR_LINK_TEXTS]",{factory:(0,taiga_ui_i18n_tools.v)("editorEditLink")}),new core.InjectionToken("[TUI_EDITOR_CODE_OPTIONS]",{factory:(0,taiga_ui_i18n_tools.v)("editorCodeOptions")}),new core.InjectionToken("[TUI_EDITOR_FONT_OPTIONS]",{factory:(0,taiga_ui_i18n_tools.v)("editorFontOptions")}),new core.InjectionToken("[TUI_IMAGE_LOADER]",{factory:()=>file=>{const fileReader=new FileReader;return fileReader.readAsDataURL(file),(0,taiga_ui_cdk_observables.mL)(fileReader,"load").pipe((0,operators.UI)(()=>String(fileReader.result)))}}),new core.InjectionToken("[TIPTAP_EDITOR]"),new core.InjectionToken("[LAZY_TIPTAP_EDITOR]",{factory:()=>{const editor$=new cjs.ReplaySubject(1);return __webpack_require__.e(266).then(__webpack_require__.bind(__webpack_require__,21266)).then(m=>editor$.next(m.Editor)),editor$}}),new core.InjectionToken("[INITIALIZATION_TIPTAP_CONTAINER]");function TuiColorEditComponent_tui_data_list_1_button_1_Template(rf,ctx){if(1&rf&&(core.\u0275\u0275elementStart(0,"button",7),core.\u0275\u0275text(1),core.\u0275\u0275elementEnd()),2&rf){const item_r5=ctx.$implicit;core.\u0275\u0275property("value",item_r5),core.\u0275\u0275advance(1),core.\u0275\u0275textInterpolate1(" ",item_r5," ")}}function TuiColorEditComponent_tui_data_list_1_Template(rf,ctx){if(1&rf&&(core.\u0275\u0275elementStart(0,"tui-data-list",5),core.\u0275\u0275template(1,TuiColorEditComponent_tui_data_list_1_button_1_Template,2,2,"button",6),core.\u0275\u0275elementEnd()),2&rf){const ctx_r0=core.\u0275\u0275nextContext();core.\u0275\u0275advance(1),core.\u0275\u0275property("ngForOf",ctx_r0.modes)}}function TuiColorEditComponent_tui_primitive_textfield_2_Template(rf,ctx){if(1&rf){const _r7=core.\u0275\u0275getCurrentView();core.\u0275\u0275elementStart(0,"tui-primitive-textfield",8),core.\u0275\u0275listener("valueChange",__name(function($event){return core.\u0275\u0275restoreView(_r7),core.\u0275\u0275nextContext().onHexChange($event)},"TuiColorEditComponent_tui_primitive_textfield_2_Template_tui_primitive_textfield_valueChange_0_listener")),core.\u0275\u0275element(1,"input",9),core.\u0275\u0275elementEnd()}if(2&rf){const ctx_r1=core.\u0275\u0275nextContext();core.\u0275\u0275property("textMask",ctx_r1.hexMask)("tuiTextfieldLabelOutside",!0)("value",ctx_r1.hex)}}function TuiColorEditComponent_ng_template_3_Template(rf,ctx){if(1&rf){const _r9=core.\u0275\u0275getCurrentView();core.\u0275\u0275elementStart(0,"tui-input-count",10),core.\u0275\u0275listener("ngModelChange",__name(function($event){core.\u0275\u0275restoreView(_r9);const ctx_r8=core.\u0275\u0275nextContext();return ctx_r8.onRgbChange($event,ctx_r8.color[1],ctx_r8.color[2],ctx_r8.color[3])},"TuiColorEditComponent_ng_template_3_Template_tui_input_count_ngModelChange_0_listener")),core.\u0275\u0275elementEnd(),core.\u0275\u0275elementStart(1,"tui-input-count",10),core.\u0275\u0275listener("ngModelChange",__name(function($event){core.\u0275\u0275restoreView(_r9);const ctx_r10=core.\u0275\u0275nextContext();return ctx_r10.onRgbChange(ctx_r10.color[0],$event,ctx_r10.color[2],ctx_r10.color[3])},"TuiColorEditComponent_ng_template_3_Template_tui_input_count_ngModelChange_1_listener")),core.\u0275\u0275elementEnd(),core.\u0275\u0275elementStart(2,"tui-input-count",10),core.\u0275\u0275listener("ngModelChange",__name(function($event){core.\u0275\u0275restoreView(_r9);const ctx_r11=core.\u0275\u0275nextContext();return ctx_r11.onRgbChange(ctx_r11.color[0],ctx_r11.color[1],$event,ctx_r11.color[3])},"TuiColorEditComponent_ng_template_3_Template_tui_input_count_ngModelChange_2_listener")),core.\u0275\u0275elementEnd()}if(2&rf){const ctx_r3=core.\u0275\u0275nextContext();core.\u0275\u0275property("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",255)("ngModel",ctx_r3.color[0]),core.\u0275\u0275advance(1),core.\u0275\u0275property("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",255)("ngModel",ctx_r3.color[1]),core.\u0275\u0275advance(1),core.\u0275\u0275property("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",255)("ngModel",ctx_r3.color[2])}}function TuiLinearMultiPickerComponent_div_0_Template(rf,ctx){if(1&rf){const _r4=core.\u0275\u0275getCurrentView();core.\u0275\u0275elementStart(0,"div",1),core.\u0275\u0275listener("mousedown",__name(function(){const index_r2=core.\u0275\u0275restoreView(_r4).index;return core.\u0275\u0275nextContext().onMouseDown(index_r2)},"TuiLinearMultiPickerComponent_div_0_Template_div_mousedown_0_listener"))("dblclick",__name(function(){const index_r2=core.\u0275\u0275restoreView(_r4).index;return core.\u0275\u0275nextContext().onClick(index_r2)},"TuiLinearMultiPickerComponent_div_0_Template_div_dblclick_0_listener")),core.\u0275\u0275elementEnd()}if(2&rf){const item_r1=ctx.$implicit;core.\u0275\u0275styleProp("left",100*item_r1,"%")}}__name(TuiColorEditComponent_tui_data_list_1_button_1_Template,"TuiColorEditComponent_tui_data_list_1_button_1_Template"),__name(TuiColorEditComponent_tui_data_list_1_Template,"TuiColorEditComponent_tui_data_list_1_Template"),__name(TuiColorEditComponent_tui_primitive_textfield_2_Template,"TuiColorEditComponent_tui_primitive_textfield_2_Template"),__name(TuiColorEditComponent_ng_template_3_Template,"TuiColorEditComponent_ng_template_3_Template"),__name(TuiLinearMultiPickerComponent_div_0_Template,"TuiLinearMultiPickerComponent_div_0_Template");function TuiPaletteComponent_button_0_Template(rf,ctx){if(1&rf){const _r3=core.\u0275\u0275getCurrentView();core.\u0275\u0275elementStart(0,"button",1),core.\u0275\u0275listener("click",__name(function(){const color_r1=core.\u0275\u0275restoreView(_r3).$implicit;return core.\u0275\u0275nextContext().selectedColor.emit(color_r1.value)},"TuiPaletteComponent_button_0_Template_button_click_0_listener")),core.\u0275\u0275elementEnd()}if(2&rf){const color_r1=ctx.$implicit;core.\u0275\u0275styleProp("background",color_r1.value),core.\u0275\u0275property("tuiHint",color_r1.key)("tuiHintDescribe",color_r1.key)("id",color_r1.key)}}function TuiColorSelectorComponent_ng_template_4_Template(rf,ctx){if(1&rf&&core.\u0275\u0275element(0,"tui-svg",9),2&rf){core.\u0275\u0275nextContext();const _r0=core.\u0275\u0275reference(1);core.\u0275\u0275classProp("t-arrow_rotated",_r0.open)}}function TuiColorSelectorComponent_ng_template_6_button_1_tui_svg_2_Template(rf,ctx){1&rf&&core.\u0275\u0275element(0,"tui-svg",14)}function TuiColorSelectorComponent_ng_template_6_button_1_Template(rf,ctx){if(1&rf){const _r12=core.\u0275\u0275getCurrentView();core.\u0275\u0275elementStart(0,"button",12),core.\u0275\u0275listener("keydown.enter.prevent",__name(function(){const mode_r9=core.\u0275\u0275restoreView(_r12).$implicit,ctx_r11=core.\u0275\u0275nextContext(2),_r0=core.\u0275\u0275reference(1);return ctx_r11.onModeSelect(mode_r9,_r0)},"TuiColorSelectorComponent_ng_template_6_button_1_Template_button_keydown_enter_prevent_0_listener"))("keydown.space.prevent",__name(function(){const mode_r9=core.\u0275\u0275restoreView(_r12).$implicit,ctx_r13=core.\u0275\u0275nextContext(2),_r0=core.\u0275\u0275reference(1);return ctx_r13.onModeSelect(mode_r9,_r0)},"TuiColorSelectorComponent_ng_template_6_button_1_Template_button_keydown_space_prevent_0_listener"))("click",__name(function(){const mode_r9=core.\u0275\u0275restoreView(_r12).$implicit,ctx_r14=core.\u0275\u0275nextContext(2),_r0=core.\u0275\u0275reference(1);return ctx_r14.onModeSelect(mode_r9,_r0)},"TuiColorSelectorComponent_ng_template_6_button_1_Template_button_click_0_listener")),core.\u0275\u0275text(1),core.\u0275\u0275template(2,TuiColorSelectorComponent_ng_template_6_button_1_tui_svg_2_Template,1,0,"tui-svg",13),core.\u0275\u0275elementEnd()}if(2&rf){const mode_r9=ctx.$implicit,ctx_r8=core.\u0275\u0275nextContext(2);core.\u0275\u0275attribute("aria-checked",ctx_r8.isModeActive(mode_r9)),core.\u0275\u0275advance(1),core.\u0275\u0275textInterpolate1(" ",mode_r9," "),core.\u0275\u0275advance(1),core.\u0275\u0275property("ngIf",ctx_r8.isModeActive(mode_r9))}}function TuiColorSelectorComponent_ng_template_6_Template(rf,ctx){if(1&rf&&(core.\u0275\u0275elementStart(0,"tui-data-list",10),core.\u0275\u0275template(1,TuiColorSelectorComponent_ng_template_6_button_1_Template,3,3,"button",11),core.\u0275\u0275elementEnd()),2&rf){const ctx_r4=core.\u0275\u0275nextContext();core.\u0275\u0275advance(1),core.\u0275\u0275property("ngForOf",ctx_r4.modes)}}function TuiColorSelectorComponent_ng_container_8_button_5_Template(rf,ctx){if(1&rf){const _r18=core.\u0275\u0275getCurrentView();core.\u0275\u0275elementStart(0,"button",20),core.\u0275\u0275listener("click",__name(function(){const button_r16=core.\u0275\u0275restoreView(_r18).$implicit;return core.\u0275\u0275nextContext(2).onDirectionChange(button_r16)},"TuiColorSelectorComponent_ng_container_8_button_5_Template_button_click_0_listener")),core.\u0275\u0275elementEnd()}if(2&rf){const button_r16=ctx.$implicit,ctx_r15=core.\u0275\u0275nextContext(2);core.\u0275\u0275classProp("t-direction_active",ctx_r15.isDirectionActive(button_r16)),core.\u0275\u0275property("icon",ctx_r15.getIcon(button_r16))("tuiHint",button_r16)}}function TuiColorSelectorComponent_ng_container_8_Template(rf,ctx){if(1&rf){const _r20=core.\u0275\u0275getCurrentView();core.\u0275\u0275elementContainerStart(0),core.\u0275\u0275element(1,"hr",15),core.\u0275\u0275elementStart(2,"div",16),core.\u0275\u0275elementStart(3,"tui-linear-multi-picker",17),core.\u0275\u0275listener("valueChange",__name(function($event){return core.\u0275\u0275restoreView(_r20),core.\u0275\u0275nextContext().onStopsChange($event)},"TuiColorSelectorComponent_ng_container_8_Template_tui_linear_multi_picker_valueChange_3_listener"))("indexChange",__name(function($event){return core.\u0275\u0275restoreView(_r20),core.\u0275\u0275nextContext().onIndexChange($event)},"TuiColorSelectorComponent_ng_container_8_Template_tui_linear_multi_picker_indexChange_3_listener")),core.\u0275\u0275elementEnd(),core.\u0275\u0275elementEnd(),core.\u0275\u0275elementStart(4,"div",18),core.\u0275\u0275template(5,TuiColorSelectorComponent_ng_container_8_button_5_Template,1,4,"button",19),core.\u0275\u0275elementEnd(),core.\u0275\u0275elementContainerEnd()}if(2&rf){const ctx_r5=core.\u0275\u0275nextContext();core.\u0275\u0275advance(2),core.\u0275\u0275styleProp("background",ctx_r5.gradient),core.\u0275\u0275advance(1),core.\u0275\u0275property("value",ctx_r5.stopsKeys),core.\u0275\u0275advance(2),core.\u0275\u0275property("ngForOf",ctx_r5.buttons)}}function TuiColorSelectorComponent_tui_color_edit_10_Template(rf,ctx){if(1&rf){const _r23=core.\u0275\u0275getCurrentView();core.\u0275\u0275elementStart(0,"tui-color-edit",21),core.\u0275\u0275listener("colorChange",__name(function($event){return core.\u0275\u0275restoreView(_r23),core.\u0275\u0275nextContext().onColorChange($event)},"TuiColorSelectorComponent_tui_color_edit_10_Template_tui_color_edit_colorChange_0_listener")),core.\u0275\u0275elementEnd()}if(2&rf){const ctx_r6=core.\u0275\u0275nextContext();core.\u0275\u0275property("color",ctx_r6.color)}}function TuiColorSelectorComponent_tui_palette_11_Template(rf,ctx){if(1&rf){const _r25=core.\u0275\u0275getCurrentView();core.\u0275\u0275elementStart(0,"tui-palette",22),core.\u0275\u0275listener("selectedColor",__name(function($event){return core.\u0275\u0275restoreView(_r25),core.\u0275\u0275nextContext().onPalettePick($event)},"TuiColorSelectorComponent_tui_palette_11_Template_tui_palette_selectedColor_0_listener")),core.\u0275\u0275elementEnd()}if(2&rf){const ctx_r7=core.\u0275\u0275nextContext();core.\u0275\u0275property("colors",ctx_r7.palette)}}__name(TuiPaletteComponent_button_0_Template,"TuiPaletteComponent_button_0_Template"),__name(TuiColorSelectorComponent_ng_template_4_Template,"TuiColorSelectorComponent_ng_template_4_Template"),__name(TuiColorSelectorComponent_ng_template_6_button_1_tui_svg_2_Template,"TuiColorSelectorComponent_ng_template_6_button_1_tui_svg_2_Template"),__name(TuiColorSelectorComponent_ng_template_6_button_1_Template,"TuiColorSelectorComponent_ng_template_6_button_1_Template"),__name(TuiColorSelectorComponent_ng_template_6_Template,"TuiColorSelectorComponent_ng_template_6_Template"),__name(TuiColorSelectorComponent_ng_container_8_button_5_Template,"TuiColorSelectorComponent_ng_container_8_button_5_Template"),__name(TuiColorSelectorComponent_ng_container_8_Template,"TuiColorSelectorComponent_ng_container_8_Template"),__name(TuiColorSelectorComponent_tui_color_edit_10_Template,"TuiColorSelectorComponent_tui_color_edit_10_Template"),__name(TuiColorSelectorComponent_tui_palette_11_Template,"TuiColorSelectorComponent_tui_palette_11_Template");class TuiColorEditComponent{constructor(){this.color=[0,0,0,1],this.colorChange=new core.EventEmitter,this.hexMask={mask:({length})=>Array.from({length},()=>/\d|[a-f]|[A-F]/),guide:!1},this.modes=["HEX","RGB"],this.mode=this.modes[0]}get isHex(){return this.mode===this.modes[0]}get hex(){return(0,taiga_ui_cdk_utils_color.WS)(this.color[0],this.color[1],this.color[2]).replace("#","")}get opacity(){return Math.round(100*this.color[3])}onHexChange(hex){if(6!==hex.length)return;const rgb=(0,taiga_ui_cdk_utils_color.RO)(hex);this.updateColor([rgb[0],rgb[1],rgb[2],this.color[3]])}onRgbChange(...rgba){this.updateColor(rgba)}updateColor(color){this.color=color,this.colorChange.emit(color)}}__name(TuiColorEditComponent,"TuiColorEditComponent"),TuiColorEditComponent.\u0275fac=__name(function(t){return new(t||TuiColorEditComponent)},"TuiColorEditComponent_Factory"),TuiColorEditComponent.\u0275cmp=core.\u0275\u0275defineComponent({type:TuiColorEditComponent,selectors:[["tui-color-edit"]],inputs:{color:"color"},outputs:{colorChange:"colorChange"},decls:6,vars:8,consts:[["tuiTextfieldSize","m","tuiDropdownAlign","left","tuiDropdownLimitWidth","min",1,"t-select","tui-group__auto-width-item",3,"tuiTextfieldLabelOutside","ngModel","ngModelChange"],["size","s",4,"tuiDataList"],["tuiValueAccessor","","tuiTextfieldSize","m",3,"textMask","tuiTextfieldLabelOutside","value","valueChange",4,"ngIf","ngIfElse"],["rgb",""],["tuiTextfieldPostfix","%","tuiTextfieldSize","m",1,"t-opacity","tui-group__auto-width-item",3,"tuiTextfieldLabelOutside","hideButtons","max","ngModel","ngModelChange"],["size","s"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"],["tuiValueAccessor","","tuiTextfieldSize","m",3,"textMask","tuiTextfieldLabelOutside","value","valueChange"],["tuiTextfield","","maxlength","6"],["tuiTextfieldSize","m",3,"tuiTextfieldLabelOutside","hideButtons","max","ngModel","ngModelChange"]],template:__name(function(rf,ctx){if(1&rf&&(core.\u0275\u0275elementStart(0,"tui-select",0),core.\u0275\u0275listener("ngModelChange",__name(function($event){return ctx.mode=$event},"TuiColorEditComponent_Template_tui_select_ngModelChange_0_listener")),core.\u0275\u0275template(1,TuiColorEditComponent_tui_data_list_1_Template,2,1,"tui-data-list",1),core.\u0275\u0275elementEnd(),core.\u0275\u0275template(2,TuiColorEditComponent_tui_primitive_textfield_2_Template,2,3,"tui-primitive-textfield",2),core.\u0275\u0275template(3,TuiColorEditComponent_ng_template_3_Template,3,12,"ng-template",null,3,core.\u0275\u0275templateRefExtractor),core.\u0275\u0275elementStart(5,"tui-input-count",4),core.\u0275\u0275listener("ngModelChange",__name(function($event){return ctx.onRgbChange(ctx.color[0],ctx.color[1],ctx.color[2],$event/100)},"TuiColorEditComponent_Template_tui_input_count_ngModelChange_5_listener")),core.\u0275\u0275elementEnd()),2&rf){const _r2=core.\u0275\u0275reference(4);core.\u0275\u0275property("tuiTextfieldLabelOutside",!0)("ngModel",ctx.mode),core.\u0275\u0275advance(2),core.\u0275\u0275property("ngIf",ctx.isHex)("ngIfElse",_r2),core.\u0275\u0275advance(3),core.\u0275\u0275property("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",100)("ngModel",ctx.opacity)}},"TuiColorEditComponent_Template"),directives:[taiga_ui_kit_components_select.uJ,taiga_ui_kit_components_select.OI,taiga_ui_core_directives_textfield_controller.sz,taiga_ui_core_directives_dropdown.Ek,taiga_ui_core_directives_textfield_controller.xT,fesm2015_forms.JJ,fesm2015_forms.On,taiga_ui_core_components_data_list.gX,common.O5,taiga_ui_kit_components_input_count.EA,taiga_ui_kit_components_input_count.aQ,taiga_ui_core_directives_textfield_controller.Tq,taiga_ui_core_components_data_list.qi,common.sg,taiga_ui_core_components_data_list.vK,taiga_ui_core_components_primitive_textfield.yc,taiga_ui_core_components_primitive_textfield.B1,taiga_ui_kit_directives_value_accessor.n,taiga_ui_kit_directives_mask.h,taiga_ui_core_components_primitive_textfield.MB],styles:["[_nghost-%COMP%]{display:flex}.t-select[_ngcontent-%COMP%]{width:4.875rem}.t-opacity[_ngcontent-%COMP%]{width:4.275rem}"],changeDetection:0}),(0,tslib_es6.gn)([(0,taiga_ui_cdk_decorators.TH)()],TuiColorEditComponent.prototype,"color",void 0);class TuiColorEditModule{}__name(TuiColorEditModule,"TuiColorEditModule"),TuiColorEditModule.\u0275fac=__name(function(t){return new(t||TuiColorEditModule)},"TuiColorEditModule_Factory"),TuiColorEditModule.\u0275mod=core.\u0275\u0275defineNgModule({type:TuiColorEditModule}),TuiColorEditModule.\u0275inj=core.\u0275\u0275defineInjector({imports:[[common.ez,fesm2015_forms.u5,taiga_ui_kit_directives_mask.Q,taiga_ui_kit_directives_value_accessor.S,taiga_ui_kit_components_select.Jy,taiga_ui_core_components_primitive_textfield.KW,taiga_ui_core_directives_textfield_controller.cn,taiga_ui_core_directives_dropdown.dp,taiga_ui_kit_components_input_count.$H,taiga_ui_core_components_data_list.pc]]});class TuiFlatPickerComponent{constructor(point$){this.value=[0,0],this.valueChange=new core.EventEmitter,point$.subscribe(point=>{this.value=point,this.valueChange.emit([point[0],point[1]])})}get left(){return 100*this.value[0]}get top(){return 100*this.value[1]}}__name(TuiFlatPickerComponent,"TuiFlatPickerComponent"),TuiFlatPickerComponent.\u0275fac=__name(function(t){return new(t||TuiFlatPickerComponent)(core.\u0275\u0275directiveInject(TuiPickerService))},"TuiFlatPickerComponent_Factory"),TuiFlatPickerComponent.\u0275cmp=core.\u0275\u0275defineComponent({type:TuiFlatPickerComponent,selectors:[["tui-flat-picker"]],inputs:{value:"value"},outputs:{valueChange:"valueChange"},features:[core.\u0275\u0275ProvidersFeature([taiga_ui_cdk_services.a3,TuiPickerService])],decls:1,vars:4,consts:[[1,"t-circle"]],template:__name(function(rf,ctx){1&rf&&core.\u0275\u0275element(0,"div",0),2&rf&&core.\u0275\u0275styleProp("left",ctx.left,"%")("top",ctx.top,"%")},"TuiFlatPickerComponent_Template"),styles:["[_nghost-%COMP%]{position:relative;display:block}.t-circle[_ngcontent-%COMP%]{position:absolute;width:1rem;height:1rem;border-radius:100%;margin:-.5rem 0 0 -.5rem;box-shadow:inset 0 0 0 1px var(--tui-base-01),0 0 0 1px var(--tui-base-03)}"],changeDetection:0}),(0,tslib_es6.gn)([(0,taiga_ui_cdk_decorators.TH)()],TuiFlatPickerComponent.prototype,"value",void 0);class TuiLinearPickerComponent{constructor(point$){this.value=0,this.valueChange=new core.EventEmitter,point$.subscribe(([x])=>{this.value=x,this.valueChange.emit(x)})}get left(){return 100*this.value}}__name(TuiLinearPickerComponent,"TuiLinearPickerComponent"),TuiLinearPickerComponent.\u0275fac=__name(function(t){return new(t||TuiLinearPickerComponent)(core.\u0275\u0275directiveInject(TuiPickerService))},"TuiLinearPickerComponent_Factory"),TuiLinearPickerComponent.\u0275cmp=core.\u0275\u0275defineComponent({type:TuiLinearPickerComponent,selectors:[["tui-linear-picker"]],inputs:{value:"value"},outputs:{valueChange:"valueChange"},features:[core.\u0275\u0275ProvidersFeature([taiga_ui_cdk_services.a3,TuiPickerService])],decls:1,vars:2,consts:[[1,"t-circle"]],template:__name(function(rf,ctx){1&rf&&core.\u0275\u0275element(0,"div",0),2&rf&&core.\u0275\u0275styleProp("left",ctx.left,"%")},"TuiLinearPickerComponent_Template"),styles:["[_nghost-%COMP%]{position:relative;display:block;height:1rem;box-sizing:border-box}.t-circle[_ngcontent-%COMP%]{position:absolute;width:1rem;height:1rem;border-radius:100%;margin:0 -.5rem;box-shadow:inset 0 0 0 2px var(--tui-base-01),0 0 0 1px var(--tui-base-03)}"],changeDetection:0}),(0,tslib_es6.gn)([(0,taiga_ui_cdk_decorators.TH)()],TuiLinearPickerComponent.prototype,"value",void 0);class TuiColorPickerComponent{constructor(sanitizer){this.sanitizer=sanitizer,this.colorChange=new core.EventEmitter,this.point=[0,1],this.hue=0,this.opacity=1}set color(color){if(this.currentColor.every((item,index)=>item===color[index])&&color[3]===this.opacity)return;const[h,s,v]=(0,taiga_ui_cdk_utils_color.bD)(color[0],color[1],color[2]);this.opacity=color[3],this.hue=h/360,this.point=[s,1-v/255]}get currentColor(){return this.getCurrentColor(this.hue,this.point)}get base(){return`rgb(${(0,taiga_ui_cdk_utils_color.qZ)(360*this.hue,1,255)})`}get gradient(){return this.sanitizer.bypassSecurityTrustStyle(`linear-gradient(to right, rgba(${this.currentColor.join(",")}, 0), rgb(${this.currentColor.join(",")}))`)}onPointChange(point){this.point=point,this.updateColor()}onHueChange(hue){this.hue=hue,this.updateColor()}onOpacityChange(opacity){this.opacity=(0,taiga_ui_cdk_utils_math.FG)(opacity,2),this.updateColor()}getCurrentColor(hue,point){return(0,taiga_ui_cdk_utils_color.qZ)(360*hue,point[0],255*(1-point[1]))}updateColor(){this.colorChange.emit([...this.currentColor,this.opacity])}}__name(TuiColorPickerComponent,"TuiColorPickerComponent"),TuiColorPickerComponent.\u0275fac=__name(function(t){return new(t||TuiColorPickerComponent)(core.\u0275\u0275directiveInject(platform_browser.H7))},"TuiColorPickerComponent_Factory"),TuiColorPickerComponent.\u0275cmp=core.\u0275\u0275defineComponent({type:TuiColorPickerComponent,selectors:[["tui-color-picker"]],inputs:{color:"color"},outputs:{colorChange:"colorChange"},decls:5,vars:7,consts:[[1,"t-flat",3,"value","valueChange"],[1,"t-wrapper","t-wrapper_hue"],[1,"t-hue",3,"value","valueChange"],[1,"t-wrapper","t-wrapper_opacity"],[1,"t-opacity",3,"value","valueChange"]],template:__name(function(rf,ctx){1&rf&&(core.\u0275\u0275elementStart(0,"tui-flat-picker",0),core.\u0275\u0275listener("valueChange",__name(function($event){return ctx.onPointChange($event)},"TuiColorPickerComponent_Template_tui_flat_picker_valueChange_0_listener")),core.\u0275\u0275elementEnd(),core.\u0275\u0275elementStart(1,"div",1),core.\u0275\u0275elementStart(2,"tui-linear-picker",2),core.\u0275\u0275listener("valueChange",__name(function($event){return ctx.onHueChange($event)},"TuiColorPickerComponent_Template_tui_linear_picker_valueChange_2_listener")),core.\u0275\u0275elementEnd(),core.\u0275\u0275elementEnd(),core.\u0275\u0275elementStart(3,"div",3),core.\u0275\u0275elementStart(4,"tui-linear-picker",4),core.\u0275\u0275listener("valueChange",__name(function($event){return ctx.onOpacityChange($event)},"TuiColorPickerComponent_Template_tui_linear_picker_valueChange_4_listener")),core.\u0275\u0275elementEnd(),core.\u0275\u0275elementEnd()),2&rf&&(core.\u0275\u0275styleProp("background-color",ctx.base),core.\u0275\u0275property("value",ctx.point),core.\u0275\u0275advance(2),core.\u0275\u0275property("value",ctx.hue),core.\u0275\u0275advance(1),core.\u0275\u0275styleProp("background",ctx.gradient),core.\u0275\u0275advance(1),core.\u0275\u0275property("value",ctx.opacity))},"TuiColorPickerComponent_Template"),directives:[TuiFlatPickerComponent,TuiLinearPickerComponent],styles:['[_nghost-%COMP%]{position:relative;z-index:0;display:block}.t-flat[_ngcontent-%COMP%]{height:14rem;background:linear-gradient(rgba(0,0,0,0),#000000),linear-gradient(to right,#ffffff,rgba(255,255,255,0));margin-bottom:.25rem;overflow:hidden}.t-wrapper[_ngcontent-%COMP%]{position:relative;margin:1rem 1.25rem;border-radius:.5rem}.t-wrapper[_ngcontent-%COMP%]:after{position:absolute;top:0;left:0;width:100%;height:100%;content:"";box-shadow:inset 0 0 0 1px #00000014;pointer-events:none;border-radius:inherit}.t-wrapper_hue[_ngcontent-%COMP%]{background:#ff0000}.t-wrapper_opacity[_ngcontent-%COMP%]:before{position:absolute;top:0;left:0;width:100%;height:100%;content:"";z-index:-1;background-image:linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03)),linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03));background-size:.375rem .375rem;background-position:0 0,.1875rem .1875rem;border-radius:inherit}.t-hue[_ngcontent-%COMP%]{background:linear-gradient(to right,#ff0000,#ffff00,#00ff00,#00ffff,#0000ff,#ff00ff,#ff0000);border-radius:inherit;margin:0 .5rem}.t-opacity[_ngcontent-%COMP%]{border-radius:inherit;margin:0 .5rem}'],changeDetection:0}),(0,tslib_es6.gn)([(0,taiga_ui_cdk_decorators.TH)()],TuiColorPickerComponent.prototype,"color",null),(0,tslib_es6.gn)([taiga_ui_cdk_decorators.UM],TuiColorPickerComponent.prototype,"getCurrentColor",null);class TuiFlatPickerModule{}__name(TuiFlatPickerModule,"TuiFlatPickerModule"),TuiFlatPickerModule.\u0275fac=__name(function(t){return new(t||TuiFlatPickerModule)},"TuiFlatPickerModule_Factory"),TuiFlatPickerModule.\u0275mod=core.\u0275\u0275defineNgModule({type:TuiFlatPickerModule}),TuiFlatPickerModule.\u0275inj=core.\u0275\u0275defineInjector({imports:[[common.ez]]});class TuiLinearPickerModule{}__name(TuiLinearPickerModule,"TuiLinearPickerModule"),TuiLinearPickerModule.\u0275fac=__name(function(t){return new(t||TuiLinearPickerModule)},"TuiLinearPickerModule_Factory"),TuiLinearPickerModule.\u0275mod=core.\u0275\u0275defineNgModule({type:TuiLinearPickerModule}),TuiLinearPickerModule.\u0275inj=core.\u0275\u0275defineInjector({imports:[[common.ez]]});class TuiColorPickerModule{}__name(TuiColorPickerModule,"TuiColorPickerModule"),TuiColorPickerModule.\u0275fac=__name(function(t){return new(t||TuiColorPickerModule)},"TuiColorPickerModule_Factory"),TuiColorPickerModule.\u0275mod=core.\u0275\u0275defineNgModule({type:TuiColorPickerModule}),TuiColorPickerModule.\u0275inj=core.\u0275\u0275defineInjector({imports:[[common.ez,TuiFlatPickerModule,TuiLinearPickerModule]]});class TuiLinearMultiPickerComponent{constructor(point$){this.value=[0,1],this.valueChange=new core.EventEmitter,this.indexChange=new core.EventEmitter,this.index=NaN,point$.subscribe(([x])=>{this.onPicker(x)})}onMouseUp(){this.index=NaN}onMouseDown(index){this.updateIndex(index)}onClick(index){this.value.length>2&&this.updateValue(this.value.filter((_,i)=>i!==index))}onPicker(x){Number.isNaN(this.index)&&(this.updateIndex(this.value.length),this.value=[...this.value,0]),!this.value.some((item,index)=>item===x&&index!==this.index)&&this.updateValue(this.value.map((item,index)=>index===this.index?x:item))}updateIndex(index){this.index=index,this.indexChange.emit(index)}updateValue(value){this.value=value,this.valueChange.emit(value)}}__name(TuiLinearMultiPickerComponent,"TuiLinearMultiPickerComponent"),TuiLinearMultiPickerComponent.\u0275fac=__name(function(t){return new(t||TuiLinearMultiPickerComponent)(core.\u0275\u0275directiveInject(TuiPickerService))},"TuiLinearMultiPickerComponent_Factory"),TuiLinearMultiPickerComponent.\u0275cmp=core.\u0275\u0275defineComponent({type:TuiLinearMultiPickerComponent,selectors:[["tui-linear-multi-picker"]],hostBindings:__name(function(rf,ctx){1&rf&&core.\u0275\u0275listener("mouseup",__name(function(){return ctx.onMouseUp()},"TuiLinearMultiPickerComponent_mouseup_HostBindingHandler"),!1,core.\u0275\u0275resolveDocument)},"TuiLinearMultiPickerComponent_HostBindings"),inputs:{value:"value"},outputs:{valueChange:"valueChange",indexChange:"indexChange"},features:[core.\u0275\u0275ProvidersFeature([taiga_ui_cdk_services.a3,TuiPickerService])],decls:1,vars:1,consts:[["class","t-circle",3,"left","mousedown","dblclick",4,"ngFor","ngForOf"],[1,"t-circle",3,"mousedown","dblclick"]],template:__name(function(rf,ctx){1&rf&&core.\u0275\u0275template(0,TuiLinearMultiPickerComponent_div_0_Template,1,2,"div",0),2&rf&&core.\u0275\u0275property("ngForOf",ctx.value)},"TuiLinearMultiPickerComponent_Template"),directives:[common.sg],styles:["[_nghost-%COMP%]{position:relative;display:block;height:1rem;box-sizing:border-box}.t-circle[_ngcontent-%COMP%]{position:absolute;width:1rem;height:1rem;border-radius:100%;margin:0 -.5rem;box-shadow:inset 0 0 0 2px var(--tui-base-01),0 0 0 1px var(--tui-base-03)}"],changeDetection:0}),(0,tslib_es6.gn)([(0,taiga_ui_cdk_decorators.TH)()],TuiLinearMultiPickerComponent.prototype,"value",void 0);class TuiPaletteComponent{constructor(){this.colors=new Map,this.selectedColor=new core.EventEmitter,this.originalOrder=(_a,_b)=>0}}__name(TuiPaletteComponent,"TuiPaletteComponent"),TuiPaletteComponent.\u0275fac=__name(function(t){return new(t||TuiPaletteComponent)},"TuiPaletteComponent_Factory"),TuiPaletteComponent.\u0275cmp=core.\u0275\u0275defineComponent({type:TuiPaletteComponent,selectors:[["tui-palette"]],inputs:{colors:"colors"},outputs:{selectedColor:"selectedColor"},decls:2,vars:4,consts:[["type","button","class","t-button",3,"background","tuiHint","tuiHintDescribe","id","click",4,"ngFor","ngForOf"],["type","button",1,"t-button",3,"tuiHint","tuiHintDescribe","id","click"]],template:__name(function(rf,ctx){1&rf&&(core.\u0275\u0275template(0,TuiPaletteComponent_button_0_Template,1,5,"button",0),core.\u0275\u0275pipe(1,"keyvalue")),2&rf&&core.\u0275\u0275property("ngForOf",core.\u0275\u0275pipeBind2(1,1,ctx.colors,ctx.originalOrder))},"TuiPaletteComponent_Template"),directives:[common.sg,taiga_ui_core_directives_hint.D,taiga_ui_core_directives_hint.xn,taiga_ui_core_directives_hint.t6,taiga_ui_core_directives_hint.DM,taiga_ui_core_directives_hint.$o],pipes:[common.Nd],styles:["[_nghost-%COMP%]{display:flex;flex-wrap:wrap;padding:.875rem}.t-button[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;border:0;background:none;font-size:inherit;line-height:inherit;width:1.5625rem;height:1.5625rem;box-sizing:border-box;margin:.375rem;border-radius:var(--tui-radius-m);border:1px solid rgba(0,0,0,.08)}"],changeDetection:0}),(0,tslib_es6.gn)([(0,taiga_ui_cdk_decorators.TH)()],TuiPaletteComponent.prototype,"colors",void 0);const EMPTY_STOP=[0,0,0,0],DEFAULT_STEPS=[[0,[0,0,0,1]],[1,[255,255,255,1]]],ICONS={"to top right":"tuiIconArrowUpRight","to right":"tuiIconArrowRight","to bottom right":"tuiIconArrowDownRight","to bottom":"tuiIconArrowDown","to bottom left":"tuiIconArrowDownLeft","to left":"tuiIconArrowLeft","to top left":"tuiIconArrowUpLeft","to top":"tuiIconArrowUp"};class TuiColorSelectorComponent{constructor(sanitizer,modes){this.sanitizer=sanitizer,this.modes=modes,this.stops=new Map(DEFAULT_STEPS),this.currentStop=0,this.direction="to bottom",this.colors=new Map,this.colorChange=new core.EventEmitter,this.color=[0,0,0,1],this.currentMode=this.modes[0],this.buttons=["to top right","to right","to bottom right","to bottom","to bottom left","to left","to top left","to top"]}set colorSetter(color){this.parse(color)}get palette(){return this.filterPalette(this.colors,this.isGradient)}get stopsKeys(){return this.getStopsKeys(this.stops)}get currentColor(){return this.isGradient?this.getStop(this.currentStop):this.color}get gradient(){return this.sanitizer.bypassSecurityTrustStyle(this.getGradient("to right"))}get isGradient(){return this.currentMode===this.modes[1]}getIcon(direction){return ICONS[direction]}isModeActive(mode){return this.currentMode===mode}isDirectionActive(direction){return this.direction===direction}onPalettePick(color){this.updateColor(color)}onDirectionChange(direction){this.direction=direction,this.updateColor(this.getGradient(direction))}onModeSelect(mode,dropdown){this.currentMode=mode,dropdown.open=!1,this.updateColor(mode===this.modes[0]?`rgba(${this.color.join(", ")})`:this.getGradient(this.direction))}onIndexChange(index){this.currentStop=this.stopsKeys[index]}onColorChange(color){this.isGradient?(this.stops.set(this.currentStop,color),this.updateColor(this.getGradient(this.direction))):this.updateColor(`rgba(${color.join(", ")})`)}onStopsChange(stopsKeys){const removed=this.stopsKeys.find(item=>!stopsKeys.includes(item)),added=stopsKeys.find(item=>!this.stopsKeys.includes(item));void 0===removed&&void 0!==added&&this.addStop(added),void 0!==removed&&void 0===added&&this.removeStop(removed),void 0!==removed&&void 0!==added&&this.replaceStop(removed,added),this.updateColor(this.getGradient(this.direction))}getStopsKeys(stops){return Array.from(stops.keys())}filterPalette(colors,isGradient){const map=new Map(colors);return map.forEach((value,key)=>{(value.startsWith("linear-gradient")&&!isGradient||!value.startsWith("linear-gradient")&&isGradient)&&map.delete(key)}),map}updateColor(color){this.colorChange.emit(color)}getGradient(direction){return`linear-gradient(${direction}, ${[...this.stopsKeys].sort(taiga_ui_cdk_utils_miscellaneous.A2).map(key=>`rgba(${this.getStop(key).join(", ")}) ${100*key}%`).join(", ")})`}getStop(stop){return this.stops.get(stop)||EMPTY_STOP}addStop(stop){const closest=this.stopsKeys.reduce((prev,curr)=>Math.abs(curr-stop)<Math.abs(prev-stop)?curr:prev,this.stopsKeys[0]);this.stops.set(stop,this.getStop(closest)),this.stops=new Map(this.stops),this.currentStop=stop}removeStop(stop){this.stops.delete(stop),this.stops=new Map(this.stops),this.currentStop=this.stopsKeys[0]}replaceStop(removed,added){const value=this.getStop(removed);this.currentStop=added,this.stops=new Map(this.stopsKeys.map(key=>key===removed?[added,value]:[key,this.getStop(key)]))}parse(color){color.startsWith("linear-gradient")?this.parseGradient(color):this.parseColor(color)}parseGradient(color){if(color===this.getGradient(this.direction))return;const gradient=tuiParseGradient(tuiGetGradientData(color));this.currentMode=this.modes[1],this.direction=gradient.side,this.currentStop=0,this.stops=new Map(gradient.stops.length?gradient.stops.map(({color:color2,position})=>[parseFloat(position)/100,(0,taiga_ui_cdk_utils_color.Mp)(color2)]):DEFAULT_STEPS)}parseColor(color){this.currentMode=this.modes[0],this.currentStop=0,this.color=(0,taiga_ui_cdk_utils_color.Mp)(color)}}__name(TuiColorSelectorComponent,"TuiColorSelectorComponent"),TuiColorSelectorComponent.\u0275fac=__name(function(t){return new(t||TuiColorSelectorComponent)(core.\u0275\u0275directiveInject(platform_browser.H7),core.\u0275\u0275directiveInject(TUI_EDITOR_COLOR_SELECTOR_MODE_NAMES))},"TuiColorSelectorComponent_Factory"),TuiColorSelectorComponent.\u0275cmp=core.\u0275\u0275defineComponent({type:TuiColorSelectorComponent,selectors:[["tui-color-selector"]],inputs:{colors:"colors",colorSetter:["color","colorSetter"]},outputs:{colorChange:"colorChange"},decls:12,vars:7,consts:[[1,"t-select",3,"content"],["dropdown",""],["tuiButton","","appearance","","size","s","type","button",3,"iconRight"],["arrow",""],["menu",""],[4,"ngIf"],[3,"color","colorChange"],["tuiGroup","","class","t-edit",3,"color","colorChange",4,"ngIf"],["class","t-palette",3,"colors","selectedColor",4,"ngIf"],["src","tuiIconChevronDown",1,"t-arrow"],["role","menu","size","s",1,"t-menu"],["tuiOption","","role","menuitemradio",3,"keydown.enter.prevent","keydown.space.prevent","click",4,"ngFor","ngForOf"],["tuiOption","","role","menuitemradio",3,"keydown.enter.prevent","keydown.space.prevent","click"],["src","tuiIconCheck","class","t-checkmark",4,"ngIf"],["src","tuiIconCheck",1,"t-checkmark"],[1,"t-hr"],[1,"t-wrapper"],[1,"t-gradient",3,"value","valueChange","indexChange"],[1,"t-buttons"],["tuiIconButton","","type","button","size","xs","appearance","","tuiHintDescribe","","class","t-direction",3,"t-direction_active","icon","tuiHint","click",4,"ngFor","ngForOf"],["tuiIconButton","","type","button","size","xs","appearance","","tuiHintDescribe","",1,"t-direction",3,"icon","tuiHint","click"],["tuiGroup","",1,"t-edit",3,"color","colorChange"],[1,"t-palette",3,"colors","selectedColor"]],template:__name(function(rf,ctx){if(1&rf&&(core.\u0275\u0275elementStart(0,"tui-hosted-dropdown",0,1),core.\u0275\u0275elementStart(2,"button",2),core.\u0275\u0275text(3),core.\u0275\u0275elementEnd(),core.\u0275\u0275template(4,TuiColorSelectorComponent_ng_template_4_Template,1,2,"ng-template",null,3,core.\u0275\u0275templateRefExtractor),core.\u0275\u0275template(6,TuiColorSelectorComponent_ng_template_6_Template,2,1,"ng-template",null,4,core.\u0275\u0275templateRefExtractor),core.\u0275\u0275elementEnd(),core.\u0275\u0275template(8,TuiColorSelectorComponent_ng_container_8_Template,6,4,"ng-container",5),core.\u0275\u0275elementStart(9,"tui-color-picker",6),core.\u0275\u0275listener("colorChange",__name(function($event){return ctx.onColorChange($event)},"TuiColorSelectorComponent_Template_tui_color_picker_colorChange_9_listener")),core.\u0275\u0275elementEnd(),core.\u0275\u0275template(10,TuiColorSelectorComponent_tui_color_edit_10_Template,1,1,"tui-color-edit",7),core.\u0275\u0275template(11,TuiColorSelectorComponent_tui_palette_11_Template,1,1,"tui-palette",8)),2&rf){const _r1=core.\u0275\u0275reference(5),_r3=core.\u0275\u0275reference(7);core.\u0275\u0275property("content",_r3),core.\u0275\u0275advance(2),core.\u0275\u0275property("iconRight",_r1),core.\u0275\u0275advance(1),core.\u0275\u0275textInterpolate1(" ",ctx.currentMode," "),core.\u0275\u0275advance(5),core.\u0275\u0275property("ngIf",ctx.isGradient),core.\u0275\u0275advance(1),core.\u0275\u0275property("color",ctx.currentColor),core.\u0275\u0275advance(1),core.\u0275\u0275property("ngIf",!ctx.isGradient),core.\u0275\u0275advance(1),core.\u0275\u0275property("ngIf",ctx.palette.size)}},"TuiColorSelectorComponent_Template"),directives:[taiga_ui_core_components_hosted_dropdown.o1,taiga_ui_core_components_button.v0,common.O5,TuiColorPickerComponent,taiga_ui_core_components_svg.PN,taiga_ui_core_components_data_list.qi,common.sg,taiga_ui_core_components_data_list.vK,TuiLinearMultiPickerComponent,taiga_ui_core_directives_hint.$o,taiga_ui_core_directives_hint.D,taiga_ui_core_directives_hint.xn,taiga_ui_core_directives_hint.t6,taiga_ui_core_directives_hint.DM,TuiColorEditComponent,taiga_ui_core_components_group.gZ,TuiPaletteComponent],styles:['[_nghost-%COMP%]{position:relative;z-index:0;display:block;width:22.6rem}.t-wrapper[_ngcontent-%COMP%]{position:relative;margin:1.25rem;border-radius:.5rem}.t-wrapper[_ngcontent-%COMP%]:after{position:absolute;top:0;left:0;width:100%;height:100%;content:"";box-shadow:inset 0 0 0 1px #00000014;pointer-events:none;border-radius:inherit}.t-wrapper[_ngcontent-%COMP%]:before{position:absolute;top:0;left:0;width:100%;height:100%;content:"";z-index:-1;background-image:linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03)),linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03));background-size:.375rem .375rem;background-position:0 0,.1875rem .1875rem;border-radius:inherit}.t-hr[_ngcontent-%COMP%]{height:1px;margin:0 0 0 -1px;border:none;background:var(--tui-base-03)}.t-gradient[_ngcontent-%COMP%]{margin:0 .5rem;border-radius:inherit}.t-select[_ngcontent-%COMP%]{margin:.75rem .5rem}.t-arrow[_ngcontent-%COMP%]{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-arrow_rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}.t-menu[_ngcontent-%COMP%]{width:11.25rem}.t-checkmark[_ngcontent-%COMP%]{margin-left:auto;width:1rem;height:1rem}.t-buttons[_ngcontent-%COMP%]{display:flex;padding:0 .75rem 1.25rem}.t-direction[_ngcontent-%COMP%]{color:var(--tui-text-02);margin:0 .375rem}.t-direction[_ngcontent-%COMP%]:hover, .t-direction_active[_ngcontent-%COMP%]{color:var(--tui-text-01);background:var(--tui-secondary-hover)}.t-edit[_ngcontent-%COMP%]{margin:1.25rem}.t-palette[_ngcontent-%COMP%]{box-sizing:border-box;box-shadow:inset 0 1px var(--tui-base-03)}'],changeDetection:0}),(0,tslib_es6.gn)([(0,taiga_ui_cdk_decorators.TH)()],TuiColorSelectorComponent.prototype,"colors",void 0),(0,tslib_es6.gn)([(0,taiga_ui_cdk_decorators.NH)()],TuiColorSelectorComponent.prototype,"colorSetter",null),(0,tslib_es6.gn)([taiga_ui_cdk_decorators.UM],TuiColorSelectorComponent.prototype,"getStopsKeys",null),(0,tslib_es6.gn)([taiga_ui_cdk_decorators.UM],TuiColorSelectorComponent.prototype,"filterPalette",null);class TuiLinearMultiPickerModule{}__name(TuiLinearMultiPickerModule,"TuiLinearMultiPickerModule"),TuiLinearMultiPickerModule.\u0275fac=__name(function(t){return new(t||TuiLinearMultiPickerModule)},"TuiLinearMultiPickerModule_Factory"),TuiLinearMultiPickerModule.\u0275mod=core.\u0275\u0275defineNgModule({type:TuiLinearMultiPickerModule}),TuiLinearMultiPickerModule.\u0275inj=core.\u0275\u0275defineInjector({imports:[[common.ez]]});class TuiPaletteModule{}__name(TuiPaletteModule,"TuiPaletteModule"),TuiPaletteModule.\u0275fac=__name(function(t){return new(t||TuiPaletteModule)},"TuiPaletteModule_Factory"),TuiPaletteModule.\u0275mod=core.\u0275\u0275defineNgModule({type:TuiPaletteModule}),TuiPaletteModule.\u0275inj=core.\u0275\u0275defineInjector({imports:[[common.ez,taiga_ui_core_directives_hint.go]]});class TuiColorSelectorModule{}function TuiInputColorComponent_ng_template_3_Template(rf,ctx){if(1&rf&&core.\u0275\u0275element(0,"div",4),2&rf){const ctx_r1=core.\u0275\u0275nextContext();core.\u0275\u0275styleProp("background",ctx_r1.background)}}function TuiInputColorComponent_ng_template_5_Template(rf,ctx){if(1&rf){const _r6=core.\u0275\u0275getCurrentView();core.\u0275\u0275elementStart(0,"tui-color-selector",5),core.\u0275\u0275listener("colorChange",__name(function($event){core.\u0275\u0275restoreView(_r6);return core.\u0275\u0275nextContext().value=$event},"TuiInputColorComponent_ng_template_5_Template_tui_color_selector_colorChange_0_listener")),core.\u0275\u0275elementEnd()}if(2&rf){const activeZone_r4=ctx.$implicit,ctx_r3=core.\u0275\u0275nextContext();core.\u0275\u0275property("tuiActiveZoneParent",activeZone_r4)("colors",ctx_r3.colors)("color",ctx_r3.value)}}__name(TuiColorSelectorModule,"TuiColorSelectorModule"),TuiColorSelectorModule.\u0275fac=__name(function(t){return new(t||TuiColorSelectorModule)},"TuiColorSelectorModule_Factory"),TuiColorSelectorModule.\u0275mod=core.\u0275\u0275defineNgModule({type:TuiColorSelectorModule}),TuiColorSelectorModule.\u0275inj=core.\u0275\u0275defineInjector({imports:[[common.ez,taiga_ui_core_components_button.fN,taiga_ui_core_components_hosted_dropdown.jh,TuiColorPickerModule,TuiLinearMultiPickerModule,taiga_ui_core_directives_hint.go,taiga_ui_core_components_svg.EI,taiga_ui_core_components_data_list.pc,taiga_ui_cdk_directives_active_zone.A,TuiColorEditModule,taiga_ui_core_components_group.n6,TuiPaletteModule]]}),__name(TuiInputColorComponent_ng_template_3_Template,"TuiInputColorComponent_ng_template_3_Template"),__name(TuiInputColorComponent_ng_template_5_Template,"TuiInputColorComponent_ng_template_5_Template");class TuiInputColorComponent extends taiga_ui_cdk_abstract.M${constructor(control,cdr,domSanitizer){super(control,cdr),this.domSanitizer=domSanitizer,this.colors=new Map,this.open=!1}get nativeFocusableElement(){return this.computedDisabled||!this.textfield?null:this.textfield.nativeFocusableElement}get focused(){return!!this.dropdown&&this.dropdown.focused}get background(){return this.sanitize(this.value,this.domSanitizer)}onClick(){this.open=!this.open}onValueChange(textValue){this.value=textValue}onFocused(focused){this.updateFocused(focused)}getFallbackValue(){return"#000000"}sanitize(value,domSanitizer){return value.startsWith("linear-gradient(")?domSanitizer.bypassSecurityTrustStyle(tuiToGradient(tuiParseGradient(tuiGetGradientData(value)))):value}}__name(TuiInputColorComponent,"TuiInputColorComponent"),TuiInputColorComponent.\u0275fac=__name(function(t){return new(t||TuiInputColorComponent)(core.\u0275\u0275directiveInject(fesm2015_forms.a5,10),core.\u0275\u0275directiveInject(core.ChangeDetectorRef),core.\u0275\u0275directiveInject(platform_browser.H7))},"TuiInputColorComponent_Factory"),TuiInputColorComponent.\u0275cmp=core.\u0275\u0275defineComponent({type:TuiInputColorComponent,selectors:[["tui-input-color"]],viewQuery:__name(function(rf,ctx){if(1&rf&&(core.\u0275\u0275viewQuery(taiga_ui_core_components_primitive_textfield.yc,5),core.\u0275\u0275viewQuery(taiga_ui_core_components_hosted_dropdown.o1,5)),2&rf){let _t;core.\u0275\u0275queryRefresh(_t=core.\u0275\u0275loadQuery())&&(ctx.textfield=_t.first),core.\u0275\u0275queryRefresh(_t=core.\u0275\u0275loadQuery())&&(ctx.dropdown=_t.first)}},"TuiInputColorComponent_Query"),hostBindings:__name(function(rf,ctx){1&rf&&core.\u0275\u0275listener("click",__name(function(){return ctx.onClick()},"TuiInputColorComponent_click_HostBindingHandler"))},"TuiInputColorComponent_HostBindings"),inputs:{colors:"colors"},features:[core.\u0275\u0275ProvidersFeature([],[(0,taiga_ui_core_directives_dropdown.fx)({maxHeight:600})]),core.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:["*"],decls:7,vars:12,consts:[[1,"t-wrapper",3,"content","open","openChange"],[1,"t-textfield",3,"tuiTextfieldIconLeft","pseudoFocus","pseudoHover","pseudoActive","invalid","focusable","nativeId","disabled","readOnly","value","valueChange","focusedChange"],["color",""],["picker",""],[1,"t-color"],[3,"tuiActiveZoneParent","colors","color","colorChange"]],template:__name(function(rf,ctx){if(1&rf&&(core.\u0275\u0275projectionDef(),core.\u0275\u0275elementStart(0,"tui-hosted-dropdown",0),core.\u0275\u0275listener("openChange",__name(function($event){return ctx.open=$event},"TuiInputColorComponent_Template_tui_hosted_dropdown_openChange_0_listener")),core.\u0275\u0275elementStart(1,"tui-primitive-textfield",1),core.\u0275\u0275listener("valueChange",__name(function($event){return ctx.value=$event},"TuiInputColorComponent_Template_tui_primitive_textfield_valueChange_1_listener"))("focusedChange",__name(function($event){return ctx.onFocused($event)},"TuiInputColorComponent_Template_tui_primitive_textfield_focusedChange_1_listener")),core.\u0275\u0275projection(2),core.\u0275\u0275elementEnd(),core.\u0275\u0275elementEnd(),core.\u0275\u0275template(3,TuiInputColorComponent_ng_template_3_Template,1,2,"ng-template",null,2,core.\u0275\u0275templateRefExtractor),core.\u0275\u0275template(5,TuiInputColorComponent_ng_template_5_Template,1,3,"ng-template",null,3,core.\u0275\u0275templateRefExtractor)),2&rf){const _r0=core.\u0275\u0275reference(4),_r2=core.\u0275\u0275reference(6);core.\u0275\u0275property("content",_r2)("open",ctx.open),core.\u0275\u0275advance(1),core.\u0275\u0275property("tuiTextfieldIconLeft",_r0)("pseudoFocus",ctx.computedFocused)("pseudoHover",ctx.pseudoHover)("pseudoActive",ctx.pseudoActive)("invalid",ctx.computedInvalid)("focusable",ctx.focusable)("nativeId",ctx.nativeId)("disabled",ctx.disabled)("readOnly",ctx.readOnly)("value",ctx.value)}},"TuiInputColorComponent_Template"),directives:[taiga_ui_core_components_hosted_dropdown.o1,taiga_ui_core_components_primitive_textfield.yc,taiga_ui_core_components_primitive_textfield.B1,taiga_ui_core_directives_textfield_controller.aR,TuiColorSelectorComponent,taiga_ui_cdk_directives_active_zone.e],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}.t-wrapper[_ngcontent-%COMP%]{display:flex;border-radius:inherit}.t-textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.t-color[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;box-shadow:inset 0 0 0 1px var(--tui-base-03-dark);border-radius:.125rem}"],changeDetection:0}),(0,tslib_es6.gn)([(0,taiga_ui_cdk_decorators.TH)()],TuiInputColorComponent.prototype,"colors",void 0),(0,tslib_es6.gn)([taiga_ui_cdk_decorators.UM],TuiInputColorComponent.prototype,"sanitize",null);class TuiInputColorModule{}__name(TuiInputColorModule,"TuiInputColorModule"),TuiInputColorModule.\u0275fac=__name(function(t){return new(t||TuiInputColorModule)},"TuiInputColorModule_Factory"),TuiInputColorModule.\u0275mod=core.\u0275\u0275defineNgModule({type:TuiInputColorModule}),TuiInputColorModule.\u0275inj=core.\u0275\u0275defineInjector({imports:[[common.ez,taiga_ui_core_components_primitive_textfield.KW,taiga_ui_core_directives_textfield_controller.cn,taiga_ui_core_components_hosted_dropdown.jh,TuiColorSelectorModule,taiga_ui_cdk_directives_active_zone.A]]})},3977:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Nf:()=>TuiInputFilesComponent,Kr:()=>TuiInputFilesDirective,G0:()=>TuiInputFilesModule});var tslib_es6=__webpack_require__(64762),core=__webpack_require__(74788),fesm2015_forms=__webpack_require__(24751),taiga_ui_cdk_services=__webpack_require__(30979),taiga_ui_cdk_observables=__webpack_require__(2325),taiga_ui_cdk_utils_miscellaneous=__webpack_require__(11927),cjs=__webpack_require__(72921),operators=__webpack_require__(57192);class TuiDroppableDirective{constructor({nativeElement},destroy$){this.tuiDroppableDropped=(0,taiga_ui_cdk_observables.mL)(nativeElement,"drop").pipe((0,taiga_ui_cdk_observables.mp)(),(0,operators.UI)(event=>event.dataTransfer),(0,operators.hX)(taiga_ui_cdk_utils_miscellaneous.Pc)),this.tuiDroppableDragOverChange=(0,taiga_ui_cdk_observables.mL)(nativeElement,"dragenter").pipe((0,operators.wt)(({target,dataTransfer})=>(0,cjs.merge)((0,taiga_ui_cdk_observables.mL)(nativeElement,"dragleave").pipe((0,operators.hX)(event=>event.target===target)),(0,taiga_ui_cdk_observables.mL)(nativeElement,"drop")).pipe((0,operators.UI)(()=>null),(0,operators.O4)(dataTransfer))),(0,operators.xb)((a,b)=>!!a&&!!b||!a&&!b)),(0,taiga_ui_cdk_observables.mL)(nativeElement,"dragover").pipe((0,taiga_ui_cdk_observables.mp)(),(0,operators.Rs)(destroy$)).subscribe()}}__name(TuiDroppableDirective,"TuiDroppableDirective"),TuiDroppableDirective.\u0275fac=__name(function(t){return new(t||TuiDroppableDirective)(core.\u0275\u0275directiveInject(core.ElementRef),core.\u0275\u0275directiveInject(taiga_ui_cdk_services.a3,2))},"TuiDroppableDirective_Factory"),TuiDroppableDirective.\u0275dir=core.\u0275\u0275defineDirective({type:TuiDroppableDirective,selectors:[["","tuiDroppableDropped",""],["","tuiDroppableDragOverChange",""]],outputs:{tuiDroppableDropped:"tuiDroppableDropped",tuiDroppableDragOverChange:"tuiDroppableDragOverChange"},features:[core.\u0275\u0275ProvidersFeature([taiga_ui_cdk_services.a3])]});class TuiDroppableModule{}__name(TuiDroppableModule,"TuiDroppableModule"),TuiDroppableModule.\u0275fac=__name(function(t){return new(t||TuiDroppableModule)},"TuiDroppableModule_Factory"),TuiDroppableModule.\u0275mod=core.\u0275\u0275defineNgModule({type:TuiDroppableModule}),TuiDroppableModule.\u0275inj=core.\u0275\u0275defineInjector({});var taiga_ui_cdk_directives_focusable=__webpack_require__(13633),taiga_ui_cdk_abstract=__webpack_require__(76480),taiga_ui_cdk_utils_focus=__webpack_require__(57179),taiga_ui_cdk_constants=__webpack_require__(33770),taiga_ui_cdk_tokens=__webpack_require__(13034),taiga_ui_cdk_decorators=__webpack_require__(44358),taiga_ui_cdk_directives_let=__webpack_require__(92668),taiga_ui_cdk_directives_focused=__webpack_require__(75059),taiga_ui_cdk_directives_focus_visible=__webpack_require__(88491),taiga_ui_cdk_directives_pressed=__webpack_require__(26036),taiga_ui_cdk_directives_hovered=__webpack_require__(96111),taiga_ui_cdk_directives_item=__webpack_require__(56210),taiga_ui_core_directives_wrapper=__webpack_require__(91489),taiga_ui_core_components_link=__webpack_require__(82847),taiga_ui_core_providers=__webpack_require__(12130),taiga_ui_core_components_svg=__webpack_require__(54789),taiga_ui_core_components_loader=__webpack_require__(40719),taiga_ui_core_components_button=__webpack_require__(12628),taiga_ui_core_components_group=__webpack_require__(95974),taiga_ui_kit_tokens=__webpack_require__(56747),taiga_ui_cdk_utils_math=__webpack_require__(85648);function tuiFormatSize(units,size){return void 0===size?null:size<1e3?`${size} ${units[0]}`:size<1e6?`${(size/1e3).toFixed(0)} ${units[1]}`:`${(0,taiga_ui_cdk_utils_math.FG)(size/1e6,2).toLocaleString("ru-RU")} ${units[2]}`}function tuiGetAcceptArray(accept){return accept.toLowerCase().split(",").map(format=>format.trim())}__name(tuiFormatSize,"tuiFormatSize"),__name(tuiGetAcceptArray,"tuiGetAcceptArray");var common=__webpack_require__(12057),tinkoff_ng_polymorpheus=__webpack_require__(89570),platform_browser=__webpack_require__(91211),taiga_ui_cdk_directives_prevent_default=__webpack_require__(533),taiga_ui_core_components_expand=__webpack_require__(12733);function TuiFileComponent_ng_container_0_Template(rf,ctx){if(1&rf&&core.\u0275\u0275elementContainer(0,4),2&rf){core.\u0275\u0275nextContext();const _r3=core.\u0275\u0275reference(4);core.\u0275\u0275property("ngTemplateOutlet",_r3)}}function TuiFileComponent_ng_template_1_Template(rf,ctx){if(1&rf){const _r8=core.\u0275\u0275getCurrentView();core.\u0275\u0275elementStart(0,"a",5),core.\u0275\u0275listener("tuiFocusVisibleChange",__name(function($event){return core.\u0275\u0275restoreView(_r8),core.\u0275\u0275nextContext().onFocusVisible($event)},"TuiFileComponent_ng_template_1_Template_a_tuiFocusVisibleChange_0_listener")),core.\u0275\u0275elementContainer(1,4),core.\u0275\u0275elementEnd()}if(2&rf){const ctx_r2=core.\u0275\u0275nextContext(),_r3=core.\u0275\u0275reference(4);core.\u0275\u0275property("href",ctx_r2.src,core.\u0275\u0275sanitizeUrl),core.\u0275\u0275advance(1),core.\u0275\u0275property("ngTemplateOutlet",_r3)}}function TuiFileComponent_ng_template_3_ng_container_1_Template(rf,ctx){if(1&rf&&(core.\u0275\u0275elementContainerStart(0),core.\u0275\u0275text(1),core.\u0275\u0275elementContainerEnd()),2&rf){const text_r13=ctx.polymorpheusOutlet;core.\u0275\u0275advance(1),core.\u0275\u0275textInterpolate1(" ",text_r13," ")}}function TuiFileComponent_ng_template_3_div_8_Template(rf,ctx){if(1&rf&&(core.\u0275\u0275elementStart(0,"div",15),core.\u0275\u0275text(1),core.\u0275\u0275elementEnd()),2&rf){const fileSize_r14=ctx.ngIf;core.\u0275\u0275advance(1),core.\u0275\u0275textInterpolate1(" ",fileSize_r14," ")}}function TuiFileComponent_ng_template_3_div_10_ng_container_1_Template(rf,ctx){if(1&rf&&(core.\u0275\u0275elementContainerStart(0),core.\u0275\u0275text(1),core.\u0275\u0275elementContainerEnd()),2&rf){const text_r17=ctx.polymorpheusOutlet;core.\u0275\u0275advance(1),core.\u0275\u0275textInterpolate1(" ",text_r17," ")}}function TuiFileComponent_ng_template_3_div_10_Template(rf,ctx){if(1&rf&&(core.\u0275\u0275elementStart(0,"div",16),core.\u0275\u0275template(1,TuiFileComponent_ng_template_3_div_10_ng_container_1_Template,2,1,"ng-container",7),core.\u0275\u0275elementEnd()),2&rf){const content_r15=ctx.ngIf;core.\u0275\u0275advance(1),core.\u0275\u0275property("polymorpheusOutlet",content_r15)}}function TuiFileComponent_ng_template_3_ng_container_13_button_1_Template(rf,ctx){if(1&rf){const _r21=core.\u0275\u0275getCurrentView();core.\u0275\u0275elementStart(0,"button",18),core.\u0275\u0275listener("click.prevent",__name(function(){return core.\u0275\u0275restoreView(_r21),core.\u0275\u0275nextContext(3).onRemoveClick()},"TuiFileComponent_ng_template_3_ng_container_13_button_1_Template_button_click_prevent_0_listener")),core.\u0275\u0275elementEnd()}if(2&rf){const texts_r19=ctx.ngIf;core.\u0275\u0275property("title",texts_r19.remove)}}function TuiFileComponent_ng_template_3_ng_container_13_Template(rf,ctx){if(1&rf&&(core.\u0275\u0275elementContainerStart(0),core.\u0275\u0275template(1,TuiFileComponent_ng_template_3_ng_container_13_button_1_Template,1,1,"button",17),core.\u0275\u0275pipe(2,"async"),core.\u0275\u0275elementContainerEnd()),2&rf){const ctx_r12=core.\u0275\u0275nextContext(2);core.\u0275\u0275advance(1),core.\u0275\u0275property("ngIf",core.\u0275\u0275pipeBind1(2,1,ctx_r12.fileTexts$))}}function TuiFileComponent_ng_template_3_Template(rf,ctx){if(1&rf&&(core.\u0275\u0275elementStart(0,"div",6),core.\u0275\u0275template(1,TuiFileComponent_ng_template_3_ng_container_1_Template,2,1,"ng-container",7),core.\u0275\u0275elementEnd(),core.\u0275\u0275elementStart(2,"div",8),core.\u0275\u0275elementStart(3,"div",9),core.\u0275\u0275elementStart(4,"div",10),core.\u0275\u0275text(5),core.\u0275\u0275elementEnd(),core.\u0275\u0275elementStart(6,"div",11),core.\u0275\u0275text(7),core.\u0275\u0275elementEnd(),core.\u0275\u0275template(8,TuiFileComponent_ng_template_3_div_8_Template,2,1,"div",12),core.\u0275\u0275pipe(9,"async"),core.\u0275\u0275elementEnd(),core.\u0275\u0275template(10,TuiFileComponent_ng_template_3_div_10_Template,2,1,"div",13),core.\u0275\u0275pipe(11,"async"),core.\u0275\u0275projection(12),core.\u0275\u0275elementEnd(),core.\u0275\u0275template(13,TuiFileComponent_ng_template_3_ng_container_13_Template,3,3,"ng-container",14)),2&rf){const ctx_r4=core.\u0275\u0275nextContext(),_r5=core.\u0275\u0275reference(6);core.\u0275\u0275classProp("t-preview_big",ctx_r4.isBig),core.\u0275\u0275advance(1),core.\u0275\u0275property("polymorpheusOutlet",ctx_r4.leftContent||_r5),core.\u0275\u0275advance(4),core.\u0275\u0275textInterpolate1(" ",ctx_r4.name," "),core.\u0275\u0275advance(2),core.\u0275\u0275textInterpolate1(" ",ctx_r4.type," "),core.\u0275\u0275advance(1),core.\u0275\u0275property("ngIf",ctx_r4.showSize&&core.\u0275\u0275pipeBind1(9,8,ctx_r4.fileSize$)),core.\u0275\u0275advance(2),core.\u0275\u0275property("ngIf",core.\u0275\u0275pipeBind1(11,10,ctx_r4.content$)),core.\u0275\u0275advance(3),core.\u0275\u0275property("ngIf",ctx_r4.allowDelete)}}function TuiFileComponent_ng_template_5_img_0_Template(rf,ctx){if(1&rf&&core.\u0275\u0275element(0,"img",22),2&rf){const ctx_r22=core.\u0275\u0275nextContext(2);core.\u0275\u0275property("src",ctx_r22.preview,core.\u0275\u0275sanitizeUrl)}}function TuiFileComponent_ng_template_5_ng_template_1_tui_loader_0_Template(rf,ctx){if(1&rf&&core.\u0275\u0275element(0,"tui-loader",24),2&rf){const ctx_r27=core.\u0275\u0275nextContext(3);core.\u0275\u0275property("inheritColor",ctx_r27.isBig)}}function TuiFileComponent_ng_template_5_ng_template_1_Template(rf,ctx){if(1&rf&&core.\u0275\u0275template(0,TuiFileComponent_ng_template_5_ng_template_1_tui_loader_0_Template,1,1,"tui-loader",23),2&rf){core.\u0275\u0275nextContext();const _r25=core.\u0275\u0275reference(4),ctx_r24=core.\u0275\u0275nextContext();core.\u0275\u0275property("ngIf",ctx_r24.isLoading)("ngIfElse",_r25)}}function TuiFileComponent_ng_template_5_ng_template_3_Template(rf,ctx){if(1&rf&&core.\u0275\u0275element(0,"tui-svg",25),2&rf){const ctx_r26=core.\u0275\u0275nextContext(2);core.\u0275\u0275classProp("t-icon_blank",ctx_r26.isBig||ctx_r26.isDeleted)("t-icon_error",ctx_r26.isError),core.\u0275\u0275property("src",ctx_r26.icon)}}function TuiFileComponent_ng_template_5_Template(rf,ctx){if(1&rf&&(core.\u0275\u0275template(0,TuiFileComponent_ng_template_5_img_0_Template,1,1,"img",19),core.\u0275\u0275template(1,TuiFileComponent_ng_template_5_ng_template_1_Template,1,2,"ng-template",null,20,core.\u0275\u0275templateRefExtractor),core.\u0275\u0275template(3,TuiFileComponent_ng_template_5_ng_template_3_Template,1,5,"ng-template",null,21,core.\u0275\u0275templateRefExtractor)),2&rf){const _r23=core.\u0275\u0275reference(2),ctx_r6=core.\u0275\u0275nextContext();core.\u0275\u0275property("ngIf",ctx_r6.preview)("ngIfElse",_r23)}}__name(TuiFileComponent_ng_container_0_Template,"TuiFileComponent_ng_container_0_Template"),__name(TuiFileComponent_ng_template_1_Template,"TuiFileComponent_ng_template_1_Template"),__name(TuiFileComponent_ng_template_3_ng_container_1_Template,"TuiFileComponent_ng_template_3_ng_container_1_Template"),__name(TuiFileComponent_ng_template_3_div_8_Template,"TuiFileComponent_ng_template_3_div_8_Template"),__name(TuiFileComponent_ng_template_3_div_10_ng_container_1_Template,"TuiFileComponent_ng_template_3_div_10_ng_container_1_Template"),__name(TuiFileComponent_ng_template_3_div_10_Template,"TuiFileComponent_ng_template_3_div_10_Template"),__name(TuiFileComponent_ng_template_3_ng_container_13_button_1_Template,"TuiFileComponent_ng_template_3_ng_container_13_button_1_Template"),__name(TuiFileComponent_ng_template_3_ng_container_13_Template,"TuiFileComponent_ng_template_3_ng_container_13_Template"),__name(TuiFileComponent_ng_template_3_Template,"TuiFileComponent_ng_template_3_Template"),__name(TuiFileComponent_ng_template_5_img_0_Template,"TuiFileComponent_ng_template_5_img_0_Template"),__name(TuiFileComponent_ng_template_5_ng_template_1_tui_loader_0_Template,"TuiFileComponent_ng_template_5_ng_template_1_tui_loader_0_Template"),__name(TuiFileComponent_ng_template_5_ng_template_1_Template,"TuiFileComponent_ng_template_5_ng_template_1_Template"),__name(TuiFileComponent_ng_template_5_ng_template_3_Template,"TuiFileComponent_ng_template_5_ng_template_3_Template"),__name(TuiFileComponent_ng_template_5_Template,"TuiFileComponent_ng_template_5_Template");const _c0=["*"];function TuiFilesComponent_ng_container_0_Template(rf,ctx){1&rf&&core.\u0275\u0275elementContainer(0)}function TuiFilesComponent_ng_container_4_ng_container_1_Template(rf,ctx){if(1&rf&&core.\u0275\u0275elementContainer(0,6),2&rf){const item_r4=core.\u0275\u0275nextContext().$implicit;core.\u0275\u0275property("ngTemplateOutlet",item_r4)}}function TuiFilesComponent_ng_container_4_Template(rf,ctx){if(1&rf&&(core.\u0275\u0275elementContainerStart(0),core.\u0275\u0275template(1,TuiFilesComponent_ng_container_4_ng_container_1_Template,1,1,"ng-container",5),core.\u0275\u0275elementContainerEnd()),2&rf){const index_r5=ctx.index,ctx_r1=core.\u0275\u0275nextContext();core.\u0275\u0275advance(1),core.\u0275\u0275property("ngIf",!ctx_r1.max||index_r5<ctx_r1.max)}}function TuiFilesComponent_tui_expand_5_ng_container_2_ng_container_1_Template(rf,ctx){if(1&rf&&core.\u0275\u0275elementContainer(0,6),2&rf){const item_r9=core.\u0275\u0275nextContext().$implicit;core.\u0275\u0275property("ngTemplateOutlet",item_r9)}}function TuiFilesComponent_tui_expand_5_ng_container_2_Template(rf,ctx){if(1&rf&&(core.\u0275\u0275elementContainerStart(0),core.\u0275\u0275template(1,TuiFilesComponent_tui_expand_5_ng_container_2_ng_container_1_Template,1,1,"ng-container",5),core.\u0275\u0275elementContainerEnd()),2&rf){const index_r10=ctx.index,ctx_r8=core.\u0275\u0275nextContext(2);core.\u0275\u0275advance(1),core.\u0275\u0275property("ngIf",ctx_r8.max&&index_r10>=ctx_r8.max)}}function TuiFilesComponent_tui_expand_5_Template(rf,ctx){if(1&rf&&(core.\u0275\u0275elementStart(0,"tui-expand",7),core.\u0275\u0275elementStart(1,"div",8),core.\u0275\u0275template(2,TuiFilesComponent_tui_expand_5_ng_container_2_Template,2,1,"ng-container",2),core.\u0275\u0275elementEnd(),core.\u0275\u0275elementEnd()),2&rf){const ctx_r2=core.\u0275\u0275nextContext();core.\u0275\u0275property("expanded",!ctx_r2.hidden),core.\u0275\u0275advance(2),core.\u0275\u0275property("ngForOf",ctx_r2.items)}}function TuiFilesComponent_button_6_Template(rf,ctx){if(1&rf){const _r14=core.\u0275\u0275getCurrentView();core.\u0275\u0275elementStart(0,"button",9),core.\u0275\u0275listener("click",__name(function(){return core.\u0275\u0275restoreView(_r14),core.\u0275\u0275nextContext().toggle()},"TuiFilesComponent_button_6_Template_button_click_0_listener")),core.\u0275\u0275text(1),core.\u0275\u0275pipe(2,"async"),core.\u0275\u0275elementEnd()}if(2&rf){const ctx_r3=core.\u0275\u0275nextContext();core.\u0275\u0275classProp("t-button_collapsed",ctx_r3.hidden),core.\u0275\u0275advance(1),core.\u0275\u0275textInterpolate1(" ",core.\u0275\u0275pipeBind1(2,3,ctx_r3.hidden?ctx_r3.showAllText$:ctx_r3.hideText$)," ")}}__name(TuiFilesComponent_ng_container_0_Template,"TuiFilesComponent_ng_container_0_Template"),__name(TuiFilesComponent_ng_container_4_ng_container_1_Template,"TuiFilesComponent_ng_container_4_ng_container_1_Template"),__name(TuiFilesComponent_ng_container_4_Template,"TuiFilesComponent_ng_container_4_Template"),__name(TuiFilesComponent_tui_expand_5_ng_container_2_ng_container_1_Template,"TuiFilesComponent_tui_expand_5_ng_container_2_ng_container_1_Template"),__name(TuiFilesComponent_tui_expand_5_ng_container_2_Template,"TuiFilesComponent_tui_expand_5_ng_container_2_Template"),__name(TuiFilesComponent_tui_expand_5_Template,"TuiFilesComponent_tui_expand_5_Template"),__name(TuiFilesComponent_button_6_Template,"TuiFilesComponent_button_6_Template");const TUI_FILE_DEFAULT_OPTIONS={formatSize:tuiFormatSize},TUI_FILE_OPTIONS=new core.InjectionToken("[TUI_FILE_OPTIONS]",{factory:()=>TUI_FILE_DEFAULT_OPTIONS});class TuiFileComponent{constructor(sanitizer,fileTexts$,options,units$){this.sanitizer=sanitizer,this.fileTexts$=fileTexts$,this.options=options,this.units$=units$,this.file={name:""},this.state="normal",this.size="m",this.showDelete=!0,this.showSize=!0,this.removed=new core.EventEmitter,this.focused=!1}get preview(){return this.isBig?this.createPreview(this.file,this.sanitizer):""}get isBig(){return"l"===this.size}get isLoading(){return"loading"===this.state}get isError(){return"error"===this.state}get isDeleted(){return"deleted"===this.state}get allowDelete(){return this.showDelete&&(0,taiga_ui_cdk_observables.fw)(this.removed)}get icon(){if("normal"===this.state&&this.isBig)return"tuiIconFileLarge";switch(this.state){case"deleted":return"tuiIconTrashLarge";case"error":return"tuiIconAlertCircleLarge";default:return"tuiIconCheckCircleLarge"}}get src(){return this.file.src||""}get name(){return this.getName(this.file)}get type(){return this.getType(this.file)}get content$(){return this.calculateContent$(this.state,this.file,this.fileTexts$)}get fileSize$(){return this.calculateFileSize$(this.file,this.units$)}onRemoveClick(){this.removed.emit()}onFocusVisible(focusVisible){this.focused=focusVisible}calculateContent$(state,file,fileTexts$){return"error"!==state||file.content?(0,cjs.of)(this.file.content||""):fileTexts$.pipe((0,operators.UI)(texts=>texts.loadingError))}calculateFileSize$(file,units$){return units$.pipe((0,operators.UI)(units=>this.options.formatSize(units,file.size)))}createPreview(file,sanitizer){return file.src?file.src:file instanceof File&&file.type&&file.type.startsWith("image/")?sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(file)):""}getName(file){return file.name.split(".").slice(0,-1).join(".")}getType(file){return`.${file.name.split(".").pop()}`||""}}__name(TuiFileComponent,"TuiFileComponent"),TuiFileComponent.\u0275fac=__name(function(t){return new(t||TuiFileComponent)(core.\u0275\u0275directiveInject(platform_browser.H7),core.\u0275\u0275directiveInject(taiga_ui_kit_tokens.qk),core.\u0275\u0275directiveInject(TUI_FILE_OPTIONS),core.\u0275\u0275directiveInject(taiga_ui_kit_tokens.rV))},"TuiFileComponent_Factory"),TuiFileComponent.\u0275cmp=core.\u0275\u0275defineComponent({type:TuiFileComponent,selectors:[["tui-file"]],hostVars:4,hostBindings:__name(function(rf,ctx){2&rf&&core.\u0275\u0275classProp("_focused",ctx.focused)("_link",ctx.src)},"TuiFileComponent_HostBindings"),inputs:{file:"file",state:"state",size:"size",showDelete:"showDelete",showSize:"showSize",leftContent:"leftContent"},outputs:{removed:"removed"},ngContentSelectors:_c0,decls:7,vars:2,consts:[[3,"ngTemplateOutlet",4,"ngIf","ngIfElse"],["withLink",""],["fileInfoTemplate",""],["defaultLeftContent",""],[3,"ngTemplateOutlet"],["rel","noreferrer noopener","target","_blank",1,"t-link",3,"href","tuiFocusVisibleChange"],[1,"t-preview"],[4,"polymorpheusOutlet"],[1,"t-wrapper"],[1,"t-text"],["automation-id","tui-file__name",1,"t-name"],["automation-id","tui-file__type",1,"t-type"],["automation-id","tui-file__size","class","t-size",4,"ngIf"],["automation-id","tui-file__content","class","t-content",4,"ngIf"],[4,"ngIf"],["automation-id","tui-file__size",1,"t-size"],["automation-id","tui-file__content",1,"t-content"],["automation-id","tui-file__remove","tuiIconButton","","type","button","size","xs","icon","tuiIconCloseLarge","appearance","icon","tuiPreventDefault","mousedown","class","t-remove",3,"title","click.prevent",4,"ngIf"],["automation-id","tui-file__remove","tuiIconButton","","type","button","size","xs","icon","tuiIconCloseLarge","appearance","icon","tuiPreventDefault","mousedown",1,"t-remove",3,"title","click.prevent"],["automation-id","tui-file__preview","alt","file preview","class","t-image",3,"src",4,"ngIf","ngIfElse"],["loader",""],["svg",""],["automation-id","tui-file__preview","alt","file preview",1,"t-image",3,"src"],["automation-id","tui-file__loader","class","t-loader",3,"inheritColor",4,"ngIf","ngIfElse"],["automation-id","tui-file__loader",1,"t-loader",3,"inheritColor"],["automation-id","tui-file__icon",1,"t-icon",3,"src"]],template:__name(function(rf,ctx){if(1&rf&&(core.\u0275\u0275projectionDef(),core.\u0275\u0275template(0,TuiFileComponent_ng_container_0_Template,1,1,"ng-container",0),core.\u0275\u0275template(1,TuiFileComponent_ng_template_1_Template,2,2,"ng-template",null,1,core.\u0275\u0275templateRefExtractor),core.\u0275\u0275template(3,TuiFileComponent_ng_template_3_Template,14,12,"ng-template",null,2,core.\u0275\u0275templateRefExtractor),core.\u0275\u0275template(5,TuiFileComponent_ng_template_5_Template,5,2,"ng-template",null,3,core.\u0275\u0275templateRefExtractor)),2&rf){const _r1=core.\u0275\u0275reference(2);core.\u0275\u0275property("ngIf",!ctx.src)("ngIfElse",_r1)}},"TuiFileComponent_Template"),directives:[common.O5,common.tP,taiga_ui_cdk_directives_focus_visible.q,tinkoff_ng_polymorpheus.Li,taiga_ui_core_components_button.v0,taiga_ui_cdk_directives_prevent_default.A,taiga_ui_core_components_loader.kM,taiga_ui_core_components_svg.PN],pipes:[common.Ov],styles:['[_nghost-%COMP%]{position:relative;display:flex;align-items:center;font:var(--tui-font-text-m);background:var(--tui-base-01);border:1px solid var(--tui-base-03);border-radius:var(--tui-radius-m)}[data-mode=onDark][_nghost-%COMP%]{color:var(--tui-text-01-night)}[_nghost-%COMP%]:not(._link){padding:.5625rem 2.1875rem .5625rem .5625rem}[_nghost-%COMP%]:hover   .t-remove[_ngcontent-%COMP%]{opacity:1}._focused[_nghost-%COMP%]{border-color:var(--tui-focus);box-shadow:0 0 0 1px inset var(--tui-focus)}.t-link[_ngcontent-%COMP%]{display:flex;flex:1;padding:.5625rem 2.1875rem .5625rem .5625rem;text-decoration:none;outline:none;cursor:pointer;color:var(--tui-text-01);max-width:calc(100% - 2.75rem)}.t-link[_ngcontent-%COMP%]:hover{background-color:var(--tui-base-02)}.t-preview[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;flex-shrink:0;width:1.5rem;height:1.5rem;margin-right:.75rem;border-radius:var(--tui-radius-m);overflow:hidden;color:var(--tui-base-06)}.t-preview_big[_ngcontent-%COMP%]{width:4rem;height:4rem;margin-right:1rem}.t-preview_big[_ngcontent-%COMP%]:before{position:absolute;top:0;left:0;width:100%;height:100%;content:"";background:var(--tui-base-08);opacity:.08}.t-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.t-loader[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}.t-icon[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;color:var(--tui-success-fill)}.t-icon_blank[_ngcontent-%COMP%]{color:var(--tui-base-06)}.t-icon_error[_ngcontent-%COMP%]{color:var(--tui-error-fill)}.t-remove[_ngcontent-%COMP%]{transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;position:absolute;top:.625rem;right:.625rem}.t-remove[_ngcontent-%COMP%]:focus{opacity:1}.t-remove[_ngcontent-%COMP%]:focus-visible{box-shadow:inset 0 0 0 2px var(--tui-focus)}@media (hover: hover) and (pointer: fine){.t-remove[_ngcontent-%COMP%]{opacity:0}}.t-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;overflow:hidden}.t-text[_ngcontent-%COMP%]{display:flex}.t-size[_ngcontent-%COMP%]{flex-shrink:0;opacity:var(--tui-disabled-opacity);margin-left:.5rem}.t-type[_ngcontent-%COMP%]{flex-shrink:0}.t-name[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.t-content[_ngcontent-%COMP%]{font:var(--tui-font-text-s);color:var(--tui-error-fill)}'],changeDetection:0}),(0,tslib_es6.gn)([(0,taiga_ui_cdk_decorators.TH)()],TuiFileComponent.prototype,"file",void 0),(0,tslib_es6.gn)([(0,taiga_ui_cdk_decorators.TH)()],TuiFileComponent.prototype,"state",void 0),(0,tslib_es6.gn)([(0,taiga_ui_cdk_decorators.TH)()],TuiFileComponent.prototype,"size",void 0),(0,tslib_es6.gn)([(0,taiga_ui_cdk_decorators.TH)()],TuiFileComponent.prototype,"showDelete",void 0),(0,tslib_es6.gn)([(0,taiga_ui_cdk_decorators.TH)()],TuiFileComponent.prototype,"showSize",void 0),(0,tslib_es6.gn)([taiga_ui_cdk_decorators.UM],TuiFileComponent.prototype,"calculateContent$",null),(0,tslib_es6.gn)([taiga_ui_cdk_decorators.UM],TuiFileComponent.prototype,"calculateFileSize$",null),(0,tslib_es6.gn)([taiga_ui_cdk_decorators.UM],TuiFileComponent.prototype,"createPreview",null),(0,tslib_es6.gn)([taiga_ui_cdk_decorators.UM],TuiFileComponent.prototype,"getName",null),(0,tslib_es6.gn)([taiga_ui_cdk_decorators.UM],TuiFileComponent.prototype,"getType",null);class TuiFilesComponent{constructor(hideText$,showAllText$){this.hideText$=hideText$,this.showAllText$=showAllText$,this.items=taiga_ui_cdk_constants.Mm,this.max=0,this.hidden=!0}get hasExtraItems(){return!!this.max&&this.items.length>this.max}toggle(){this.hidden=!this.hidden}}__name(TuiFilesComponent,"TuiFilesComponent"),TuiFilesComponent.\u0275fac=__name(function(t){return new(t||TuiFilesComponent)(core.\u0275\u0275directiveInject(taiga_ui_kit_tokens.vy),core.\u0275\u0275directiveInject(taiga_ui_kit_tokens.jV))},"TuiFilesComponent_Factory"),TuiFilesComponent.\u0275cmp=core.\u0275\u0275defineComponent({type:TuiFilesComponent,selectors:[["tui-files"]],contentQueries:__name(function(rf,ctx,dirIndex){if(1&rf&&core.\u0275\u0275contentQuery(dirIndex,taiga_ui_cdk_directives_item.w,4,core.TemplateRef),2&rf){let _t;core.\u0275\u0275queryRefresh(_t=core.\u0275\u0275loadQuery())&&(ctx.items=_t)}},"TuiFilesComponent_ContentQueries"),inputs:{max:"max"},ngContentSelectors:_c0,decls:7,vars:7,consts:[[4,"ngIf"],["tuiGroup","","orientation","vertical",1,"t-files",3,"collapsed"],[4,"ngFor","ngForOf"],[3,"expanded",4,"ngIf"],["tuiButton","","appearance","outline","size","m","type","button","class","t-button",3,"t-button_collapsed","click",4,"ngIf"],[3,"ngTemplateOutlet",4,"ngIf"],[3,"ngTemplateOutlet"],[3,"expanded"],[1,"t-extra-items"],["tuiButton","","appearance","outline","size","m","type","button",1,"t-button",3,"click"]],template:__name(function(rf,ctx){1&rf&&(core.\u0275\u0275projectionDef(),core.\u0275\u0275template(0,TuiFilesComponent_ng_container_0_Template,1,0,"ng-container",0),core.\u0275\u0275pipe(1,"async"),core.\u0275\u0275elementStart(2,"section",1),core.\u0275\u0275projection(3),core.\u0275\u0275template(4,TuiFilesComponent_ng_container_4_Template,2,1,"ng-container",2),core.\u0275\u0275template(5,TuiFilesComponent_tui_expand_5_Template,3,2,"tui-expand",3),core.\u0275\u0275template(6,TuiFilesComponent_button_6_Template,3,5,"button",4),core.\u0275\u0275elementEnd()),2&rf&&(core.\u0275\u0275property("ngIf",core.\u0275\u0275pipeBind1(1,5,null==ctx.items?null:ctx.items.changes)),core.\u0275\u0275advance(2),core.\u0275\u0275property("collapsed",!0),core.\u0275\u0275advance(2),core.\u0275\u0275property("ngForOf",ctx.items),core.\u0275\u0275advance(1),core.\u0275\u0275property("ngIf",ctx.hasExtraItems),core.\u0275\u0275advance(1),core.\u0275\u0275property("ngIf",ctx.hasExtraItems))},"TuiFilesComponent_Template"),directives:[common.O5,taiga_ui_core_components_group.gZ,common.sg,common.tP,taiga_ui_core_components_expand.SV,taiga_ui_core_components_button.v0],pipes:[common.Ov],styles:["tui-files{display:block}tui-files .t-files{position:relative;display:block;width:100%;height:100%;border-radius:var(--tui-radius-m);overflow:hidden}tui-files .t-button{z-index:3;width:100%;background:var(--tui-base-01)}tui-files .t-button_collapsed{box-shadow:0 1.125rem 1.875rem #0000007a;margin-top:-1.5rem}tui-files .t-extra-items tui-file{border-radius:0;margin-top:0;margin-bottom:-.0625rem}\n"],encapsulation:2,changeDetection:0}),(0,tslib_es6.gn)([(0,taiga_ui_cdk_decorators.TH)()],TuiFilesComponent.prototype,"max",void 0);class TuiFilesModule{}__name(TuiFilesModule,"TuiFilesModule"),TuiFilesModule.\u0275fac=__name(function(t){return new(t||TuiFilesModule)},"TuiFilesModule_Factory"),TuiFilesModule.\u0275mod=core.\u0275\u0275defineNgModule({type:TuiFilesModule}),TuiFilesModule.\u0275inj=core.\u0275\u0275defineInjector({imports:[[common.ez,taiga_ui_core_components_group.n6,taiga_ui_core_components_loader.dS,tinkoff_ng_polymorpheus.wq,taiga_ui_core_components_svg.EI,taiga_ui_cdk_directives_focus_visible.c,taiga_ui_core_components_button.fN,taiga_ui_cdk_directives_item.H,taiga_ui_core_components_expand.ij,taiga_ui_cdk_directives_prevent_default.Z]]});const taiga_ui_kit_components_input_files_c0=["input"],_c1=["formatRejection"],_c2=["maxSizeRejection"];function TuiInputFilesComponent_ng_container_2_Template(rf,ctx){1&rf&&core.\u0275\u0275elementContainer(0)}function TuiInputFilesComponent_ng_container_3_ng_container_2_Template(rf,ctx){if(1&rf&&(core.\u0275\u0275elementContainerStart(0),core.\u0275\u0275text(1),core.\u0275\u0275elementContainerEnd()),2&rf){const text_r9=ctx.polymorpheusOutlet;core.\u0275\u0275advance(1),core.\u0275\u0275textInterpolate1(" ",text_r9," ")}}function TuiInputFilesComponent_ng_container_3_ng_container_4_Template(rf,ctx){if(1&rf&&(core.\u0275\u0275elementContainerStart(0),core.\u0275\u0275text(1),core.\u0275\u0275elementContainerEnd()),2&rf){const text_r10=ctx.polymorpheusOutlet;core.\u0275\u0275advance(1),core.\u0275\u0275textInterpolate1(" ",text_r10," ")}}function TuiInputFilesComponent_ng_container_3_Template(rf,ctx){if(1&rf&&(core.\u0275\u0275elementContainerStart(0),core.\u0275\u0275elementStart(1,"a",6),core.\u0275\u0275template(2,TuiInputFilesComponent_ng_container_3_ng_container_2_Template,2,1,"ng-container",7),core.\u0275\u0275pipe(3,"async"),core.\u0275\u0275elementEnd(),core.\u0275\u0275template(4,TuiInputFilesComponent_ng_container_3_ng_container_4_Template,2,1,"ng-container",7),core.\u0275\u0275pipe(5,"async"),core.\u0275\u0275elementContainerEnd()),2&rf){const ctx_r1=core.\u0275\u0275nextContext();core.\u0275\u0275advance(2),core.\u0275\u0275property("polymorpheusOutlet",core.\u0275\u0275pipeBind1(3,2,ctx_r1.computedLink$)),core.\u0275\u0275advance(2),core.\u0275\u0275property("polymorpheusOutlet",core.\u0275\u0275pipeBind1(5,4,ctx_r1.computedLabel$))}}function TuiInputFilesComponent_ng_container_4_Template(rf,ctx){if(1&rf&&(core.\u0275\u0275elementContainerStart(0),core.\u0275\u0275projection(1),core.\u0275\u0275element(2,"input",8,9),core.\u0275\u0275elementContainerEnd()),2&rf){const ctx_r2=core.\u0275\u0275nextContext();core.\u0275\u0275advance(2),core.\u0275\u0275property("id",ctx_r2.id)("accept",ctx_r2.accept)("multiple",ctx_r2.multiple)("tuiFocusable",ctx_r2.focusable)}}function TuiInputFilesComponent_ng_template_5_Template(rf,ctx){if(1&rf&&(core.\u0275\u0275text(0),core.\u0275\u0275pipe(1,"async")),2&rf){const ctx_r4=core.\u0275\u0275nextContext();let tmp_0_0;core.\u0275\u0275textInterpolate1(" ",(null==(tmp_0_0=core.\u0275\u0275pipeBind1(1,1,ctx_r4.inputFileTexts$))?null:tmp_0_0.formatRejectionReason)||"","\n")}}function TuiInputFilesComponent_ng_template_7_Template(rf,ctx){if(1&rf&&(core.\u0275\u0275text(0),core.\u0275\u0275pipe(1,"async"),core.\u0275\u0275pipe(2,"tuiMaxSizeRejectionError")),2&rf){const ctx_r6=core.\u0275\u0275nextContext();core.\u0275\u0275textInterpolate1(" ",core.\u0275\u0275pipeBind1(1,1,core.\u0275\u0275pipeBind1(2,3,ctx_r6.maxFileSize)),"\n")}}__name(TuiInputFilesComponent_ng_container_2_Template,"TuiInputFilesComponent_ng_container_2_Template"),__name(TuiInputFilesComponent_ng_container_3_ng_container_2_Template,"TuiInputFilesComponent_ng_container_3_ng_container_2_Template"),__name(TuiInputFilesComponent_ng_container_3_ng_container_4_Template,"TuiInputFilesComponent_ng_container_3_ng_container_4_Template"),__name(TuiInputFilesComponent_ng_container_3_Template,"TuiInputFilesComponent_ng_container_3_Template"),__name(TuiInputFilesComponent_ng_container_4_Template,"TuiInputFilesComponent_ng_container_4_Template"),__name(TuiInputFilesComponent_ng_template_5_Template,"TuiInputFilesComponent_ng_template_5_Template"),__name(TuiInputFilesComponent_ng_template_7_Template,"TuiInputFilesComponent_ng_template_7_Template");const _c3=[[["input"]]],_c4=__name(function(a0){return{$implicit:a0}},"_c4"),TUI_INPUT_FILES_DEFAULT_OPTIONS={capture:null,accepts:"",multiple:!1,size:"m",maxFileSize:3e7},TUI_INPUT_FILES_OPTIONS=new core.InjectionToken("[TUI_INPUT_FILES_OPTIONS]",{factory:()=>TUI_INPUT_FILES_DEFAULT_OPTIONS});class TuiInputFilesDirective{constructor(host,el,idService,options){this.host=host,this.el=el,this.idService=idService,this.options=options}get tabIndex(){return this.host.focusable?0:-1}get id(){return this.el.nativeElement.id||this.idService.generate()}get accept(){var _a;return null!==(_a=this.el.nativeElement.accept)&&void 0!==_a?_a:this.options.accepts}get multiple(){var _a;return null!==(_a=this.el.nativeElement.multiple)&&void 0!==_a?_a:this.options.multiple}get capture(){var _a;return null!==(_a=this.el.nativeElement.getAttribute("capture"))&&void 0!==_a?_a:this.options.capture}get input(){return this.el.nativeElement}}__name(TuiInputFilesDirective,"TuiInputFilesDirective"),TuiInputFilesDirective.\u0275fac=__name(function(t){return new(t||TuiInputFilesDirective)(core.\u0275\u0275directiveInject(TuiInputFilesComponent),core.\u0275\u0275directiveInject(core.ElementRef),core.\u0275\u0275directiveInject(taiga_ui_cdk_services.ll),core.\u0275\u0275directiveInject(TUI_INPUT_FILES_OPTIONS))},"TuiInputFilesDirective_Factory"),TuiInputFilesDirective.\u0275dir=core.\u0275\u0275defineDirective({type:TuiInputFilesDirective,selectors:[["input","tuiInputFiles",""]],hostAttrs:["type","file",1,"t-native"],hostVars:5,hostBindings:__name(function(rf,ctx){2&rf&&(core.\u0275\u0275hostProperty("tabIndex",ctx.tabIndex)("id",ctx.id)("accept",ctx.accept)("multiple",ctx.multiple),core.\u0275\u0275attribute("capture",ctx.capture))},"TuiInputFilesDirective_HostBindings")});class TuiMaxSizeRejectionErrorPipe{constructor(inputFileTexts$,units$){this.inputFileTexts$=inputFileTexts$,this.units$=units$}transform(maxFileSize){return(0,cjs.combineLatest)([this.inputFileTexts$,this.units$]).pipe((0,operators.UI)(([{maxSizeRejectionReason},units])=>`${maxSizeRejectionReason}${tuiFormatSize(units,maxFileSize)}`))}}__name(TuiMaxSizeRejectionErrorPipe,"TuiMaxSizeRejectionErrorPipe"),TuiMaxSizeRejectionErrorPipe.\u0275fac=__name(function(t){return new(t||TuiMaxSizeRejectionErrorPipe)(core.\u0275\u0275directiveInject(taiga_ui_kit_tokens.BV,16),core.\u0275\u0275directiveInject(taiga_ui_kit_tokens.rV,16))},"TuiMaxSizeRejectionErrorPipe_Factory"),TuiMaxSizeRejectionErrorPipe.\u0275pipe=core.\u0275\u0275definePipe({name:"tuiMaxSizeRejectionError",type:TuiMaxSizeRejectionErrorPipe,pure:!0});class TuiInputFilesComponent extends taiga_ui_cdk_abstract.F9{constructor(control,cdr,isMobile,inputFileTexts$,options){super(control,cdr),this.isMobile=isMobile,this.inputFileTexts$=inputFileTexts$,this.options=options,this.dataTransfer=null,this.accept=this.options.accepts,this.multiple=this.options.multiple,this.size=this.options.size,this.maxFileSize=this.options.maxFileSize,this.reject=new core.EventEmitter}get computedMultiple(){var _a,_b;return null!==(_b=null===(_a=this.nativeInput)||void 0===_a?void 0:_a.multiple)&&void 0!==_b?_b:this.multiple}get computedAccept(){var _a,_b;return null!==(_b=null===(_a=this.nativeInput)||void 0===_a?void 0:_a.accept)&&void 0!==_b?_b:this.accept}get nativeFocusableElement(){var _a;return(null===(_a=this.input)||void 0===_a?void 0:_a.nativeElement)||null}get focused(){return(0,taiga_ui_cdk_utils_focus.V8)(this.nativeFocusableElement)}get computedPseudoHovered(){var _a;return null!==(_a=this.pseudoHover)&&void 0!==_a?_a:this.fileDragged||null}get computedLink$(){return this.computeLink$(this.fileDragged,this.computedMultiple,this.link)}get computedLabel$(){return this.computeLabel$(this.isMobile,this.fileDragged,this.computedMultiple,this.label)}get fileDragged(){var _a;return!!(null===(_a=this.dataTransfer)||void 0===_a?void 0:_a.types.includes("Files"))}get arrayValue(){return this.getValueArray(this.value)}onFocused(focused){this.updateFocused(focused)}onFilesSelected(){var _a,_b,_c;const input=null!==(_b=null===(_a=this.nativeInput)||void 0===_a?void 0:_a.input)&&void 0!==_b?_b:null===(_c=this.input)||void 0===_c?void 0:_c.nativeElement;!input||(this.processSelectedFiles(input.files),input.value="")}onDropped(event){this.processSelectedFiles(event.files)}onDragOver(dataTransfer){this.dataTransfer=dataTransfer}removeFile(removedFile){this.value=this.computedMultiple?this.arrayValue.filter(file=>file!==removedFile):null}computeLink$(fileDragged,multiple,link){return fileDragged?(0,cjs.of)(""):this.inputFileTexts$.pipe((0,operators.UI)(texts=>multiple&&!link?texts.defaultLinkMultiple:link||texts.defaultLinkSingle))}computeLabel$(isMobile,fileDragged,multiple,label){return isMobile?(0,cjs.of)(""):fileDragged?this.inputFileTexts$.pipe((0,operators.UI)(texts=>multiple?texts.dropMultiple:texts.drop)):this.inputFileTexts$.pipe((0,operators.UI)(texts=>multiple&&!label?texts.defaultLabelMultiple:label||texts.defaultLabelSingle))}getValueArray(value){return value?Array.isArray(value)?value:[value]:taiga_ui_cdk_constants.LZ}processSelectedFiles(files){if(!(null==files?void 0:files.length))return;const errors={formatRejection:this.formatRejection,maxSizeRejection:this.maxSizeRejection},newFiles=this.computedMultiple?Array.from(files):[files[0]],tooBigFiles=newFiles.filter(file=>file.size>this.maxFileSize),wrongFormatFiles=newFiles.filter(file=>!this.isFormatAcceptable(file)&&!tooBigFiles.includes(file)),acceptedFiles=newFiles.filter(file=>!tooBigFiles.includes(file)&&!wrongFormatFiles.includes(file));(tooBigFiles.length||wrongFormatFiles.length)&&this.rejectFiles([...tooBigFiles.map(file=>({name:file.name,type:file.type,size:file.size,content:errors.maxSizeRejection})),...wrongFormatFiles.map(file=>({name:file.name,type:file.type,size:file.size,content:errors.formatRejection}))]),this.value=this.computedMultiple?[...this.arrayValue,...acceptedFiles]:acceptedFiles[0]||null}isFormatAcceptable(file){if(!this.computedAccept)return!0;const extension=`.${(file.name.split(".").pop()||"").toLowerCase()}`;return tuiGetAcceptArray(this.computedAccept).some(format=>format===extension||format===file.type||"*"===format.split("/")[1]&&file.type.split("/")[0]===format.split("/")[0])}rejectFiles(rejectedFiles){this.reject.emit(this.computedMultiple?rejectedFiles:rejectedFiles[0])}}__name(TuiInputFilesComponent,"TuiInputFilesComponent"),TuiInputFilesComponent.\u0275fac=__name(function(t){return new(t||TuiInputFilesComponent)(core.\u0275\u0275directiveInject(fesm2015_forms.a5,10),core.\u0275\u0275directiveInject(core.ChangeDetectorRef),core.\u0275\u0275directiveInject(taiga_ui_cdk_tokens.fL),core.\u0275\u0275directiveInject(taiga_ui_kit_tokens.BV),core.\u0275\u0275directiveInject(TUI_INPUT_FILES_OPTIONS))},"TuiInputFilesComponent_Factory"),TuiInputFilesComponent.\u0275cmp=core.\u0275\u0275defineComponent({type:TuiInputFilesComponent,selectors:[["tui-input-files"]],contentQueries:__name(function(rf,ctx,dirIndex){if(1&rf&&(core.\u0275\u0275contentQuery(dirIndex,TuiInputFilesDirective,5),core.\u0275\u0275contentQuery(dirIndex,core.TemplateRef,5)),2&rf){let _t;core.\u0275\u0275queryRefresh(_t=core.\u0275\u0275loadQuery())&&(ctx.nativeInput=_t.first),core.\u0275\u0275queryRefresh(_t=core.\u0275\u0275loadQuery())&&(ctx.template=_t.first)}},"TuiInputFilesComponent_ContentQueries"),viewQuery:__name(function(rf,ctx){if(1&rf&&(core.\u0275\u0275viewQuery(taiga_ui_kit_components_input_files_c0,5),core.\u0275\u0275viewQuery(_c1,5),core.\u0275\u0275viewQuery(_c2,5)),2&rf){let _t;core.\u0275\u0275queryRefresh(_t=core.\u0275\u0275loadQuery())&&(ctx.input=_t.first),core.\u0275\u0275queryRefresh(_t=core.\u0275\u0275loadQuery())&&(ctx.formatRejection=_t.first),core.\u0275\u0275queryRefresh(_t=core.\u0275\u0275loadQuery())&&(ctx.maxSizeRejection=_t.first)}},"TuiInputFilesComponent_Query"),hostBindings:__name(function(rf,ctx){1&rf&&core.\u0275\u0275listener("focusin",__name(function(){return ctx.onFocused(!0)},"TuiInputFilesComponent_focusin_HostBindingHandler"))("focusout",__name(function(){return ctx.onFocused(!1)},"TuiInputFilesComponent_focusout_HostBindingHandler"))("change",__name(function(){return ctx.onFilesSelected()},"TuiInputFilesComponent_change_HostBindingHandler"))},"TuiInputFilesComponent_HostBindings"),inputs:{link:"link",label:"label",accept:"accept",multiple:"multiple",size:"size",maxFileSize:"maxFileSize"},outputs:{reject:"reject"},features:[core.\u0275\u0275ProvidersFeature([taiga_ui_core_providers.CV,(0,taiga_ui_cdk_tokens.FT)(TuiInputFilesComponent)]),core.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:taiga_ui_kit_components_input_files_c0,decls:9,vars:12,consts:[["tuiWrapper","","appearance","input-file",1,"t-wrapper",3,"focus","hover","active","disabled"],["automation-id","tui-input-file__label",1,"t-label",3,"tuiDroppableDropped","tuiDroppableDragOverChange","mousedown.prevent.silent"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngIf"],["formatRejection",""],["maxSizeRejection",""],["tuiLink",""],[4,"polymorpheusOutlet"],["type","file",1,"t-native",3,"id","accept","multiple","tuiFocusable"],["input",""]],template:__name(function(rf,ctx){1&rf&&(core.\u0275\u0275projectionDef(_c3),core.\u0275\u0275elementStart(0,"div",0),core.\u0275\u0275elementStart(1,"label",1),core.\u0275\u0275listener("tuiDroppableDropped",__name(function($event){return ctx.onDropped($event)},"TuiInputFilesComponent_Template_label_tuiDroppableDropped_1_listener"))("tuiDroppableDragOverChange",__name(function($event){return ctx.onDragOver($event)},"TuiInputFilesComponent_Template_label_tuiDroppableDragOverChange_1_listener"))("mousedown.prevent.silent",__name(function(){return 0},"TuiInputFilesComponent_Template_label_mousedown_prevent_silent_1_listener")),core.\u0275\u0275template(2,TuiInputFilesComponent_ng_container_2_Template,1,0,"ng-container",2),core.\u0275\u0275template(3,TuiInputFilesComponent_ng_container_3_Template,6,6,"ng-container",3),core.\u0275\u0275template(4,TuiInputFilesComponent_ng_container_4_Template,4,4,"ng-container",3),core.\u0275\u0275elementEnd(),core.\u0275\u0275elementEnd(),core.\u0275\u0275template(5,TuiInputFilesComponent_ng_template_5_Template,2,3,"ng-template",null,4,core.\u0275\u0275templateRefExtractor),core.\u0275\u0275template(7,TuiInputFilesComponent_ng_template_7_Template,3,5,"ng-template",null,5,core.\u0275\u0275templateRefExtractor)),2&rf&&(core.\u0275\u0275classProp("_mobile",ctx.isMobile),core.\u0275\u0275property("focus",ctx.computedFocused)("hover",ctx.pseudoHover||ctx.fileDragged||null)("active",ctx.pseudoActive)("disabled",ctx.computedDisabled),core.\u0275\u0275advance(2),core.\u0275\u0275property("ngTemplateOutlet",ctx.template||null)("ngTemplateOutletContext",core.\u0275\u0275pureFunction1(10,_c4,ctx.fileDragged)),core.\u0275\u0275advance(1),core.\u0275\u0275property("ngIf",!ctx.template),core.\u0275\u0275advance(1),core.\u0275\u0275property("ngIf",!ctx.readOnly&&!ctx.computedDisabled))},"TuiInputFilesComponent_Template"),directives:[taiga_ui_core_directives_wrapper.o,TuiDroppableDirective,common.tP,common.O5,taiga_ui_core_components_link.V,tinkoff_ng_polymorpheus.Li,taiga_ui_cdk_directives_focusable.t],pipes:[common.Ov,TuiMaxSizeRejectionErrorPipe],styles:["tui-input-files{display:block;min-height:var(--tui-height-l);border-radius:var(--tui-radius-m);font:var(--tui-font-text-m)}tui-input-files .t-native{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;cursor:pointer}tui-input-files .t-native::-webkit-file-upload-button{display:none}tui-input-files .t-native+.t-native{display:none}tui-input-files .t-label{width:100%;text-align:center}[tuiWrapper][data-appearance=input-file]{display:flex;background:transparent;word-wrap:break-word;color:var(--tui-text-02);justify-content:center;align-items:center;min-height:inherit;border-radius:inherit;padding:0 .5rem;box-sizing:border-box}[tuiWrapper][data-appearance=input-file]:after{border:1px dashed;color:var(--tui-link)}[tuiWrapper][data-appearance=input-file]._mobile:after{border:1px solid}[tuiWrapper][data-appearance=input-file]:disabled:disabled,[tuiWrapper][data-appearance=input-file][data-state=disabled][data-state=disabled]{opacity:var(--tui-disabled-opacity);pointer-events:none}[tuiWrapper][data-appearance=input-file]:disabled:disabled:after,[tuiWrapper][data-appearance=input-file][data-state=disabled][data-state=disabled]:after{color:var(--tui-text-03)}[tuiWrapper][data-appearance=input-file]:focus-visible:focus-visible:after{border-style:solid;border-width:2px;color:var(--tui-focus)}[tuiWrapper][data-appearance=input-file]._focused._focused:after{border-style:solid;border-width:2px;color:var(--tui-focus)}[tuiWrapper][data-appearance=input-file][data-mode=onDark]{color:var(--tui-text-01-night)}[tuiWrapper][data-appearance=input-file][data-mode=onDark]:after{color:var(--tui-text-01-night)}[tuiWrapper][data-appearance=input-file][data-mode=onDark]:focus-visible:focus-visible:after{color:var(--tui-text-01-night)}[tuiWrapper][data-appearance=input-file][data-mode=onDark]._focused._focused:after{color:var(--tui-text-01-night)}@media (hover: hover){[tuiWrapper][data-appearance=input-file][data-mode=onDark]:hover:not(._no-hover),[tuiWrapper][data-appearance=input-file][data-mode=onDark][data-state=hover]{background:var(--tui-clear-inverse-hover)}[tuiWrapper][data-appearance=input-file][data-mode=onDark]:hover:not(._no-hover):after,[tuiWrapper][data-appearance=input-file][data-mode=onDark][data-state=hover]:after{color:var(--tui-text-03-night)}}[tuiWrapper][data-appearance=input-file][data-mode=onDark]:active:not(._no-active),[tuiWrapper][data-appearance=input-file][data-mode=onDark][data-state=active],[tuiWrapper][data-appearance=input-file][data-mode=onDark][data-state=active]:hover{background:var(--tui-clear-inverse-active)}[tuiWrapper][data-appearance=input-file][data-mode=onDark]:active:not(._no-active):after,[tuiWrapper][data-appearance=input-file][data-mode=onDark][data-state=active]:after,[tuiWrapper][data-appearance=input-file][data-mode=onDark][data-state=active]:hover:after{color:var(--tui-text-03-night)}[tuiWrapper][data-appearance=input-file][data-mode=onLight]{color:var(--tui-text-01)}[tuiWrapper][data-appearance=input-file][data-mode=onLight]:after{color:var(--tui-text-01)}@media (hover: hover){[tuiWrapper][data-appearance=input-file][data-mode=onLight]:hover:not(._no-hover),[tuiWrapper][data-appearance=input-file][data-mode=onLight][data-state=hover]{background:var(--tui-clear-hover)}[tuiWrapper][data-appearance=input-file][data-mode=onLight]:hover:not(._no-hover):after,[tuiWrapper][data-appearance=input-file][data-mode=onLight][data-state=hover]:after{color:var(--tui-text-03)}}[tuiWrapper][data-appearance=input-file][data-mode=onLight]:active:not(._no-active),[tuiWrapper][data-appearance=input-file][data-mode=onLight][data-state=active],[tuiWrapper][data-appearance=input-file][data-mode=onLight][data-state=active]:hover{background:var(--tui-clear-active)}[tuiWrapper][data-appearance=input-file][data-mode=onLight]:active:not(._no-active):after,[tuiWrapper][data-appearance=input-file][data-mode=onLight][data-state=active]:after,[tuiWrapper][data-appearance=input-file][data-mode=onLight][data-state=active]:hover:after{color:var(--tui-text-03)}@media (hover: hover){[tuiWrapper][data-appearance=input-file]:hover:not(._no-hover),[tuiWrapper][data-appearance=input-file][data-state=hover]{background:var(--tui-secondary)}[tuiWrapper][data-appearance=input-file]:hover:not(._no-hover):after,[tuiWrapper][data-appearance=input-file][data-state=hover]:after{color:var(--tui-link-hover)}}[tuiWrapper][data-appearance=input-file]:active:not(._no-active),[tuiWrapper][data-appearance=input-file][data-state=active],[tuiWrapper][data-appearance=input-file][data-state=active]:hover{background:var(--tui-secondary-hover)}\n"],encapsulation:2,changeDetection:0}),(0,tslib_es6.gn)([(0,taiga_ui_cdk_decorators.TH)()],TuiInputFilesComponent.prototype,"accept",void 0),(0,tslib_es6.gn)([(0,taiga_ui_cdk_decorators.TH)()],TuiInputFilesComponent.prototype,"multiple",void 0),(0,tslib_es6.gn)([(0,taiga_ui_cdk_decorators.TH)()],TuiInputFilesComponent.prototype,"size",void 0),(0,tslib_es6.gn)([(0,taiga_ui_cdk_decorators.TH)()],TuiInputFilesComponent.prototype,"maxFileSize",void 0),(0,tslib_es6.gn)([taiga_ui_cdk_decorators.UM],TuiInputFilesComponent.prototype,"computeLink$",null),(0,tslib_es6.gn)([taiga_ui_cdk_decorators.UM],TuiInputFilesComponent.prototype,"computeLabel$",null),(0,tslib_es6.gn)([taiga_ui_cdk_decorators.UM],TuiInputFilesComponent.prototype,"getValueArray",null);class TuiInputFilesModule{}__name(TuiInputFilesModule,"TuiInputFilesModule"),TuiInputFilesModule.\u0275fac=__name(function(t){return new(t||TuiInputFilesModule)},"TuiInputFilesModule_Factory"),TuiInputFilesModule.\u0275mod=core.\u0275\u0275defineNgModule({type:TuiInputFilesModule}),TuiInputFilesModule.\u0275inj=core.\u0275\u0275defineInjector({imports:[[common.ez,tinkoff_ng_polymorpheus.wq,taiga_ui_cdk_directives_let.WD,taiga_ui_cdk_directives_focused.F,taiga_ui_cdk_directives_focus_visible.c,taiga_ui_cdk_directives_pressed.f,taiga_ui_cdk_directives_hovered.VE,taiga_ui_cdk_directives_focusable.u,TuiDroppableModule,taiga_ui_core_directives_wrapper.W,taiga_ui_core_components_svg.EI,taiga_ui_core_components_link.j,taiga_ui_core_components_loader.dS,taiga_ui_core_components_button.fN,taiga_ui_core_components_group.n6,TuiFilesModule]]})}};