"use strict";var __defProp=Object.defineProperty,__name=(target,value)=>__defProp(target,"name",{value,configurable:!0});exports.id=948,exports.ids=[948],exports.modules={30948:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{PermissionsPageModule:()=>PermissionsPageModule});var core=__webpack_require__(74788),src=__webpack_require__(92176),cjs=__webpack_require__(72921),operators=__webpack_require__(57192);var permissions_src=__webpack_require__(98332),ngx_highlightjs=__webpack_require__(53867),common=__webpack_require__(12057);class PermissionsPageComponent{constructor(permissionsService,navigator){this.permissionsService=permissionsService,this.navigator=navigator,this.error$=new cjs.BehaviorSubject(null),this.basicSample="import { PermissionsService } from '@ng-web-apis/permissions';\n\n@Component({\n  selector: 'main',\n  template: `\n    <h2>Geolocation state: {{ geolocationState$ | async }}</h2>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class AppComponent {\n  geolocationState$ = this.permissionsService.state('geolocation');\n\n  constructor(\n    private readonly permissionsService: PermissionsService,\n  ) {}\n}\n",this.geolocationState$=this.permissionsService.state("geolocation").pipe((0,operators.bw)(state=>{"prompt"===state&&(alert("After you acknowledge this message the browser will ask your permission to allow location access!"),this.navigator.geolocation.getCurrentPosition(()=>{}))}),(0,operators.KQ)(error=>(this.error$.next(error.message),(0,cjs.of)(null))))}}__name(PermissionsPageComponent,"PermissionsPageComponent"),PermissionsPageComponent.\u0275fac=core.\u0275\u0275ngDeclareFactory({minVersion:"12.0.0",version:"12.2.15",ngImport:core,type:PermissionsPageComponent,deps:[{token:permissions_src.qQ},{token:src.s5}],target:core.\u0275\u0275FactoryTarget.Component}),PermissionsPageComponent.\u0275cmp=core.\u0275\u0275ngDeclareComponent({minVersion:"12.0.0",version:"12.2.15",type:PermissionsPageComponent,selector:"permissions-page",ngImport:core,template:'The following example shows basic usage of\n<code>PermissionsService</code>\n:\n\n<pre><code [highlight]="basicSample"></code></pre>\n\n<div *ngIf="error$ | async as error">\n    Unfortunately we could not show what the code snippet above would render due\n    to an error:\n    <br />\n    <b>{{ error }}</b>\n</div>\n\n<div *ngIf="geolocationState$ | async as geolocationState">\n    <p>The sample above would render the following:</p>\n\n    <hr />\n    <h2 class="align-center">Geolocation state: {{ geolocationState }}</h2>\n    <hr />\n\n    <p>\n        Go ahead and change your browser Location permission as shown below to\n        see this change reflected above.\n    </p>\n\n    <div class="align-center">\n        <img\n            src="assets/change-permissions-instructions.jpg"\n            alt="Click on \'View site information\' icon next to the address bar and change selected permission for Location"\n        />\n    </div>\n</div>\n',styles:[":host{display:block}\n"],directives:[{type:ngx_highlightjs.y$,selector:"[highlight]",inputs:["highlight","languages","lineNumbers"],outputs:["highlighted"]},{type:common.O5,selector:"[ngIf]",inputs:["ngIf","ngIfThen","ngIfElse"]}],pipes:{async:common.Ov},changeDetection:core.ChangeDetectionStrategy.OnPush}),core.\u0275\u0275ngDeclareClassMetadata({minVersion:"12.0.0",version:"12.2.15",ngImport:core,type:PermissionsPageComponent,decorators:[{type:core.Component,args:[{selector:"permissions-page",templateUrl:"./permissions-page.component.html",styleUrls:["./permissions-page.component.css"],changeDetection:core.ChangeDetectionStrategy.OnPush}]}],ctorParameters:function(){return[{type:permissions_src.qQ},{type:Navigator,decorators:[{type:core.Inject,args:[src.s5]}]}]}});var router=__webpack_require__(3984);class PermissionsPageModule{}__name(PermissionsPageModule,"PermissionsPageModule"),PermissionsPageModule.\u0275fac=core.\u0275\u0275ngDeclareFactory({minVersion:"12.0.0",version:"12.2.15",ngImport:core,type:PermissionsPageModule,deps:[],target:core.\u0275\u0275FactoryTarget.NgModule}),PermissionsPageModule.\u0275mod=core.\u0275\u0275ngDeclareNgModule({minVersion:"12.0.0",version:"12.2.15",ngImport:core,type:PermissionsPageModule,declarations:[PermissionsPageComponent],imports:[common.ez,ngx_highlightjs._l,router.Bz]}),PermissionsPageModule.\u0275inj=core.\u0275\u0275ngDeclareInjector({minVersion:"12.0.0",version:"12.2.15",ngImport:core,type:PermissionsPageModule,imports:[[common.ez,ngx_highlightjs._l,router.Bz.forChild([{path:"",component:PermissionsPageComponent}])]]}),core.\u0275\u0275ngDeclareClassMetadata({minVersion:"12.0.0",version:"12.2.15",ngImport:core,type:PermissionsPageModule,decorators:[{type:core.NgModule,args:[{imports:[common.ez,ngx_highlightjs._l,router.Bz.forChild([{path:"",component:PermissionsPageComponent}])],declarations:[PermissionsPageComponent]}]}]})},98332:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Yc:()=>PERMISSIONS_SUPPORT,qQ:()=>PermissionsService});var core=__webpack_require__(74788),cjs=__webpack_require__(72921),operators=__webpack_require__(57192),src=__webpack_require__(92176);const PERMISSIONS=new core.InjectionToken("An abstraction over window.navigator.permissions object",{factory:()=>(0,core.inject)(src.s5).permissions}),PERMISSIONS_SUPPORT=new core.InjectionToken("Is Permissions API supported?",{factory:()=>!!(0,core.inject)(PERMISSIONS)});class PermissionsService{constructor(permissions,permissionsSupported){this.permissions=permissions,this.permissionsSupported=permissionsSupported}state(nameOrDescriptor){const descriptor="string"==typeof nameOrDescriptor?{name:nameOrDescriptor}:nameOrDescriptor;return new cjs.Observable(subscriber=>{if(this.permissionsSupported)return(0,cjs.from)(this.permissions.query(descriptor)).pipe((0,operators.wt)(status=>(0,cjs.fromEvent)(status,"change").pipe((0,operators.O4)(null),(0,operators.UI)(()=>status.state)))).subscribe(subscriber);subscriber.error("Permissions is not supported in your browser")}).pipe((0,operators.d)({bufferSize:1,refCount:!0}))}}__name(PermissionsService,"PermissionsService"),PermissionsService.\u0275fac=core.\u0275\u0275ngDeclareFactory({minVersion:"12.0.0",version:"12.2.15",ngImport:core,type:PermissionsService,deps:[{token:PERMISSIONS},{token:PERMISSIONS_SUPPORT}],target:core.\u0275\u0275FactoryTarget.Injectable}),PermissionsService.\u0275prov=core.\u0275\u0275ngDeclareInjectable({minVersion:"12.0.0",version:"12.2.15",ngImport:core,type:PermissionsService,providedIn:"root"}),core.\u0275\u0275ngDeclareClassMetadata({minVersion:"12.0.0",version:"12.2.15",ngImport:core,type:PermissionsService,decorators:[{type:core.Injectable,args:[{providedIn:"root"}]}],ctorParameters:function(){return[{type:Permissions,decorators:[{type:core.Inject,args:[PERMISSIONS]}]},{type:void 0,decorators:[{type:core.Inject,args:[PERMISSIONS_SUPPORT]}]}]}})}};