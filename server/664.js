"use strict";var __defProp=Object.defineProperty,__name=(target,value)=>__defProp(target,"name",{value,configurable:!0});exports.id=664,exports.ids=[664],exports.modules={52372:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Tc:()=>WEB_AUDIO_SUPPORT});var cjs=__webpack_require__(72921),operators=__webpack_require__(57192),extendStatics=__name(function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)b2.hasOwnProperty(p)&&(d2[p]=b2[p])})(d,b)},"extendStatics");__name(function(d,b){function __(){this.constructor=d}extendStatics(d,b),__name(__,"__"),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},"__extends");function __decorate(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}function __metadata(metadataKey,metadataValue){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(metadataKey,metadataValue)}function __values(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}function __await(v){return this instanceof __await?(this.v=v,this):new __await(v)}__name(function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t},"__rest"),__name(__decorate,"__decorate"),__name(function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},"__param"),__name(__metadata,"__metadata"),__name(function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return __name(adopt,"adopt"),new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}__name(fulfilled,"fulfilled"),__name(rejected,"rejected"),__name(step,"step"),step((generator=generator.apply(thisArg,_arguments||[])).next())})},"__awaiter"),__name(function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},"__generator"),__name(function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]},"__createBinding"),__name(function(m,exports2){for(var p in m)"default"!==p&&!exports2.hasOwnProperty(p)&&(exports2[p]=m[p])},"__exportStar"),__name(__values,"__values"),__name(__read,"__read"),__name(function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar},"__spread"),__name(function(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;var r=Array(s),k=0;for(i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r},"__spreadArrays"),__name(__await,"__await"),__name(function(thisArg,_arguments,generator){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,g=generator.apply(thisArg,_arguments||[]),q=[];return i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i;function verb(n){g[n]&&(i[n]=function(v){return new Promise(function(a,b){q.push([n,v,a,b])>1||resume(n,v)})})}function resume(n,v){try{(r=g[n](v)).value instanceof __await?Promise.resolve(r.value.v).then(fulfill,reject):settle(q[0][2],r)}catch(e){settle(q[0][3],e)}var r}function fulfill(value){resume("next",value)}function reject(value){resume("throw",value)}function settle(f,v){f(v),q.shift(),q.length&&resume(q[0][0],q[0][1])}},"__asyncGenerator"),__name(function(o){var i,p;return i={},verb("next"),verb("throw",function(e){throw e}),verb("return"),i[Symbol.iterator]=function(){return this},i;function verb(n,f){i[n]=o[n]?function(v){return(p=!p)?{value:__await(o[n](v)),done:"return"===n}:f?f(v):v}:f}},"__asyncDelegator"),__name(function(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,m=o[Symbol.asyncIterator];return m?m.call(o):(o=__values(o),i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i);function verb(n){i[n]=o[n]&&function(v){return new Promise(function(resolve,reject){(function(resolve,reject,d,v){Promise.resolve(v).then(function(v2){resolve({value:v2,done:d})},reject)})(resolve,reject,(v=o[n](v)).done,v.value)})}}},"__asyncValues"),__name(function(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,"raw",{value:raw}):cooked.raw=raw,cooked},"__makeTemplateObject"),__name(function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result},"__importStar"),__name(function(mod){return mod&&mod.__esModule?mod:{default:mod}},"__importDefault"),__name(function(receiver,privateMap){if(!privateMap.has(receiver))throw new TypeError("attempted to get private field on non-instance");return privateMap.get(receiver)},"__classPrivateFieldGet"),__name(function(receiver,privateMap,value){if(!privateMap.has(receiver))throw new TypeError("attempted to set private field on non-instance");return privateMap.set(receiver,value),value},"__classPrivateFieldSet");var core=__webpack_require__(74788);function processAudioParam(param,value,currentTime=0){param.cancelAndHoldAtTime?param.cancelAndHoldAtTime(currentTime):(param.cancelScheduledValues(currentTime),param.setValueAtTime(guard(param.value),currentTime)),"number"!=typeof value?value instanceof Array?processSchedule(param,value,currentTime):"mode"in value?(param.setValueAtTime(guard(param.value),currentTime),processAutomation(param,value,currentTime)):param.setValueCurveAtTime(value.value,currentTime,value.duration):param.setValueAtTime(guard(value),currentTime)}function processSchedule(param,value,currentTime){value.forEach(automation=>{"mode"in automation?processAutomation(param,automation,currentTime):param.setValueCurveAtTime(automation.value,currentTime,automation.duration),currentTime+=automation.duration})}function processAutomation(param,{value,mode="instant",duration},currentTime){switch(mode){case"instant":param.setValueAtTime(guard(value),currentTime),param.setValueAtTime(guard(value),currentTime+duration);break;case"exponential":value<0||value*param.value<0?param.linearRampToValueAtTime(guard(value),currentTime+duration):param.exponentialRampToValueAtTime(guard(value),currentTime+duration),param.setValueAtTime(guard(value),currentTime+duration);break;case"linear":param.linearRampToValueAtTime(guard(value),currentTime+duration)}}function guard(v){return v||1e-8}function audioParam(param=""){return __name((target,propertyKey)=>{Object.defineProperty(target,propertyKey,{set(value){value="string"==typeof value?Number.parseFloat(value):value;const audioParam2=this instanceof AudioWorkletNode?this.parameters.get(propertyKey):this[param];audioParam2 instanceof AudioParam?processAudioParam(audioParam2,value,this.context.currentTime):Object.defineProperty(target,propertyKey,{value})}})},"decorator")}__name(processAudioParam,"processAudioParam"),__name(processSchedule,"processSchedule"),__name(processAutomation,"processAutomation"),__name(guard,"guard"),__name(audioParam,"audioParam");const AUDIO_CONTEXT=new core.InjectionToken("Web Audio API context",{providedIn:"root",factory:()=>new AudioContext});function latencyHintFactory(latencyHint){return null===latencyHint?void 0:Number.parseFloat(latencyHint)||latencyHint}__name(latencyHintFactory,"latencyHintFactory");class WebAudioContext extends AudioContext{constructor(latencyHint,sampleRate){super({latencyHint:latencyHintFactory(latencyHint),sampleRate:parseInt(sampleRate||"",10)||void 0})}ngOnDestroy(){this.close()}}__name(WebAudioContext,"WebAudioContext"),WebAudioContext.\u0275fac=__name(function(t){return new(t||WebAudioContext)(core.\u0275\u0275injectAttribute("latencyHint"),core.\u0275\u0275injectAttribute("sampleRate"))},"WebAudioContext_Factory"),WebAudioContext.\u0275dir=core.\u0275\u0275defineDirective({type:WebAudioContext,selectors:[["","waAudioContext",""]],features:[core.\u0275\u0275ProvidersFeature([{provide:AUDIO_CONTEXT,useExisting:(0,core.forwardRef)(()=>WebAudioContext)}]),core.\u0275\u0275InheritDefinitionFeature]}),WebAudioContext.ctorParameters=()=>[{type:void 0,decorators:[{type:core.Attribute,args:["latencyHint"]}]},{type:void 0,decorators:[{type:core.Attribute,args:["sampleRate"]}]}];const CONSTRUCTOR_SUPPORT=new core.InjectionToken("Tests if constructor mode of node creation is supported or a fallback to factory method is needed",{providedIn:"root",factory:()=>{try{return!!new GainNode((0,core.inject)(AUDIO_CONTEXT))}catch(_){return!1}}});class WebAudioChannel extends GainNode{constructor(context,modern){if(!modern){const result=context.createGain();return Object.setPrototypeOf(result,WebAudioChannel.prototype),result}super(context)}ngOnDestroy(){this.disconnect()}}__name(WebAudioChannel,"WebAudioChannel"),WebAudioChannel.\u0275fac=__name(function(t){return new(t||WebAudioChannel)(core.\u0275\u0275directiveInject(AUDIO_CONTEXT),core.\u0275\u0275directiveInject(CONSTRUCTOR_SUPPORT))},"WebAudioChannel_Factory"),WebAudioChannel.\u0275dir=core.\u0275\u0275defineDirective({type:WebAudioChannel,selectors:[["","waChannel",""]],exportAs:["AudioNode"],features:[core.\u0275\u0275InheritDefinitionFeature]}),WebAudioChannel.ctorParameters=()=>[{type:BaseAudioContext,decorators:[{type:core.Inject,args:[AUDIO_CONTEXT]}]},{type:Boolean,decorators:[{type:core.Inject,args:[CONSTRUCTOR_SUPPORT]}]}];const AUDIO_NODE=new core.InjectionToken("Web Audio API audio node",{factory:()=>null});function connect(source,destination){source&&destination&&source.connect(destination)}__name(connect,"connect");class WebAudioDestination extends AnalyserNode{constructor(context,node,modern){if(!modern){const result=context.createAnalyser();return Object.setPrototypeOf(result,WebAudioDestination.prototype),WebAudioDestination.init(result,node),result}super(context),WebAudioDestination.init(this,node)}ngOnDestroy(){this.disconnect()}isSilent(array){return Math.abs(array.reduce((acc,cur)=>acc+cur,0))<.001}static init(that,node){connect(node,that),that.fftSize=256,that.connect(that.context.destination),that.quiet=(0,cjs.interval)(100).pipe((0,operators.hZ)(new Float32Array(that.fftSize)),(0,operators.bw)(array=>that.getFloatTimeDomainData(array)),(0,operators.UI)(array=>that.isSilent(array)),(0,operators.xb)(),(0,operators.nF)(isSilent=>isSilent),(0,operators.bh)(5e3),(0,operators.hX)(isSilent=>isSilent))}}function fallbackAudioParam(value){if(!value)return 0;if("number"==typeof value)return value;if(value instanceof Array){const last=value[value.length-1].value;return"number"==typeof last?last:last[last.length-1]}return value.value instanceof Array?value.value[value.value.length-1]:value.value}__name(WebAudioDestination,"WebAudioDestination"),WebAudioDestination.\u0275fac=__name(function(t){return new(t||WebAudioDestination)(core.\u0275\u0275directiveInject(AUDIO_CONTEXT),core.\u0275\u0275directiveInject(AUDIO_NODE),core.\u0275\u0275directiveInject(CONSTRUCTOR_SUPPORT))},"WebAudioDestination_Factory"),WebAudioDestination.\u0275dir=core.\u0275\u0275defineDirective({type:WebAudioDestination,selectors:[["","waAudioDestinationNode",""]],outputs:{quiet:"quiet"},exportAs:["AudioNode"],features:[core.\u0275\u0275InheritDefinitionFeature]}),WebAudioDestination.ctorParameters=()=>[{type:BaseAudioContext,decorators:[{type:core.Inject,args:[AUDIO_CONTEXT]}]},{type:void 0,decorators:[{type:core.Inject,args:[AUDIO_NODE]}]},{type:Boolean,decorators:[{type:core.Inject,args:[CONSTRUCTOR_SUPPORT]}]}],WebAudioDestination.propDecorators={quiet:[{type:core.Output}]},__name(fallbackAudioParam,"fallbackAudioParam");class WebAudioListener extends GainNode{constructor(context,modern){if(!modern){const result=context.createGain();return Object.setPrototypeOf(result,WebAudioListener.prototype),result}super(context)}get forwardX(){return this.context.listener.forwardX}get forwardY(){return this.context.listener.forwardY}get forwardZ(){return this.context.listener.forwardZ}get positionX(){return this.context.listener.positionX}get positionY(){return this.context.listener.positionY}get positionZ(){return this.context.listener.positionZ}get upX(){return this.context.listener.upX}get upY(){return this.context.listener.upY}get upZ(){return this.context.listener.upZ}ngOnChanges(){this.context.listener.positionX instanceof AudioParam||(this.context.listener.setOrientation(fallbackAudioParam(this.forwardXParam),fallbackAudioParam(this.forwardYParam),fallbackAudioParam(this.forwardZParam),fallbackAudioParam(this.upXParam),fallbackAudioParam(this.upYParam),fallbackAudioParam(this.upZParam)),this.context.listener.setPosition(fallbackAudioParam(this.positionXParam),fallbackAudioParam(this.positionYParam),fallbackAudioParam(this.positionZParam)))}}__name(WebAudioListener,"WebAudioListener"),WebAudioListener.\u0275fac=__name(function(t){return new(t||WebAudioListener)(core.\u0275\u0275directiveInject(AUDIO_CONTEXT,2),core.\u0275\u0275directiveInject(CONSTRUCTOR_SUPPORT))},"WebAudioListener_Factory"),WebAudioListener.\u0275dir=core.\u0275\u0275defineDirective({type:WebAudioListener,selectors:[["","waAudioContext",""],["","waOfflineAudioContext","","length","","sampleRate",""]],inputs:{forwardXParam:["forwardX","forwardXParam"],forwardYParam:["forwardY","forwardYParam"],forwardZParam:["forwardZ","forwardZParam"],positionXParam:["positionX","positionXParam"],positionYParam:["positionY","positionYParam"],positionZParam:["positionZ","positionZParam"],upXParam:["upX","upXParam"],upYParam:["upY","upYParam"],upZParam:["upZ","upZParam"]},features:[core.\u0275\u0275InheritDefinitionFeature,core.\u0275\u0275NgOnChangesFeature]}),WebAudioListener.ctorParameters=()=>[{type:BaseAudioContext,decorators:[{type:core.Self},{type:core.Inject,args:[AUDIO_CONTEXT]}]},{type:Boolean,decorators:[{type:core.Inject,args:[CONSTRUCTOR_SUPPORT]}]}],WebAudioListener.propDecorators={forwardXParam:[{type:core.Input,args:["forwardX"]}],forwardYParam:[{type:core.Input,args:["forwardY"]}],forwardZParam:[{type:core.Input,args:["forwardZ"]}],positionXParam:[{type:core.Input,args:["positionX"]}],positionYParam:[{type:core.Input,args:["positionY"]}],positionZParam:[{type:core.Input,args:["positionZ"]}],upXParam:[{type:core.Input,args:["upX"]}],upYParam:[{type:core.Input,args:["upY"]}],upZParam:[{type:core.Input,args:["upZ"]}]},__decorate([audioParam("forwardX"),__metadata("design:type",Object)],WebAudioListener.prototype,"forwardXParam",void 0),__decorate([audioParam("forwardY"),__metadata("design:type",Object)],WebAudioListener.prototype,"forwardYParam",void 0),__decorate([audioParam("forwardZ"),__metadata("design:type",Object)],WebAudioListener.prototype,"forwardZParam",void 0),__decorate([audioParam("positionX"),__metadata("design:type",Object)],WebAudioListener.prototype,"positionXParam",void 0),__decorate([audioParam("positionY"),__metadata("design:type",Object)],WebAudioListener.prototype,"positionYParam",void 0),__decorate([audioParam("positionZ"),__metadata("design:type",Object)],WebAudioListener.prototype,"positionZParam",void 0),__decorate([audioParam("upX"),__metadata("design:type",Object)],WebAudioListener.prototype,"upXParam",void 0),__decorate([audioParam("upY"),__metadata("design:type",Object)],WebAudioListener.prototype,"upYParam",void 0),__decorate([audioParam("upZ"),__metadata("design:type",Object)],WebAudioListener.prototype,"upZParam",void 0);class WebAudioOfflineContext extends OfflineAudioContext{constructor(length,sampleRate,numberOfChannels,autoplay){super(parseInt(numberOfChannels||"",10)||1,parseInt(length,10),parseInt(sampleRate,10)),this.complete=new core.EventEmitter,this.oncomplete=({renderedBuffer})=>this.complete.emit(renderedBuffer),null!==autoplay&&this.startRendering()}}__name(WebAudioOfflineContext,"WebAudioOfflineContext"),WebAudioOfflineContext.\u0275fac=__name(function(t){return new(t||WebAudioOfflineContext)(core.\u0275\u0275injectAttribute("length"),core.\u0275\u0275injectAttribute("sampleRate"),core.\u0275\u0275injectAttribute("numberOfChannels"),core.\u0275\u0275injectAttribute("autoplay"))},"WebAudioOfflineContext_Factory"),WebAudioOfflineContext.\u0275dir=core.\u0275\u0275defineDirective({type:WebAudioOfflineContext,selectors:[["","waOfflineAudioContext","","length","","sampleRate",""]],outputs:{complete:"complete"},features:[core.\u0275\u0275ProvidersFeature([{provide:AUDIO_CONTEXT,useExisting:(0,core.forwardRef)(()=>WebAudioOfflineContext)}]),core.\u0275\u0275InheritDefinitionFeature]}),WebAudioOfflineContext.ctorParameters=()=>[{type:String,decorators:[{type:core.Attribute,args:["length"]}]},{type:String,decorators:[{type:core.Attribute,args:["sampleRate"]}]},{type:void 0,decorators:[{type:core.Attribute,args:["numberOfChannels"]}]},{type:void 0,decorators:[{type:core.Attribute,args:["autoplay"]}]}],WebAudioOfflineContext.propDecorators={complete:[{type:core.Output}]};class WebAudioOutput extends GainNode{constructor(context,node,modern){if(!modern){const result=context.createGain();return Object.setPrototypeOf(result,WebAudioOutput.prototype),connect(node,result),result}super(context),connect(node,this)}set waOutput(destination){this.disconnect(),connect(this,destination)}ngOnDestroy(){this.disconnect()}static init(that,node){connect(node,that)}}__name(WebAudioOutput,"WebAudioOutput"),WebAudioOutput.\u0275fac=__name(function(t){return new(t||WebAudioOutput)(core.\u0275\u0275directiveInject(AUDIO_CONTEXT),core.\u0275\u0275directiveInject(AUDIO_NODE),core.\u0275\u0275directiveInject(CONSTRUCTOR_SUPPORT))},"WebAudioOutput_Factory"),WebAudioOutput.\u0275dir=core.\u0275\u0275defineDirective({type:WebAudioOutput,selectors:[["","waOutput",""]],inputs:{waOutput:"waOutput"},features:[core.\u0275\u0275InheritDefinitionFeature]}),WebAudioOutput.ctorParameters=()=>[{type:BaseAudioContext,decorators:[{type:core.Inject,args:[AUDIO_CONTEXT]}]},{type:void 0,decorators:[{type:core.Inject,args:[AUDIO_NODE]}]},{type:Boolean,decorators:[{type:core.Inject,args:[CONSTRUCTOR_SUPPORT]}]}],WebAudioOutput.propDecorators={waOutput:[{type:core.Input}]};class WebAudioMediaStreamDestination extends MediaStreamAudioDestinationNode{constructor(context,node,modern){if(!modern){const result=context.createMediaStreamDestination();return Object.setPrototypeOf(result,WebAudioMediaStreamDestination.prototype),connect(node,result),result}super(context),connect(node,this)}}function parse(value,fallback){const parsed=parseFloat(value||"");return isNaN(parsed)?fallback:parsed}__name(WebAudioMediaStreamDestination,"WebAudioMediaStreamDestination"),WebAudioMediaStreamDestination.\u0275fac=__name(function(t){return new(t||WebAudioMediaStreamDestination)(core.\u0275\u0275directiveInject(AUDIO_CONTEXT),core.\u0275\u0275directiveInject(AUDIO_NODE),core.\u0275\u0275directiveInject(CONSTRUCTOR_SUPPORT))},"WebAudioMediaStreamDestination_Factory"),WebAudioMediaStreamDestination.\u0275dir=core.\u0275\u0275defineDirective({type:WebAudioMediaStreamDestination,selectors:[["","waMediaStreamAudioDestinationNode",""]],exportAs:["AudioNode"],features:[core.\u0275\u0275InheritDefinitionFeature]}),WebAudioMediaStreamDestination.ctorParameters=()=>[{type:AudioContext,decorators:[{type:core.Inject,args:[AUDIO_CONTEXT]}]},{type:void 0,decorators:[{type:core.Inject,args:[AUDIO_NODE]}]},{type:Boolean,decorators:[{type:core.Inject,args:[CONSTRUCTOR_SUPPORT]}]}],__name(parse,"parse");class WebAudioAnalyser extends AnalyserNode{constructor(context,node,modern,fftSizeArg,maxDecibelsArg,minDecibelsArg,smoothingTimeConstantArg){const fftSize=parse(fftSizeArg,2048),maxDecibels=parse(maxDecibelsArg,-30),minDecibels=parse(minDecibelsArg,-100),smoothingTimeConstant=parse(smoothingTimeConstantArg,.8);if(!modern){const result=context.createAnalyser();return Object.setPrototypeOf(result,WebAudioAnalyser.prototype),WebAudioAnalyser.init(result,node),result.fftSize=fftSize,result.maxDecibels=maxDecibels,result.minDecibels=minDecibels,result.smoothingTimeConstant=smoothingTimeConstant,result}super(context,{fftSize,maxDecibels,minDecibels,smoothingTimeConstant}),WebAudioAnalyser.init(this,node)}ngOnDestroy(){this.disconnect()}static init(that,node){connect(node,that);let freqByte=new Uint8Array(that.frequencyBinCount),freqFloat=new Float32Array(that.frequencyBinCount),timeByte=new Uint8Array(that.fftSize),timeFloat=new Float32Array(that.fftSize);that.frequencyByte$=(0,cjs.interval)(0,cjs.animationFrameScheduler).pipe((0,operators.UI)(()=>(freqByte.length!==that.frequencyBinCount&&(freqByte=new Uint8Array(that.frequencyBinCount)),that.getByteFrequencyData(freqByte),freqByte)),(0,operators.BN)()),that.frequencyFloat$=(0,cjs.interval)(0,cjs.animationFrameScheduler).pipe((0,operators.UI)(()=>(freqFloat.length!==that.frequencyBinCount&&(freqFloat=new Float32Array(that.frequencyBinCount)),that.getFloatFrequencyData(freqFloat),freqFloat)),(0,operators.BN)()),that.timeByte$=(0,cjs.interval)(0,cjs.animationFrameScheduler).pipe((0,operators.UI)(()=>(timeByte.length!==that.fftSize&&(timeByte=new Uint8Array(that.frequencyBinCount)),that.getByteTimeDomainData(timeByte),timeByte)),(0,operators.BN)()),that.timeFloat$=(0,cjs.interval)(0,cjs.animationFrameScheduler).pipe((0,operators.UI)(()=>(timeFloat.length!==that.fftSize&&(timeFloat=new Float32Array(that.frequencyBinCount)),that.getFloatTimeDomainData(timeFloat),timeFloat)),(0,operators.BN)())}}__name(WebAudioAnalyser,"WebAudioAnalyser"),WebAudioAnalyser.\u0275fac=__name(function(t){return new(t||WebAudioAnalyser)(core.\u0275\u0275directiveInject(AUDIO_CONTEXT),core.\u0275\u0275directiveInject(AUDIO_NODE,4),core.\u0275\u0275directiveInject(CONSTRUCTOR_SUPPORT),core.\u0275\u0275injectAttribute("fftSize"),core.\u0275\u0275injectAttribute("maxDecibels"),core.\u0275\u0275injectAttribute("minDecibels"),core.\u0275\u0275injectAttribute("smoothingTimeConstant"))},"WebAudioAnalyser_Factory"),WebAudioAnalyser.\u0275dir=core.\u0275\u0275defineDirective({type:WebAudioAnalyser,selectors:[["","waAnalyserNode",""]],inputs:{fftSize:"fftSize",minDecibels:"minDecibels",maxDecibels:"maxDecibels",smoothingTimeConstant:"smoothingTimeConstant",channelCount:"channelCount",channelCountMode:"channelCountMode",channelInterpretation:"channelInterpretation"},outputs:{frequencyByte$:"frequencyByte$",frequencyFloat$:"frequencyFloat$",timeByte$:"timeByte$",timeFloat$:"timeFloat$"},exportAs:["AudioNode"],features:[core.\u0275\u0275ProvidersFeature([{provide:AUDIO_NODE,useExisting:(0,core.forwardRef)(()=>WebAudioAnalyser)}]),core.\u0275\u0275InheritDefinitionFeature]}),WebAudioAnalyser.ctorParameters=()=>[{type:BaseAudioContext,decorators:[{type:core.Inject,args:[AUDIO_CONTEXT]}]},{type:void 0,decorators:[{type:core.SkipSelf},{type:core.Inject,args:[AUDIO_NODE]}]},{type:Boolean,decorators:[{type:core.Inject,args:[CONSTRUCTOR_SUPPORT]}]},{type:void 0,decorators:[{type:core.Attribute,args:["fftSize"]}]},{type:void 0,decorators:[{type:core.Attribute,args:["maxDecibels"]}]},{type:void 0,decorators:[{type:core.Attribute,args:["minDecibels"]}]},{type:void 0,decorators:[{type:core.Attribute,args:["smoothingTimeConstant"]}]}],WebAudioAnalyser.propDecorators={frequencyByte$:[{type:core.Output}],frequencyFloat$:[{type:core.Output}],timeByte$:[{type:core.Output}],timeFloat$:[{type:core.Output}]};class WebAudioBiquadFilter extends BiquadFilterNode{constructor(context,modern,node,detuneArg,frequencyArg,gainArg,QArg){const detune=parse(detuneArg,0),frequency=parse(frequencyArg,350),gain=parse(gainArg,0),Q=parse(QArg,1);if(!modern){const result=context.createBiquadFilter();return Object.setPrototypeOf(result,WebAudioBiquadFilter.prototype),result.detune.value=detune,result.frequency.value=frequency,result.gain.value=gain,result.Q.value=Q,connect(node,result),result}super(context,{detune,frequency,gain,Q}),connect(node,this)}ngOnDestroy(){this.disconnect()}static init(that,node){connect(node,that)}}__name(WebAudioBiquadFilter,"WebAudioBiquadFilter"),WebAudioBiquadFilter.\u0275fac=__name(function(t){return new(t||WebAudioBiquadFilter)(core.\u0275\u0275directiveInject(AUDIO_CONTEXT),core.\u0275\u0275directiveInject(CONSTRUCTOR_SUPPORT),core.\u0275\u0275directiveInject(AUDIO_NODE,4),core.\u0275\u0275injectAttribute("detune"),core.\u0275\u0275injectAttribute("frequency"),core.\u0275\u0275injectAttribute("gain"),core.\u0275\u0275injectAttribute("Q"))},"WebAudioBiquadFilter_Factory"),WebAudioBiquadFilter.\u0275dir=core.\u0275\u0275defineDirective({type:WebAudioBiquadFilter,selectors:[["","waBiquadFilterNode",""]],inputs:{type:"type",channelCount:"channelCount",channelCountMode:"channelCountMode",channelInterpretation:"channelInterpretation",detuneParam:["detune","detuneParam"],frequencyParam:["frequency","frequencyParam"],gainParam:["gain","gainParam"],qParam:["Q","qParam"]},exportAs:["AudioNode"],features:[core.\u0275\u0275ProvidersFeature([{provide:AUDIO_NODE,useExisting:(0,core.forwardRef)(()=>WebAudioBiquadFilter)}]),core.\u0275\u0275InheritDefinitionFeature]}),WebAudioBiquadFilter.ctorParameters=()=>[{type:BaseAudioContext,decorators:[{type:core.Inject,args:[AUDIO_CONTEXT]}]},{type:Boolean,decorators:[{type:core.Inject,args:[CONSTRUCTOR_SUPPORT]}]},{type:void 0,decorators:[{type:core.SkipSelf},{type:core.Inject,args:[AUDIO_NODE]}]},{type:void 0,decorators:[{type:core.Attribute,args:["detune"]}]},{type:void 0,decorators:[{type:core.Attribute,args:["frequency"]}]},{type:void 0,decorators:[{type:core.Attribute,args:["gain"]}]},{type:void 0,decorators:[{type:core.Attribute,args:["Q"]}]}],WebAudioBiquadFilter.propDecorators={detuneParam:[{type:core.Input,args:["detune"]}],frequencyParam:[{type:core.Input,args:["frequency"]}],gainParam:[{type:core.Input,args:["gain"]}],qParam:[{type:core.Input,args:["Q"]}]},__decorate([audioParam("detune"),__metadata("design:type",Object)],WebAudioBiquadFilter.prototype,"detuneParam",void 0),__decorate([audioParam("frequency"),__metadata("design:type",Object)],WebAudioBiquadFilter.prototype,"frequencyParam",void 0),__decorate([audioParam("gain"),__metadata("design:type",Object)],WebAudioBiquadFilter.prototype,"gainParam",void 0),__decorate([audioParam("Q"),__metadata("design:type",Object)],WebAudioBiquadFilter.prototype,"qParam",void 0);class WebAudioChannelMerger extends ChannelMergerNode{constructor(inputs,context,modern){const numberOfInputs=parseInt(inputs||"",10)||6;if(!modern){const result=context.createChannelMerger(numberOfInputs);return Object.setPrototypeOf(result,WebAudioChannelMerger.prototype),result}super(context,{numberOfInputs})}set channels(channels){channels.forEach((node,index)=>{node.connect(this,0,index)})}ngOnDestroy(){this.disconnect()}}__name(WebAudioChannelMerger,"WebAudioChannelMerger"),WebAudioChannelMerger.\u0275fac=__name(function(t){return new(t||WebAudioChannelMerger)(core.\u0275\u0275injectAttribute("numberOfInputs"),core.\u0275\u0275directiveInject(AUDIO_CONTEXT),core.\u0275\u0275directiveInject(CONSTRUCTOR_SUPPORT))},"WebAudioChannelMerger_Factory"),WebAudioChannelMerger.\u0275dir=core.\u0275\u0275defineDirective({type:WebAudioChannelMerger,selectors:[["","waChannelMergerNode",""]],contentQueries:__name(function(rf,ctx,dirIndex){if(1&rf&&core.\u0275\u0275contentQuery(dirIndex,WebAudioChannel,4),2&rf){let _t;core.\u0275\u0275queryRefresh(_t=core.\u0275\u0275loadQuery())&&(ctx.channels=_t)}},"WebAudioChannelMerger_ContentQueries"),inputs:{channelCount:"channelCount",channelCountMode:"channelCountMode",channelInterpretation:"channelInterpretation"},exportAs:["AudioNode"],features:[core.\u0275\u0275ProvidersFeature([{provide:AUDIO_NODE,useExisting:(0,core.forwardRef)(()=>WebAudioChannelMerger)}]),core.\u0275\u0275InheritDefinitionFeature]}),WebAudioChannelMerger.ctorParameters=()=>[{type:void 0,decorators:[{type:core.Attribute,args:["numberOfInputs"]}]},{type:BaseAudioContext,decorators:[{type:core.Inject,args:[AUDIO_CONTEXT]}]},{type:Boolean,decorators:[{type:core.Inject,args:[CONSTRUCTOR_SUPPORT]}]}],WebAudioChannelMerger.propDecorators={channels:[{type:core.ContentChildren,args:[WebAudioChannel,{descendants:!1}]}]};class WebAudioChannelSplitter extends ChannelSplitterNode{constructor(outputs,context,node,modern){const numberOfOutputs=parseInt(outputs||"",10)||6;if(!modern){const result=context.createChannelSplitter(numberOfOutputs);return Object.setPrototypeOf(result,WebAudioChannelSplitter.prototype),connect(node,result),result}super(context,{numberOfOutputs}),connect(node,this)}set channels(channels){this.disconnect(),channels.filter(node=>!!node).forEach((node,index)=>{this.connect(node,index)})}ngOnDestroy(){this.disconnect()}}__name(WebAudioChannelSplitter,"WebAudioChannelSplitter"),WebAudioChannelSplitter.\u0275fac=__name(function(t){return new(t||WebAudioChannelSplitter)(core.\u0275\u0275injectAttribute("numberOfOutputs"),core.\u0275\u0275directiveInject(AUDIO_CONTEXT),core.\u0275\u0275directiveInject(AUDIO_NODE,4),core.\u0275\u0275directiveInject(CONSTRUCTOR_SUPPORT))},"WebAudioChannelSplitter_Factory"),WebAudioChannelSplitter.\u0275dir=core.\u0275\u0275defineDirective({type:WebAudioChannelSplitter,selectors:[["","waChannelSplitterNode",""]],contentQueries:__name(function(rf,ctx,dirIndex){if(1&rf&&core.\u0275\u0275contentQuery(dirIndex,AUDIO_NODE,4),2&rf){let _t;core.\u0275\u0275queryRefresh(_t=core.\u0275\u0275loadQuery())&&(ctx.channels=_t)}},"WebAudioChannelSplitter_ContentQueries"),inputs:{channelCount:"channelCount",channelCountMode:"channelCountMode",channelInterpretation:"channelInterpretation"},exportAs:["AudioNode"],features:[core.\u0275\u0275ProvidersFeature([{provide:AUDIO_NODE,useValue:null}]),core.\u0275\u0275InheritDefinitionFeature]}),WebAudioChannelSplitter.ctorParameters=()=>[{type:void 0,decorators:[{type:core.Attribute,args:["numberOfOutputs"]}]},{type:BaseAudioContext,decorators:[{type:core.Inject,args:[AUDIO_CONTEXT]}]},{type:void 0,decorators:[{type:core.SkipSelf},{type:core.Inject,args:[AUDIO_NODE]}]},{type:Boolean,decorators:[{type:core.Inject,args:[CONSTRUCTOR_SUPPORT]}]}],WebAudioChannelSplitter.propDecorators={channels:[{type:core.ContentChildren,args:[AUDIO_NODE,{descendants:!1}]}]};class AudioBufferService{constructor(context){this.context=context,this.cache=new Map}fetch(url){return new Promise((resolve,reject)=>{if(this.cache.has(url))return void resolve(this.cache.get(url));const request=new XMLHttpRequest;request.open("GET",url,!0),request.responseType="arraybuffer",request.onerror=reject,request.onabort=reject,request.onload=()=>{this.context.decodeAudioData(request.response,buffer=>{this.cache.set(url,buffer),resolve(buffer)},reject)},request.send()})}}__name(AudioBufferService,"AudioBufferService"),AudioBufferService.\u0275fac=__name(function(t){return new(t||AudioBufferService)(core.\u0275\u0275inject(AUDIO_CONTEXT))},"AudioBufferService_Factory"),AudioBufferService.\u0275prov=core.\u0275\u0275defineInjectable({token:AudioBufferService,factory:AudioBufferService.\u0275fac,providedIn:"root"}),AudioBufferService.ctorParameters=()=>[{type:BaseAudioContext,decorators:[{type:core.Inject,args:[AUDIO_CONTEXT]}]}],AudioBufferService.ngInjectableDef=(0,core.defineInjectable)({factory:__name(function(){return new AudioBufferService((0,core.inject)(AUDIO_CONTEXT))},"AudioBufferService_Factory"),token:AudioBufferService,providedIn:"root"});class WebAudioConvolver extends ConvolverNode{constructor(audioBufferService,context,node,modern){if(!modern){const result=context.createConvolver();return Object.setPrototypeOf(result,WebAudioConvolver.prototype),WebAudioConvolver.init(result,node,audioBufferService),result}super(context),WebAudioConvolver.init(this,node,audioBufferService)}set bufferSetter(source){this.buffer$.next(source)}ngOnDestroy(){this.buffer$.complete(),this.disconnect()}static init(that,node,audioBufferService){connect(node,that),that.buffer$=new cjs.Subject,that.buffer$.pipe((0,operators.wt)(source=>"string"==typeof source?audioBufferService.fetch(source):(0,cjs.of)(source))).subscribe(buffer=>{that.buffer=buffer})}}__name(WebAudioConvolver,"WebAudioConvolver"),WebAudioConvolver.\u0275fac=__name(function(t){return new(t||WebAudioConvolver)(core.\u0275\u0275directiveInject(AudioBufferService),core.\u0275\u0275directiveInject(AUDIO_CONTEXT),core.\u0275\u0275directiveInject(AUDIO_NODE,4),core.\u0275\u0275directiveInject(CONSTRUCTOR_SUPPORT))},"WebAudioConvolver_Factory"),WebAudioConvolver.\u0275dir=core.\u0275\u0275defineDirective({type:WebAudioConvolver,selectors:[["","waConvolverNode",""]],inputs:{normalize:"normalize",channelCount:"channelCount",channelCountMode:"channelCountMode",channelInterpretation:"channelInterpretation",bufferSetter:["buffer","bufferSetter"]},exportAs:["AudioNode"],features:[core.\u0275\u0275ProvidersFeature([{provide:AUDIO_NODE,useExisting:(0,core.forwardRef)(()=>WebAudioConvolver)}]),core.\u0275\u0275InheritDefinitionFeature]}),WebAudioConvolver.ctorParameters=()=>[{type:AudioBufferService,decorators:[{type:core.Inject,args:[AudioBufferService]}]},{type:BaseAudioContext,decorators:[{type:core.Inject,args:[AUDIO_CONTEXT]}]},{type:void 0,decorators:[{type:core.SkipSelf},{type:core.Inject,args:[AUDIO_NODE]}]},{type:Boolean,decorators:[{type:core.Inject,args:[CONSTRUCTOR_SUPPORT]}]}],WebAudioConvolver.propDecorators={bufferSetter:[{type:core.Input,args:["buffer"]}]};class WebAudioDelay extends DelayNode{constructor(context,node,modern,delayTimeArg,maxDelayTimeArg){const delayTime=parse(delayTimeArg,0),maxDelayTime=parse(maxDelayTimeArg,1);if(!modern){const result=context.createDelay(maxDelayTime);return Object.setPrototypeOf(result,WebAudioDelay.prototype),connect(node,result),result.delayTime.value=delayTime,result}super(context,{delayTime,maxDelayTime}),connect(node,this)}ngOnDestroy(){this.disconnect()}static init(that,node){connect(node,that)}}__name(WebAudioDelay,"WebAudioDelay"),WebAudioDelay.\u0275fac=__name(function(t){return new(t||WebAudioDelay)(core.\u0275\u0275directiveInject(AUDIO_CONTEXT),core.\u0275\u0275directiveInject(AUDIO_NODE,4),core.\u0275\u0275directiveInject(CONSTRUCTOR_SUPPORT),core.\u0275\u0275injectAttribute("delayTime"),core.\u0275\u0275injectAttribute("maxDelayTime"))},"WebAudioDelay_Factory"),WebAudioDelay.\u0275dir=core.\u0275\u0275defineDirective({type:WebAudioDelay,selectors:[["","waDelayNode",""]],inputs:{channelCount:"channelCount",channelCountMode:"channelCountMode",channelInterpretation:"channelInterpretation",delayTimeParam:["delayTime","delayTimeParam"]},exportAs:["AudioNode"],features:[core.\u0275\u0275ProvidersFeature([{provide:AUDIO_NODE,useExisting:(0,core.forwardRef)(()=>WebAudioDelay)}]),core.\u0275\u0275InheritDefinitionFeature]}),WebAudioDelay.ctorParameters=()=>[{type:BaseAudioContext,decorators:[{type:core.Inject,args:[AUDIO_CONTEXT]}]},{type:void 0,decorators:[{type:core.SkipSelf},{type:core.Inject,args:[AUDIO_NODE]}]},{type:Boolean,decorators:[{type:core.Inject,args:[CONSTRUCTOR_SUPPORT]}]},{type:void 0,decorators:[{type:core.Attribute,args:["delayTime"]}]},{type:void 0,decorators:[{type:core.Attribute,args:["maxDelayTime"]}]}],WebAudioDelay.propDecorators={delayTimeParam:[{type:core.Input,args:["delayTime"]}]},__decorate([audioParam("delayTime"),__metadata("design:type",Object)],WebAudioDelay.prototype,"delayTimeParam",void 0);class WebAudioDynamicsCompressor extends DynamicsCompressorNode{constructor(context,node,modern,attackArg,kneeArg,ratioArg,releaseArg,thresholdArg){const attack=parse(attackArg,.003),knee=parse(kneeArg,30),ratio=parse(ratioArg,12),release=parse(releaseArg,.25),threshold=parse(thresholdArg,-24);if(!modern){const result=context.createDynamicsCompressor();return Object.setPrototypeOf(result,WebAudioDynamicsCompressor.prototype),connect(node,result),result.attack.value=attack,result.knee.value=knee,result.ratio.value=ratio,result.release.value=release,result.threshold.value=threshold,result}super(context,{attack,knee,ratio,release,threshold}),connect(node,this)}ngOnDestroy(){this.disconnect()}}__name(WebAudioDynamicsCompressor,"WebAudioDynamicsCompressor"),WebAudioDynamicsCompressor.\u0275fac=__name(function(t){return new(t||WebAudioDynamicsCompressor)(core.\u0275\u0275directiveInject(AUDIO_CONTEXT),core.\u0275\u0275directiveInject(AUDIO_NODE,4),core.\u0275\u0275directiveInject(CONSTRUCTOR_SUPPORT),core.\u0275\u0275injectAttribute("attack"),core.\u0275\u0275injectAttribute("knee"),core.\u0275\u0275injectAttribute("ratio"),core.\u0275\u0275injectAttribute("release"),core.\u0275\u0275injectAttribute("threshold"))},"WebAudioDynamicsCompressor_Factory"),WebAudioDynamicsCompressor.\u0275dir=core.\u0275\u0275defineDirective({type:WebAudioDynamicsCompressor,selectors:[["","waDynamicsCompressorNode",""]],inputs:{channelCount:"channelCount",channelCountMode:"channelCountMode",channelInterpretation:"channelInterpretation",attackParam:["attack","attackParam"],kneeParam:["knee","kneeParam"],ratioParam:["ratio","ratioParam"],releaseParam:["release","releaseParam"],thresholdParam:["threshold","thresholdParam"]},exportAs:["AudioNode"],features:[core.\u0275\u0275ProvidersFeature([{provide:AUDIO_NODE,useExisting:(0,core.forwardRef)(()=>WebAudioDynamicsCompressor)}]),core.\u0275\u0275InheritDefinitionFeature]}),WebAudioDynamicsCompressor.ctorParameters=()=>[{type:BaseAudioContext,decorators:[{type:core.Inject,args:[AUDIO_CONTEXT]}]},{type:void 0,decorators:[{type:core.SkipSelf},{type:core.Inject,args:[AUDIO_NODE]}]},{type:Boolean,decorators:[{type:core.Inject,args:[CONSTRUCTOR_SUPPORT]}]},{type:void 0,decorators:[{type:core.Attribute,args:["attack"]}]},{type:void 0,decorators:[{type:core.Attribute,args:["knee"]}]},{type:void 0,decorators:[{type:core.Attribute,args:["ratio"]}]},{type:void 0,decorators:[{type:core.Attribute,args:["release"]}]},{type:void 0,decorators:[{type:core.Attribute,args:["threshold"]}]}],WebAudioDynamicsCompressor.propDecorators={attackParam:[{type:core.Input,args:["attack"]}],kneeParam:[{type:core.Input,args:["knee"]}],ratioParam:[{type:core.Input,args:["ratio"]}],releaseParam:[{type:core.Input,args:["release"]}],thresholdParam:[{type:core.Input,args:["threshold"]}]},__decorate([audioParam("attack"),__metadata("design:type",Object)],WebAudioDynamicsCompressor.prototype,"attackParam",void 0),__decorate([audioParam("knee"),__metadata("design:type",Object)],WebAudioDynamicsCompressor.prototype,"kneeParam",void 0),__decorate([audioParam("ratio"),__metadata("design:type",Object)],WebAudioDynamicsCompressor.prototype,"ratioParam",void 0),__decorate([audioParam("release"),__metadata("design:type",Object)],WebAudioDynamicsCompressor.prototype,"releaseParam",void 0),__decorate([audioParam("threshold"),__metadata("design:type",Object)],WebAudioDynamicsCompressor.prototype,"thresholdParam",void 0);class WebAudioGain extends GainNode{constructor(context,node,modern,gainArg){const gain=parse(gainArg,1);if(!modern){const result=context.createGain();return Object.setPrototypeOf(result,WebAudioGain.prototype),connect(node,result),result.gain.value=gain,result}super(context,{gain}),connect(node,this)}ngOnDestroy(){this.disconnect()}}__name(WebAudioGain,"WebAudioGain"),WebAudioGain.\u0275fac=__name(function(t){return new(t||WebAudioGain)(core.\u0275\u0275directiveInject(AUDIO_CONTEXT),core.\u0275\u0275directiveInject(AUDIO_NODE,4),core.\u0275\u0275directiveInject(CONSTRUCTOR_SUPPORT),core.\u0275\u0275injectAttribute("gain"))},"WebAudioGain_Factory"),WebAudioGain.\u0275dir=core.\u0275\u0275defineDirective({type:WebAudioGain,selectors:[["","waGainNode",""]],inputs:{channelCount:"channelCount",channelCountMode:"channelCountMode",channelInterpretation:"channelInterpretation",gainParam:["gain","gainParam"]},exportAs:["AudioNode"],features:[core.\u0275\u0275ProvidersFeature([{provide:AUDIO_NODE,useExisting:(0,core.forwardRef)(()=>WebAudioGain)}]),core.\u0275\u0275InheritDefinitionFeature]}),WebAudioGain.ctorParameters=()=>[{type:BaseAudioContext,decorators:[{type:core.Inject,args:[AUDIO_CONTEXT]}]},{type:void 0,decorators:[{type:core.SkipSelf},{type:core.Inject,args:[AUDIO_NODE]}]},{type:Boolean,decorators:[{type:core.Inject,args:[CONSTRUCTOR_SUPPORT]}]},{type:void 0,decorators:[{type:core.Attribute,args:["gain"]}]}],WebAudioGain.propDecorators={gainParam:[{type:core.Input,args:["gain"]}]},__decorate([audioParam("gain"),__metadata("design:type",Object)],WebAudioGain.prototype,"gainParam",void 0);const FEEDBACK_COEFFICIENTS=new core.InjectionToken("A sequence of feedback coefficients for IIRFilterNode"),FEEDFORWARD_COEFFICIENTS=new core.InjectionToken("A sequence of feedforward coefficients for IIRFilterNode");class WebAudioIIRFilter extends IIRFilterNode{constructor(feedback,feedforward,context,modern,node){if(!modern){const result=context.createIIRFilter(feedback,feedforward);return Object.setPrototypeOf(result,WebAudioIIRFilter.prototype),connect(node,result),result}super(context,{feedback,feedforward}),connect(node,this)}ngOnDestroy(){this.disconnect()}}__name(WebAudioIIRFilter,"WebAudioIIRFilter"),WebAudioIIRFilter.\u0275fac=__name(function(t){return new(t||WebAudioIIRFilter)(core.\u0275\u0275directiveInject(FEEDBACK_COEFFICIENTS),core.\u0275\u0275directiveInject(FEEDFORWARD_COEFFICIENTS),core.\u0275\u0275directiveInject(AUDIO_CONTEXT),core.\u0275\u0275directiveInject(CONSTRUCTOR_SUPPORT),core.\u0275\u0275directiveInject(AUDIO_NODE,4))},"WebAudioIIRFilter_Factory"),WebAudioIIRFilter.\u0275dir=core.\u0275\u0275defineDirective({type:WebAudioIIRFilter,selectors:[["","waIIRFilterNode",""]],inputs:{channelCount:"channelCount",channelCountMode:"channelCountMode",channelInterpretation:"channelInterpretation"},exportAs:["AudioNode"],features:[core.\u0275\u0275ProvidersFeature([{provide:AUDIO_NODE,useExisting:(0,core.forwardRef)(()=>WebAudioIIRFilter)}]),core.\u0275\u0275InheritDefinitionFeature]}),WebAudioIIRFilter.ctorParameters=()=>[{type:Array,decorators:[{type:core.Inject,args:[FEEDBACK_COEFFICIENTS]}]},{type:Array,decorators:[{type:core.Inject,args:[FEEDFORWARD_COEFFICIENTS]}]},{type:BaseAudioContext,decorators:[{type:core.Inject,args:[AUDIO_CONTEXT]}]},{type:Boolean,decorators:[{type:core.Inject,args:[CONSTRUCTOR_SUPPORT]}]},{type:void 0,decorators:[{type:core.SkipSelf},{type:core.Inject,args:[AUDIO_NODE]}]}];class WebAudioPanner extends PannerNode{constructor(context,node,modern){if(!modern){const result=context.createPanner();return Object.setPrototypeOf(result,WebAudioPanner.prototype),connect(node,result),result}super(context),connect(node,this)}ngOnChanges(){this.positionX instanceof AudioParam||(this.setOrientation(fallbackAudioParam(this.orientationXParam),fallbackAudioParam(this.orientationYParam),fallbackAudioParam(this.orientationZParam)),this.setPosition(fallbackAudioParam(this.positionXParam),fallbackAudioParam(this.positionYParam),fallbackAudioParam(this.positionZParam)))}ngOnDestroy(){this.disconnect()}}__name(WebAudioPanner,"WebAudioPanner"),WebAudioPanner.\u0275fac=__name(function(t){return new(t||WebAudioPanner)(core.\u0275\u0275directiveInject(AUDIO_CONTEXT),core.\u0275\u0275directiveInject(AUDIO_NODE,4),core.\u0275\u0275directiveInject(CONSTRUCTOR_SUPPORT))},"WebAudioPanner_Factory"),WebAudioPanner.\u0275dir=core.\u0275\u0275defineDirective({type:WebAudioPanner,selectors:[["","waPannerNode",""]],inputs:{coneInnerAngle:"coneInnerAngle",coneOuterAngle:"coneOuterAngle",coneOuterGain:"coneOuterGain",distanceModel:"distanceModel",maxDistance:"maxDistance",panningModel:"panningModel",refDistance:"refDistance",rolloffFactor:"rolloffFactor",channelCount:"channelCount",channelCountMode:"channelCountMode",channelInterpretation:"channelInterpretation",orientationXParam:"orientationXParam",orientationYParam:"orientationYParam",orientationZParam:"orientationZParam",positionXParam:"positionXParam",positionYParam:"positionYParam",positionZParam:"positionZParam"},exportAs:["AudioNode"],features:[core.\u0275\u0275ProvidersFeature([{provide:AUDIO_NODE,useExisting:(0,core.forwardRef)(()=>WebAudioPanner)}]),core.\u0275\u0275InheritDefinitionFeature,core.\u0275\u0275NgOnChangesFeature]}),WebAudioPanner.ctorParameters=()=>[{type:BaseAudioContext,decorators:[{type:core.Inject,args:[AUDIO_CONTEXT]}]},{type:void 0,decorators:[{type:core.SkipSelf},{type:core.Inject,args:[AUDIO_NODE]}]},{type:Boolean,decorators:[{type:core.Inject,args:[CONSTRUCTOR_SUPPORT]}]}],WebAudioPanner.propDecorators={orientationXParam:[{type:core.Input}],orientationYParam:[{type:core.Input}],orientationZParam:[{type:core.Input}],positionXParam:[{type:core.Input}],positionYParam:[{type:core.Input}],positionZParam:[{type:core.Input}]},__decorate([audioParam("orientationX"),__metadata("design:type",Object)],WebAudioPanner.prototype,"orientationXParam",void 0),__decorate([audioParam("orientationY"),__metadata("design:type",Object)],WebAudioPanner.prototype,"orientationYParam",void 0),__decorate([audioParam("orientationZ"),__metadata("design:type",Object)],WebAudioPanner.prototype,"orientationZParam",void 0),__decorate([audioParam("positionX"),__metadata("design:type",Object)],WebAudioPanner.prototype,"positionXParam",void 0),__decorate([audioParam("positionY"),__metadata("design:type",Object)],WebAudioPanner.prototype,"positionYParam",void 0),__decorate([audioParam("positionZ"),__metadata("design:type",Object)],WebAudioPanner.prototype,"positionZParam",void 0);class WebAudioScriptProcessor extends ScriptProcessorNode{constructor(bufferSize,numberOfInputChannels,numberOfOutputChannels,context,node){try{const result=context.createScriptProcessor(parseInt(bufferSize||"",10)||0,parseInt(numberOfInputChannels||"",10)||2,parseInt(numberOfOutputChannels||"",10)||2);Object.setPrototypeOf(result,WebAudioScriptProcessor.prototype),connect(node,result);const audioprocess=new core.EventEmitter;return result.audioprocess=audioprocess,result.onaudioprocess=e=>audioprocess.emit(e),result}catch(_){}super()}ngOnDestroy(){this.disconnect()}}__name(WebAudioScriptProcessor,"WebAudioScriptProcessor"),WebAudioScriptProcessor.\u0275fac=__name(function(t){return new(t||WebAudioScriptProcessor)(core.\u0275\u0275injectAttribute("bufferSize"),core.\u0275\u0275injectAttribute("numberOfInputChannels"),core.\u0275\u0275injectAttribute("numberOfOutputChannels"),core.\u0275\u0275directiveInject(AUDIO_CONTEXT),core.\u0275\u0275directiveInject(AUDIO_NODE,4))},"WebAudioScriptProcessor_Factory"),WebAudioScriptProcessor.\u0275dir=core.\u0275\u0275defineDirective({type:WebAudioScriptProcessor,selectors:[["","waScriptProcessorNode",""]],inputs:{channelCount:"channelCount",channelCountMode:"channelCountMode",channelInterpretation:"channelInterpretation"},outputs:{audioprocess:"audioprocess"},exportAs:["AudioNode"],features:[core.\u0275\u0275ProvidersFeature([{provide:AUDIO_NODE,useExisting:(0,core.forwardRef)(()=>WebAudioScriptProcessor)}]),core.\u0275\u0275InheritDefinitionFeature]}),WebAudioScriptProcessor.ctorParameters=()=>[{type:void 0,decorators:[{type:core.Attribute,args:["bufferSize"]}]},{type:void 0,decorators:[{type:core.Attribute,args:["numberOfInputChannels"]}]},{type:void 0,decorators:[{type:core.Attribute,args:["numberOfOutputChannels"]}]},{type:BaseAudioContext,decorators:[{type:core.Inject,args:[AUDIO_CONTEXT]}]},{type:void 0,decorators:[{type:core.SkipSelf},{type:core.Inject,args:[AUDIO_NODE]}]}],WebAudioScriptProcessor.propDecorators={audioprocess:[{type:core.Output}]};class WebAudioStereoPanner extends StereoPannerNode{constructor(context,node,panArg){const pan=parse(panArg,0);try{new StereoPannerNode(context)}catch(_){const result=context.createPanner();return Object.setPrototypeOf(result,WebAudioStereoPanner.prototype),result.fallbackToPannerNode(fallbackAudioParam(pan)),connect(node,result),result}super(context,{pan}),connect(node,this)}set panParam(pan){"setPosition"in this?this.fallbackToPannerNode(fallbackAudioParam(pan)):processAudioParam(this.pan,pan,this.context.currentTime)}ngOnDestroy(){this.disconnect()}fallbackToPannerNode(pan){const xDeg=100*pan,zDeg=xDeg>0?270-xDeg:xDeg+90,x=Math.sin(xDeg*(Math.PI/180)),z=Math.sin(zDeg*(Math.PI/180));this.setPosition(x,0,z)}}__name(WebAudioStereoPanner,"WebAudioStereoPanner"),WebAudioStereoPanner.\u0275fac=__name(function(t){return new(t||WebAudioStereoPanner)(core.\u0275\u0275directiveInject(AUDIO_CONTEXT),core.\u0275\u0275directiveInject(AUDIO_NODE,4),core.\u0275\u0275injectAttribute("pan"))},"WebAudioStereoPanner_Factory"),WebAudioStereoPanner.\u0275dir=core.\u0275\u0275defineDirective({type:WebAudioStereoPanner,selectors:[["","waStereoPannerNode",""]],inputs:{channelCount:"channelCount",channelCountMode:"channelCountMode",channelInterpretation:"channelInterpretation",panParam:["pan","panParam"]},exportAs:["AudioNode"],features:[core.\u0275\u0275ProvidersFeature([{provide:AUDIO_NODE,useExisting:(0,core.forwardRef)(()=>WebAudioStereoPanner)}]),core.\u0275\u0275InheritDefinitionFeature]}),WebAudioStereoPanner.ctorParameters=()=>[{type:BaseAudioContext,decorators:[{type:core.Inject,args:[AUDIO_CONTEXT]}]},{type:void 0,decorators:[{type:core.SkipSelf},{type:core.Inject,args:[AUDIO_NODE]}]},{type:void 0,decorators:[{type:core.Attribute,args:["pan"]}]}],WebAudioStereoPanner.propDecorators={panParam:[{type:core.Input,args:["pan"]}]};class WebAudioWaveShaper extends WaveShaperNode{constructor(context,node,modern){if(!modern){const result=context.createWaveShaper();return Object.setPrototypeOf(result,WebAudioWaveShaper.prototype),connect(node,result),result}super(context),connect(node,this)}ngOnDestroy(){this.disconnect()}}__name(WebAudioWaveShaper,"WebAudioWaveShaper"),WebAudioWaveShaper.\u0275fac=__name(function(t){return new(t||WebAudioWaveShaper)(core.\u0275\u0275directiveInject(AUDIO_CONTEXT),core.\u0275\u0275directiveInject(AUDIO_NODE,4),core.\u0275\u0275directiveInject(CONSTRUCTOR_SUPPORT))},"WebAudioWaveShaper_Factory"),WebAudioWaveShaper.\u0275dir=core.\u0275\u0275defineDirective({type:WebAudioWaveShaper,selectors:[["","waWaveShaperNode",""]],inputs:{oversample:"oversample",curve:"curve",channelCount:"channelCount",channelCountMode:"channelCountMode",channelInterpretation:"channelInterpretation"},exportAs:["AudioNode"],features:[core.\u0275\u0275ProvidersFeature([{provide:AUDIO_NODE,useExisting:(0,core.forwardRef)(()=>WebAudioWaveShaper)}]),core.\u0275\u0275InheritDefinitionFeature]}),WebAudioWaveShaper.ctorParameters=()=>[{type:BaseAudioContext,decorators:[{type:core.Inject,args:[AUDIO_CONTEXT]}]},{type:void 0,decorators:[{type:core.SkipSelf},{type:core.Inject,args:[AUDIO_NODE]}]},{type:Boolean,decorators:[{type:core.Inject,args:[CONSTRUCTOR_SUPPORT]}]}];class WebAudioWorklet extends AudioWorkletNode{constructor(context,node,name){super(context,name),this.processorerror=new core.EventEmitter,this.onprocessorerror=()=>this.processorerror.emit(),connect(node,this)}ngOnDestroy(){this.disconnect()}}__name(WebAudioWorklet,"WebAudioWorklet"),WebAudioWorklet.\u0275fac=__name(function(t){return new(t||WebAudioWorklet)(core.\u0275\u0275directiveInject(AUDIO_CONTEXT),core.\u0275\u0275directiveInject(AUDIO_NODE,4),core.\u0275\u0275injectAttribute("name"))},"WebAudioWorklet_Factory"),WebAudioWorklet.\u0275dir=core.\u0275\u0275defineDirective({type:WebAudioWorklet,selectors:[["","waAudioWorkletNode","","name",""]],inputs:{channelCount:"channelCount",channelCountMode:"channelCountMode",channelInterpretation:"channelInterpretation"},outputs:{processorerror:"processorerror"},exportAs:["AudioNode"],features:[core.\u0275\u0275ProvidersFeature([{provide:AUDIO_NODE,useExisting:(0,core.forwardRef)(()=>WebAudioWorklet)}]),core.\u0275\u0275InheritDefinitionFeature]}),WebAudioWorklet.ctorParameters=()=>[{type:BaseAudioContext,decorators:[{type:core.Inject,args:[AUDIO_CONTEXT]}]},{type:void 0,decorators:[{type:core.SkipSelf},{type:core.Inject,args:[AUDIO_NODE]}]},{type:String,decorators:[{type:core.Attribute,args:["name"]}]}],WebAudioWorklet.propDecorators={processorerror:[{type:core.Output}]};class WebAudioParamPipe{transform(value,duration,mode="exponential"){return value instanceof Array?{value,duration}:{value,duration,mode}}}__name(WebAudioParamPipe,"WebAudioParamPipe"),WebAudioParamPipe.\u0275fac=__name(function(t){return new(t||WebAudioParamPipe)},"WebAudioParamPipe_Factory"),WebAudioParamPipe.\u0275pipe=core.\u0275\u0275definePipe({name:"waAudioParam",type:WebAudioParamPipe,pure:!0});class WebAudioPeriodicWavePipe{constructor(context){this.context=context}transform(real,imag,disableNormalization){return this.context.createPeriodicWave(new Float32Array(real),imag?new Float32Array(imag):new Float32Array(real.length),{disableNormalization:!!disableNormalization})}}__name(WebAudioPeriodicWavePipe,"WebAudioPeriodicWavePipe"),WebAudioPeriodicWavePipe.\u0275fac=__name(function(t){return new(t||WebAudioPeriodicWavePipe)(core.\u0275\u0275directiveInject(AUDIO_CONTEXT,16))},"WebAudioPeriodicWavePipe_Factory"),WebAudioPeriodicWavePipe.\u0275pipe=core.\u0275\u0275definePipe({name:"waPeriodicWave",type:WebAudioPeriodicWavePipe,pure:!0}),WebAudioPeriodicWavePipe.ctorParameters=()=>[{type:BaseAudioContext,decorators:[{type:core.Inject,args:[AUDIO_CONTEXT]}]}];class WebAudioBufferSource extends AudioBufferSourceNode{constructor(audioBufferService,context,modern,autoplay,detuneArg,playbackRateArg){const detune=parse(detuneArg,0),playbackRate=parse(playbackRateArg,1);if(!modern){const result=context.createBufferSource();return Object.setPrototypeOf(WebAudioBufferSource.prototype,Object.getPrototypeOf(result)),Object.setPrototypeOf(result,WebAudioBufferSource.prototype),result.playbackRate.value=playbackRate,WebAudioBufferSource.init(result,null,autoplay,audioBufferService),result}super(context,{detune,playbackRate}),WebAudioBufferSource.init(this,null,autoplay,audioBufferService)}set bufferSetter(source){this.buffer$.next(source)}ngOnDestroy(){this.buffer$.complete();try{this.stop()}catch(_){}this.disconnect()}static init(that,_node,autoplay,audioBufferService){null!==autoplay&&that.start();const ended=new core.EventEmitter;that.ended=ended,that.onended=()=>ended.emit(),that.buffer$=new cjs.Subject,that.buffer$.pipe((0,operators.wt)(source=>"string"==typeof source?audioBufferService.fetch(source):(0,cjs.of)(source))).subscribe(buffer=>{that.buffer=buffer})}}__name(WebAudioBufferSource,"WebAudioBufferSource"),WebAudioBufferSource.\u0275fac=__name(function(t){return new(t||WebAudioBufferSource)(core.\u0275\u0275directiveInject(AudioBufferService),core.\u0275\u0275directiveInject(AUDIO_CONTEXT),core.\u0275\u0275directiveInject(CONSTRUCTOR_SUPPORT),core.\u0275\u0275injectAttribute("autoplay"),core.\u0275\u0275injectAttribute("detune"),core.\u0275\u0275injectAttribute("playbackRate"))},"WebAudioBufferSource_Factory"),WebAudioBufferSource.\u0275dir=core.\u0275\u0275defineDirective({type:WebAudioBufferSource,selectors:[["","waAudioBufferSourceNode",""]],inputs:{loop:"loop",loopStart:"loopStart",loopEnd:"loopEnd",channelCount:"channelCount",channelCountMode:"channelCountMode",channelInterpretation:"channelInterpretation",bufferSetter:["buffer","bufferSetter"],detuneParam:["detune","detuneParam"],playbackRateParam:["playbackRate","playbackRateParam"]},outputs:{ended:"ended"},exportAs:["AudioNode"],features:[core.\u0275\u0275ProvidersFeature([{provide:AUDIO_NODE,useExisting:(0,core.forwardRef)(()=>WebAudioBufferSource)}]),core.\u0275\u0275InheritDefinitionFeature]}),WebAudioBufferSource.ctorParameters=()=>[{type:AudioBufferService,decorators:[{type:core.Inject,args:[AudioBufferService]}]},{type:BaseAudioContext,decorators:[{type:core.Inject,args:[AUDIO_CONTEXT]}]},{type:Boolean,decorators:[{type:core.Inject,args:[CONSTRUCTOR_SUPPORT]}]},{type:void 0,decorators:[{type:core.Attribute,args:["autoplay"]}]},{type:void 0,decorators:[{type:core.Attribute,args:["detune"]}]},{type:void 0,decorators:[{type:core.Attribute,args:["playbackRate"]}]}],WebAudioBufferSource.propDecorators={bufferSetter:[{type:core.Input,args:["buffer"]}],detuneParam:[{type:core.Input,args:["detune"]}],playbackRateParam:[{type:core.Input,args:["playbackRate"]}],ended:[{type:core.Output}]},__decorate([audioParam("detune"),__metadata("design:type",Object)],WebAudioBufferSource.prototype,"detuneParam",void 0),__decorate([audioParam("playbackRate"),__metadata("design:type",Object)],WebAudioBufferSource.prototype,"playbackRateParam",void 0);class WebAudioConstantSource extends ConstantSourceNode{constructor(context,autoplay,offset){super(context,{offset:parse(offset,0)}),this.ended=new core.EventEmitter,this.onended=()=>this.ended.emit(),null!==autoplay&&this.start()}ngOnDestroy(){try{this.stop()}catch(_){}this.disconnect()}}__name(WebAudioConstantSource,"WebAudioConstantSource"),WebAudioConstantSource.\u0275fac=__name(function(t){return new(t||WebAudioConstantSource)(core.\u0275\u0275directiveInject(AUDIO_CONTEXT),core.\u0275\u0275injectAttribute("autoplay"),core.\u0275\u0275injectAttribute("offset"))},"WebAudioConstantSource_Factory"),WebAudioConstantSource.\u0275dir=core.\u0275\u0275defineDirective({type:WebAudioConstantSource,selectors:[["","waConstantSourceNode",""]],inputs:{channelCount:"channelCount",channelCountMode:"channelCountMode",channelInterpretation:"channelInterpretation",offsetParam:["offset","offsetParam"]},outputs:{ended:"ended"},exportAs:["AudioNode"],features:[core.\u0275\u0275ProvidersFeature([{provide:AUDIO_NODE,useExisting:(0,core.forwardRef)(()=>WebAudioConstantSource)}]),core.\u0275\u0275InheritDefinitionFeature]}),WebAudioConstantSource.ctorParameters=()=>[{type:BaseAudioContext,decorators:[{type:core.Inject,args:[AUDIO_CONTEXT]}]},{type:void 0,decorators:[{type:core.Attribute,args:["autoplay"]}]},{type:void 0,decorators:[{type:core.Attribute,args:["offset"]}]}],WebAudioConstantSource.propDecorators={offsetParam:[{type:core.Input,args:["offset"]}],ended:[{type:core.Output}]},__decorate([audioParam("offset"),__metadata("design:type",Object)],WebAudioConstantSource.prototype,"offsetParam",void 0);class WebAudioMediaSource extends MediaElementAudioSourceNode{constructor(context,modern,{nativeElement}){if(!modern){const result=context.createMediaElementSource(nativeElement);return Object.setPrototypeOf(result,WebAudioMediaSource.prototype),result}super(context,{mediaElement:nativeElement})}ngOnDestroy(){this.disconnect()}}__name(WebAudioMediaSource,"WebAudioMediaSource"),WebAudioMediaSource.\u0275fac=__name(function(t){return new(t||WebAudioMediaSource)(core.\u0275\u0275directiveInject(AUDIO_CONTEXT),core.\u0275\u0275directiveInject(CONSTRUCTOR_SUPPORT),core.\u0275\u0275directiveInject(core.ElementRef))},"WebAudioMediaSource_Factory"),WebAudioMediaSource.\u0275dir=core.\u0275\u0275defineDirective({type:WebAudioMediaSource,selectors:[["audio","waMediaElementAudioSourceNode",""],["video","waMediaElementAudioSourceNode",""]],exportAs:["AudioNode"],features:[core.\u0275\u0275ProvidersFeature([{provide:AUDIO_NODE,useExisting:(0,core.forwardRef)(()=>WebAudioMediaSource)}]),core.\u0275\u0275InheritDefinitionFeature]}),WebAudioMediaSource.ctorParameters=()=>[{type:AudioContext,decorators:[{type:core.Inject,args:[AUDIO_CONTEXT]}]},{type:Boolean,decorators:[{type:core.Inject,args:[CONSTRUCTOR_SUPPORT]}]},{type:core.ElementRef,decorators:[{type:core.Inject,args:[core.ElementRef]}]}];const MEDIA_STREAM=new core.InjectionToken("MediaStream for MediaStreamAudioSourceNode");class WebAudioMediaStreamSource extends MediaStreamAudioSourceNode{constructor(mediaStream,context,modern){if(!modern){const result=context.createMediaStreamSource(mediaStream);return Object.setPrototypeOf(result,WebAudioMediaStreamSource.prototype),result}super(context,{mediaStream})}ngOnDestroy(){this.disconnect()}}__name(WebAudioMediaStreamSource,"WebAudioMediaStreamSource"),WebAudioMediaStreamSource.\u0275fac=__name(function(t){return new(t||WebAudioMediaStreamSource)(core.\u0275\u0275directiveInject(MEDIA_STREAM),core.\u0275\u0275directiveInject(AUDIO_CONTEXT),core.\u0275\u0275directiveInject(CONSTRUCTOR_SUPPORT))},"WebAudioMediaStreamSource_Factory"),WebAudioMediaStreamSource.\u0275dir=core.\u0275\u0275defineDirective({type:WebAudioMediaStreamSource,selectors:[["","waMediaStreamAudioSourceNode",""]],exportAs:["AudioNode"],features:[core.\u0275\u0275ProvidersFeature([{provide:AUDIO_NODE,useExisting:(0,core.forwardRef)(()=>WebAudioMediaStreamSource)}]),core.\u0275\u0275InheritDefinitionFeature]}),WebAudioMediaStreamSource.ctorParameters=()=>[{type:MediaStream,decorators:[{type:core.Inject,args:[MEDIA_STREAM]}]},{type:AudioContext,decorators:[{type:core.Inject,args:[AUDIO_CONTEXT]}]},{type:Boolean,decorators:[{type:core.Inject,args:[CONSTRUCTOR_SUPPORT]}]}];const MEDIA_STREAM_TRACK=new core.InjectionToken("MediaStreamTrack for MediaStreamTrackAudioSourceNode");class WebAudioMediaStreamTrackSource extends MediaStreamTrackAudioSourceNode{constructor(mediaStreamTrack,context){super(context,{mediaStreamTrack})}ngOnDestroy(){this.disconnect()}}__name(WebAudioMediaStreamTrackSource,"WebAudioMediaStreamTrackSource"),WebAudioMediaStreamTrackSource.\u0275fac=__name(function(t){return new(t||WebAudioMediaStreamTrackSource)(core.\u0275\u0275directiveInject(MEDIA_STREAM_TRACK),core.\u0275\u0275directiveInject(AUDIO_CONTEXT))},"WebAudioMediaStreamTrackSource_Factory"),WebAudioMediaStreamTrackSource.\u0275dir=core.\u0275\u0275defineDirective({type:WebAudioMediaStreamTrackSource,selectors:[["","waMediaStreamTrackAudioSourceNode",""]],exportAs:["AudioNode"],features:[core.\u0275\u0275ProvidersFeature([{provide:AUDIO_NODE,useExisting:(0,core.forwardRef)(()=>WebAudioMediaStreamTrackSource)}]),core.\u0275\u0275InheritDefinitionFeature]}),WebAudioMediaStreamTrackSource.ctorParameters=()=>[{type:MediaStreamTrack,decorators:[{type:core.Inject,args:[MEDIA_STREAM_TRACK]}]},{type:AudioContext,decorators:[{type:core.Inject,args:[AUDIO_CONTEXT]}]}];class WebAudioOscillator extends OscillatorNode{constructor(context,modern,autoplay,detuneArg,frequencyArg){const detune=parse(detuneArg,0),frequency=parse(frequencyArg,440);if(!modern){const result=context.createOscillator();return Object.setPrototypeOf(WebAudioOscillator.prototype,Object.getPrototypeOf(result)),Object.setPrototypeOf(result,WebAudioOscillator.prototype),result.detune.value=detune,result.frequency.value=frequency,WebAudioOscillator.init(result,null,autoplay),result}super(context,{detune,frequency}),WebAudioOscillator.init(this,null,autoplay)}set periodicWave(periodicWave){this.setPeriodicWave(periodicWave)}ngOnDestroy(){try{this.stop()}catch(_){}this.disconnect()}static init(that,node,autoplay){connect(node,that),null!==autoplay&&that.start();const ended=new core.EventEmitter;that.ended=ended,that.onended=()=>ended.emit()}}__name(WebAudioOscillator,"WebAudioOscillator"),WebAudioOscillator.\u0275fac=__name(function(t){return new(t||WebAudioOscillator)(core.\u0275\u0275directiveInject(AUDIO_CONTEXT),core.\u0275\u0275directiveInject(CONSTRUCTOR_SUPPORT),core.\u0275\u0275injectAttribute("autoplay"),core.\u0275\u0275injectAttribute("detune"),core.\u0275\u0275injectAttribute("frequency"))},"WebAudioOscillator_Factory"),WebAudioOscillator.\u0275dir=core.\u0275\u0275defineDirective({type:WebAudioOscillator,selectors:[["","waOscillatorNode",""]],inputs:{type:"type",channelCount:"channelCount",channelCountMode:"channelCountMode",channelInterpretation:"channelInterpretation",periodicWave:"periodicWave",detuneParam:["detune","detuneParam"],frequencyParam:["frequency","frequencyParam"]},outputs:{ended:"ended"},exportAs:["AudioNode"],features:[core.\u0275\u0275ProvidersFeature([{provide:AUDIO_NODE,useExisting:(0,core.forwardRef)(()=>WebAudioOscillator)}]),core.\u0275\u0275InheritDefinitionFeature]}),WebAudioOscillator.ctorParameters=()=>[{type:BaseAudioContext,decorators:[{type:core.Inject,args:[AUDIO_CONTEXT]}]},{type:Boolean,decorators:[{type:core.Inject,args:[CONSTRUCTOR_SUPPORT]}]},{type:void 0,decorators:[{type:core.Attribute,args:["autoplay"]}]},{type:void 0,decorators:[{type:core.Attribute,args:["detune"]}]},{type:void 0,decorators:[{type:core.Attribute,args:["frequency"]}]}],WebAudioOscillator.propDecorators={periodicWave:[{type:core.Input}],detuneParam:[{type:core.Input,args:["detune"]}],frequencyParam:[{type:core.Input,args:["frequency"]}],ended:[{type:core.Output}]},__decorate([audioParam("detune"),__metadata("design:type",Object)],WebAudioOscillator.prototype,"detuneParam",void 0),__decorate([audioParam("frequency"),__metadata("design:type",Object)],WebAudioOscillator.prototype,"frequencyParam",void 0);const AUDIO_WORKLET_PROCESSORS=new core.InjectionToken("Web Audio API worklet processors paths",{providedIn:"root",factory:()=>[]}),AUDIO_WORKLET_SUPPORT=new core.InjectionToken("AudioWorklet browser support",{factory:()=>!!(0,core.inject)(AUDIO_CONTEXT).audioWorklet}),WEB_AUDIO_SUPPORT=(new core.InjectionToken("Web Audio API worklet processors resolution promise",{providedIn:"root",factory:()=>{const context=(0,core.inject)(AUDIO_CONTEXT),processors=(0,core.inject)(AUDIO_WORKLET_PROCESSORS);return(0,core.inject)(AUDIO_WORKLET_SUPPORT)?Promise.all(processors.map(processor=>context.audioWorklet.addModule(processor))).then(()=>!0):Promise.reject("AudioWorklet is not supported").catch(()=>!1)}}),new core.InjectionToken("Web Audio API support",{providedIn:"root",factory:()=>!!AudioContext}));class WebAudioModule{}__name(WebAudioModule,"WebAudioModule"),WebAudioModule.\u0275fac=__name(function(t){return new(t||WebAudioModule)},"WebAudioModule_Factory"),WebAudioModule.\u0275mod=core.\u0275\u0275defineNgModule({type:WebAudioModule}),WebAudioModule.\u0275inj=core.\u0275\u0275defineInjector({})},13344:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{RN:()=>GEOLOCATION_SUPPORT});var _angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(74788),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(72921),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(57192),_ng_web_apis_common__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(52608);const GEOLOCATION=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.InjectionToken("An abstraction over window.navigator.geolocation object",{factory:()=>(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.inject)(_ng_web_apis_common__WEBPACK_IMPORTED_MODULE_0__.s5).geolocation}),POSITION_OPTIONS=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.InjectionToken("Token for an additional position options",{factory:()=>({})}),GEOLOCATION_SUPPORT=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.InjectionToken("Is Geolocation API supported?",{factory:()=>!!(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.inject)(GEOLOCATION)});class GeolocationService extends rxjs__WEBPACK_IMPORTED_MODULE_2__.Observable{constructor(geolocationRef,geolocationSupported,positionOptions){let watchPositionId=0;return super(subscriber=>{geolocationSupported||subscriber.error("Geolocation is not supported in your browser"),watchPositionId=geolocationRef.watchPosition(position=>subscriber.next(position),positionError=>subscriber.error(positionError),positionOptions)}),this.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.xS)(()=>geolocationRef.clearWatch(watchPositionId)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.d)({bufferSize:1,refCount:!0}))}}__name(GeolocationService,"GeolocationService"),GeolocationService.\u0275fac=__name(function(t){return new(t||GeolocationService)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275inject(GEOLOCATION),_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275inject(GEOLOCATION_SUPPORT),_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275inject(POSITION_OPTIONS))},"GeolocationService_Factory"),GeolocationService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275defineInjectable({token:GeolocationService,factory:GeolocationService.\u0275fac,providedIn:"root"})},11693:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{tc:()=>INTERSECTION_OBSERVER_SUPPORT});var _angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(74788),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(72921),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(57192),_ng_web_apis_common__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(52608);const INTERSECTION_ROOT=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.InjectionToken("Root element for IntersectionObserver"),INTERSECTION_ROOT_MARGIN=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.InjectionToken("rootMargin for IntersectionObserver",{providedIn:"root",factory:()=>"0px 0px 0px 0px"});function rootMarginFactory(rootMargin){return rootMargin||"0px 0px 0px 0px"}__name(rootMarginFactory,"rootMarginFactory");const INTERSECTION_THRESHOLD=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.InjectionToken("threshold for IntersectionObserver",{providedIn:"root",factory:()=>0});function thresholdFactory(threshold){return(null==threshold?void 0:threshold.split(",").map(parseFloat))||0}__name(thresholdFactory,"thresholdFactory");class IntersectionObserverDirective extends IntersectionObserver{constructor(root,rootMargin,threshold){super(entries=>{this.callbacks.forEach((callback,element)=>{const filtered=entries.filter(({target})=>target===element);return filtered.length&&callback(filtered,this)})},{root:root&&root.nativeElement,rootMargin:rootMarginFactory(rootMargin),threshold:thresholdFactory(threshold)}),this.callbacks=new Map}observe(target,callback=(()=>{})){super.observe(target),this.callbacks.set(target,callback)}unobserve(target){super.unobserve(target),this.callbacks.delete(target)}ngOnDestroy(){this.disconnect()}}__name(IntersectionObserverDirective,"IntersectionObserverDirective"),IntersectionObserverDirective.\u0275fac=__name(function(t){return new(t||IntersectionObserverDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275directiveInject(INTERSECTION_ROOT,8),_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275injectAttribute("waIntersectionRootMargin"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275injectAttribute("waIntersectionThreshold"))},"IntersectionObserverDirective_Factory"),IntersectionObserverDirective.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275defineDirective({type:IntersectionObserverDirective,selectors:[["","waIntersectionObserver",""]],exportAs:["IntersectionObserver"],features:[_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275InheritDefinitionFeature]});class IntersectionObserveeService extends rxjs__WEBPACK_IMPORTED_MODULE_2__.Observable{constructor({nativeElement},observer){return super(subscriber=>(observer.observe(nativeElement,entries=>{subscriber.next(entries)}),()=>{observer.unobserve(nativeElement)})),this.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.BN)())}}__name(IntersectionObserveeService,"IntersectionObserveeService"),IntersectionObserveeService.\u0275fac=__name(function(t){return new(t||IntersectionObserveeService)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275inject(_angular_core__WEBPACK_IMPORTED_MODULE_1__.ElementRef),_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275inject(IntersectionObserverDirective))},"IntersectionObserveeService_Factory"),IntersectionObserveeService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275defineInjectable({token:IntersectionObserveeService,factory:IntersectionObserveeService.\u0275fac});class IntersectionObserveeDirective{constructor(waIntersectionObservee){this.waIntersectionObservee=waIntersectionObservee}}__name(IntersectionObserveeDirective,"IntersectionObserveeDirective"),IntersectionObserveeDirective.\u0275fac=__name(function(t){return new(t||IntersectionObserveeDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275directiveInject(IntersectionObserveeService))},"IntersectionObserveeDirective_Factory"),IntersectionObserveeDirective.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275defineDirective({type:IntersectionObserveeDirective,selectors:[["","waIntersectionObservee",""]],outputs:{waIntersectionObservee:"waIntersectionObservee"},features:[_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275ProvidersFeature([IntersectionObserveeService])]});class IntersectionRootDirective{}__name(IntersectionRootDirective,"IntersectionRootDirective"),IntersectionRootDirective.\u0275fac=__name(function(t){return new(t||IntersectionRootDirective)},"IntersectionRootDirective_Factory"),IntersectionRootDirective.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275defineDirective({type:IntersectionRootDirective,selectors:[["","waIntersectionRoot",""]],features:[_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275ProvidersFeature([{provide:INTERSECTION_ROOT,useExisting:_angular_core__WEBPACK_IMPORTED_MODULE_1__.ElementRef}])]});class IntersectionObserverModule{}__name(IntersectionObserverModule,"IntersectionObserverModule"),IntersectionObserverModule.\u0275fac=__name(function(t){return new(t||IntersectionObserverModule)},"IntersectionObserverModule_Factory"),IntersectionObserverModule.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275defineNgModule({type:IntersectionObserverModule}),IntersectionObserverModule.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275defineInjector({});const INTERSECTION_OBSERVER_SUPPORT=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.InjectionToken("Intersection Observer API support",{providedIn:"root",factory:()=>!!(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.inject)(_ng_web_apis_common__WEBPACK_IMPORTED_MODULE_0__.m9).IntersectionObserver});class IntersectionObserverService extends rxjs__WEBPACK_IMPORTED_MODULE_2__.Observable{constructor({nativeElement},support,rootMargin,threshold,root){return super(subscriber=>{if(!support)return void subscriber.error("IntersectionObserver is not supported in your browser");const observer=new IntersectionObserver(entries=>{subscriber.next(entries)},{root:root&&root.nativeElement,rootMargin,threshold});return observer.observe(nativeElement),()=>{observer.disconnect()}}),this.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.BN)())}}__name(IntersectionObserverService,"IntersectionObserverService"),IntersectionObserverService.\u0275fac=__name(function(t){return new(t||IntersectionObserverService)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275inject(_angular_core__WEBPACK_IMPORTED_MODULE_1__.ElementRef),_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275inject(INTERSECTION_OBSERVER_SUPPORT),_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275inject(INTERSECTION_ROOT_MARGIN),_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275inject(INTERSECTION_THRESHOLD),_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275inject(INTERSECTION_ROOT,8))},"IntersectionObserverService_Factory"),IntersectionObserverService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275defineInjectable({token:IntersectionObserverService,factory:IntersectionObserverService.\u0275fac})},75723:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{wF:()=>MIDI_SUPPORT});var rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(72921),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(57192),_ng_web_apis_common__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(52608),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(74788);function between(value,min,max){return value>=min&&value<=max}function toFrequency(note,tuning=440){return Math.pow(2,(note-69)/12)*tuning}__name(between,"between"),__name(function(){return source=>source.pipe(filter(({data})=>between(data[0],208,223)))},"aftertouch"),__name(function(channel){return source=>source.pipe(filter(({data})=>data[0]%16===channel))},"filterByChannel"),__name(function(id){return source=>source.pipe(filter(({target})=>target.id===id))},"filterById"),__name(function(name){return source=>source.pipe(filter(({target})=>target.name===name))},"filterByName"),__name(function(){return source=>source.pipe(filter(({data})=>between(data[0],176,191)&&7===data[1]))},"mainVolume"),__name(function(){return source=>source.pipe(filter(({data})=>between(data[0],176,191)&&1===data[1]))},"modulationWheel"),__name(function(){return source=>source.pipe(filter(({data})=>between(data[0],128,159)),map(event=>(between(event.data[0],128,143)&&(event.data[0]+=16,event.data[2]=0),event)))},"notes"),__name(function(){return source=>source.pipe(filter(({data})=>between(data[0],176,191)&&10===data[1]))},"pan"),__name(function(){return source=>source.pipe(filter(({data})=>between(data[0],224,239)))},"pitchBend"),__name(function(){return source=>source.pipe(filter(({data})=>between(data[0],160,175)))},"polyphonicAftertouch"),__name(function(){return source=>source.pipe(filter(({data})=>between(data[0],208,223)))},"programChange"),__name(function(){return source=>source.pipe(filter(({data})=>between(data[0],176,191)&&64===data[1]))},"sustainPedal"),__name(function(){return source=>source.pipe(map(({data})=>data))},"toData"),__name(function(){return source=>source.pipe(map(({data})=>data[1]))},"toDataByte"),__name(function(){return source=>source.pipe(map(({data})=>data[0]))},"toStatusByte"),__name(function(){return source=>source.pipe(map(({timeStamp})=>timeStamp))},"toTimeStamp"),__name(function(){return source=>source.pipe(map(({data})=>data[2]))},"toValueByte"),__name(toFrequency,"toFrequency");class FrequencyPipe{transform(note,tuning){return toFrequency(note,tuning)}}__name(FrequencyPipe,"FrequencyPipe"),FrequencyPipe.\u0275fac=__name(function(t){return new(t||FrequencyPipe)},"FrequencyPipe_Factory"),FrequencyPipe.\u0275pipe=_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275definePipe({name:"frequency",type:FrequencyPipe,pure:!0});class FrequencyPipeModule{}__name(FrequencyPipeModule,"FrequencyPipeModule"),FrequencyPipeModule.\u0275fac=__name(function(t){return new(t||FrequencyPipeModule)},"FrequencyPipeModule_Factory"),FrequencyPipeModule.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275defineNgModule({type:FrequencyPipeModule}),FrequencyPipeModule.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275defineInjector({});const SYSEX=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.InjectionToken("Require sysex MIDI access",{providedIn:"root",factory:()=>!1}),MIDI_ACCESS=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.InjectionToken("Promise for MIDIAccess object",{providedIn:"root",factory:()=>{const navigatorRef=(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.inject)(_ng_web_apis_common__WEBPACK_IMPORTED_MODULE_0__.s5),sysex=(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.inject)(SYSEX);return navigatorRef.requestMIDIAccess?navigatorRef.requestMIDIAccess({sysex}):Promise.reject(new Error("Web MIDI API is not supported"))}}),MIDI_INPUT=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.InjectionToken("MIDIInput object");function getPortsStream(ports){return(0,rxjs__WEBPACK_IMPORTED_MODULE_2__.from)((0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.inject)(MIDI_ACCESS).catch(()=>null)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.wt)(access=>access?(0,rxjs__WEBPACK_IMPORTED_MODULE_2__.fromEvent)(access,"statechange").pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.UI)(()=>[...access[ports].values()]),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.O4)([...access[ports].values()])):(0,rxjs__WEBPACK_IMPORTED_MODULE_2__.of)([])),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.d)(1))}__name(getPortsStream,"getPortsStream");new _angular_core__WEBPACK_IMPORTED_MODULE_1__.InjectionToken("Array of MIDI inputs",{factory:()=>getPortsStream("inputs")}),new _angular_core__WEBPACK_IMPORTED_MODULE_1__.InjectionToken("All incoming MIDI messages stream",{providedIn:"root",factory:()=>(0,rxjs__WEBPACK_IMPORTED_MODULE_2__.from)((0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.inject)(MIDI_ACCESS).catch(e=>e)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.wt)(access=>access instanceof Error?(0,rxjs__WEBPACK_IMPORTED_MODULE_2__.throwError)(access):(0,rxjs__WEBPACK_IMPORTED_MODULE_2__.fromEvent)(access,"statechange").pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.O4)(null),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.wt)(()=>(0,rxjs__WEBPACK_IMPORTED_MODULE_2__.merge)(...Array.from(access.inputs).map(([_,input])=>(0,rxjs__WEBPACK_IMPORTED_MODULE_2__.fromEvent)(input,"midimessage")))))),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.BN)())});const MIDI_OUTPUT=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.InjectionToken("MIDIOutput object"),MIDI_SUPPORT=(new _angular_core__WEBPACK_IMPORTED_MODULE_1__.InjectionToken("Array of MIDI inputs",{factory:()=>getPortsStream("outputs")}),new _angular_core__WEBPACK_IMPORTED_MODULE_1__.InjectionToken("Web MIDI API support",{factory:()=>!!(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.inject)(_ng_web_apis_common__WEBPACK_IMPORTED_MODULE_0__.s5).requestMIDIAccess})),MIDI_INPUT_QUERY=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.InjectionToken("MIDIInput object id or name");function inputByIdFactory(midiAccess,id){return midiAccess.then(access=>access.inputs.get(id))}function inputByNameFactory(midiAccess,name){return midiAccess.then(access=>[...access.inputs.values()].find(input=>input.name===name))}__name(function(id){return[{provide:MIDI_INPUT_QUERY,useValue:id},{provide:MIDI_INPUT,deps:[MIDI_ACCESS,MIDI_INPUT_QUERY],useFactory:inputByIdFactory}]},"inputById"),__name(inputByIdFactory,"inputByIdFactory"),__name(function(name){return[{provide:MIDI_INPUT_QUERY,useValue:name},{provide:MIDI_INPUT,deps:[MIDI_ACCESS,MIDI_INPUT_QUERY],useFactory:inputByNameFactory}]},"inputByName"),__name(inputByNameFactory,"inputByNameFactory");const MIDI_OUTPUT_QUERY=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.InjectionToken("MIDIOutput object id or name");function outputByIdFactory(midiAccess,id){return midiAccess.then(access=>access.outputs.get(id))}function outputByNameFactory(midiAccess,name){return midiAccess.then(access=>[...access.outputs.values()].find(output=>output.name===name))}__name(function(id){return[{provide:MIDI_OUTPUT_QUERY,useValue:id},{provide:MIDI_OUTPUT,deps:[MIDI_ACCESS,MIDI_OUTPUT_QUERY],useFactory:outputByIdFactory}]},"outputById"),__name(outputByIdFactory,"outputByIdFactory"),__name(function(name){return[{provide:MIDI_OUTPUT_QUERY,useValue:name},{provide:MIDI_OUTPUT,deps:[MIDI_ACCESS,MIDI_OUTPUT_QUERY],useFactory:outputByNameFactory}]},"outputByName"),__name(outputByNameFactory,"outputByNameFactory");const COEFFICIENT=Math.pow(2,1/12);__name(function(frequency,tuning=440){return Math.round(Math.log(frequency/tuning)/Math.log(COEFFICIENT))+69},"toNote")},40165:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{aB:()=>PAYMENT_REQUEST_SUPPORT});var rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(72921),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(57192),_ng_web_apis_common__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(52608),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(74788);class PaymentItemDirective{}__name(PaymentItemDirective,"PaymentItemDirective"),PaymentItemDirective.\u0275fac=__name(function(t){return new(t||PaymentItemDirective)},"PaymentItemDirective_Factory"),PaymentItemDirective.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275defineDirective({type:PaymentItemDirective,selectors:[["","waPaymentItem","","paymentAmount","","paymentLabel",""]],inputs:{amount:["paymentAmount","amount"],label:["paymentLabel","label"],pending:["paymentPending","pending"]}}),PaymentItemDirective.propDecorators={amount:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input,args:["paymentAmount"]}],label:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input,args:["paymentLabel"]}],pending:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input,args:["paymentPending"]}]};class PaymentDirective{set paymentItems(items){this.displayItems=items.toArray()}}__name(PaymentDirective,"PaymentDirective"),PaymentDirective.\u0275fac=__name(function(t){return new(t||PaymentDirective)},"PaymentDirective_Factory"),PaymentDirective.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275defineDirective({type:PaymentDirective,selectors:[["","waPayment","","paymentTotal",""]],contentQueries:__name(function(rf,ctx,dirIndex){if(1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275contentQuery(dirIndex,PaymentItemDirective,4),2&rf){let _t;_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275queryRefresh(_t=_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275loadQuery())&&(ctx.paymentItems=_t)}},"PaymentDirective_ContentQueries"),inputs:{total:["paymentTotal","total"],id:["paymentId","id"],modifiers:["paymentModifiers","modifiers"],shippingOptions:["paymentShippingOptions","shippingOptions"]}}),PaymentDirective.propDecorators={total:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input,args:["paymentTotal"]}],id:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input,args:["paymentId"]}],modifiers:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input,args:["paymentModifiers"]}],shippingOptions:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input,args:["paymentShippingOptions"]}],paymentItems:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.ContentChildren,args:[PaymentItemDirective]}]};const PAYMENT_METHODS=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.InjectionToken("The methods used by Request Payment API",{factory:()=>[{supportedMethods:"basic-card"}]}),PAYMENT_OPTIONS=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.InjectionToken("Additional data requests from payer",{factory:()=>({})}),PAYMENT_REQUEST_SUPPORT=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.InjectionToken("Is Payment Request Api supported?",{factory:()=>!!(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.inject)(_ng_web_apis_common__WEBPACK_IMPORTED_MODULE_0__.m9).PaymentRequest});class PaymentRequestService{constructor(supported,paymentMethods,paymentOptions){this.supported=supported,this.paymentMethods=paymentMethods,this.paymentOptions=paymentOptions}request(details,methods=this.paymentMethods,options=this.paymentOptions){if(!this.supported)return Promise.reject(new Error("Payment Request is not supported in your browser"));const gateway=new PaymentRequest(methods,details,options);return gateway.canMakePayment().then(canPay=>canPay?gateway.show():Promise.reject(new Error("Payment Request cannot make the payment")))}}function isError(item){return item instanceof Error||item instanceof DOMException}__name(PaymentRequestService,"PaymentRequestService"),PaymentRequestService.\u0275fac=__name(function(t){return new(t||PaymentRequestService)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275inject(PAYMENT_REQUEST_SUPPORT),_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275inject(PAYMENT_METHODS),_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275inject(PAYMENT_OPTIONS))},"PaymentRequestService_Factory"),PaymentRequestService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275defineInjectable({token:PaymentRequestService,factory:PaymentRequestService.\u0275fac,providedIn:"root"}),PaymentRequestService.ctorParameters=()=>[{type:Boolean,decorators:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Inject,args:[PAYMENT_REQUEST_SUPPORT]}]},{type:Array,decorators:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Inject,args:[PAYMENT_METHODS]}]},{type:void 0,decorators:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Inject,args:[PAYMENT_OPTIONS]}]}],PaymentRequestService.ngInjectableDef=(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.defineInjectable)({factory:__name(function(){return new PaymentRequestService((0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.inject)(PAYMENT_REQUEST_SUPPORT),(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.inject)(PAYMENT_METHODS),(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.inject)(PAYMENT_OPTIONS))},"PaymentRequestService_Factory"),token:PaymentRequestService,providedIn:"root"}),__name(isError,"isError");class PaymentSubmitDirective{constructor(paymentHost,paymentRequest,{nativeElement},methods,options){const requests$=(0,rxjs__WEBPACK_IMPORTED_MODULE_2__.fromEvent)(nativeElement,"click").pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.wt)(()=>(0,rxjs__WEBPACK_IMPORTED_MODULE_2__.from)(paymentRequest.request(Object.assign({},paymentHost),methods,options)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.KQ)(error=>(0,rxjs__WEBPACK_IMPORTED_MODULE_2__.of)(error)))),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.BN)());this.waPaymentSubmit=requests$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.hX)(response=>!isError(response))),this.waPaymentError=requests$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.hX)(isError))}}__name(PaymentSubmitDirective,"PaymentSubmitDirective"),PaymentSubmitDirective.\u0275fac=__name(function(t){return new(t||PaymentSubmitDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275directiveInject(PaymentDirective),_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275directiveInject(PaymentRequestService),_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275directiveInject(_angular_core__WEBPACK_IMPORTED_MODULE_1__.ElementRef),_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275directiveInject(PAYMENT_METHODS),_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275directiveInject(PAYMENT_OPTIONS))},"PaymentSubmitDirective_Factory"),PaymentSubmitDirective.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275defineDirective({type:PaymentSubmitDirective,selectors:[["","waPaymentSubmit",""]],outputs:{waPaymentSubmit:"waPaymentSubmit",waPaymentError:"waPaymentError"}}),PaymentSubmitDirective.ctorParameters=()=>[{type:void 0,decorators:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Inject,args:[PaymentDirective]}]},{type:PaymentRequestService,decorators:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Inject,args:[PaymentRequestService]}]},{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.ElementRef,decorators:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Inject,args:[_angular_core__WEBPACK_IMPORTED_MODULE_1__.ElementRef]}]},{type:Array,decorators:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Inject,args:[PAYMENT_METHODS]}]},{type:void 0,decorators:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Inject,args:[PAYMENT_OPTIONS]}]}],PaymentSubmitDirective.propDecorators={waPaymentSubmit:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Output}],waPaymentError:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Output}]};class PaymentRequestModule{}__name(PaymentRequestModule,"PaymentRequestModule"),PaymentRequestModule.\u0275fac=__name(function(t){return new(t||PaymentRequestModule)},"PaymentRequestModule_Factory"),PaymentRequestModule.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275defineNgModule({type:PaymentRequestModule}),PaymentRequestModule.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275defineInjector({})},96077:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Yc:()=>PERMISSIONS_SUPPORT});var _angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(74788),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(72921),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(57192),_ng_web_apis_common__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(52608);const PERMISSIONS=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.InjectionToken("An abstraction over window.navigator.permissions object",{factory:()=>(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.inject)(_ng_web_apis_common__WEBPACK_IMPORTED_MODULE_0__.s5).permissions}),PERMISSIONS_SUPPORT=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.InjectionToken("Is Permissions API supported?",{factory:()=>!!(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.inject)(PERMISSIONS)});class PermissionsService{constructor(permissions,permissionsSupported){this.permissions=permissions,this.permissionsSupported=permissionsSupported}state(nameOrDescriptor){const descriptor="string"==typeof nameOrDescriptor?{name:nameOrDescriptor}:nameOrDescriptor;return new rxjs__WEBPACK_IMPORTED_MODULE_2__.Observable(subscriber=>{if(this.permissionsSupported)return(0,rxjs__WEBPACK_IMPORTED_MODULE_2__.from)(this.permissions.query(descriptor)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.wt)(status=>(0,rxjs__WEBPACK_IMPORTED_MODULE_2__.fromEvent)(status,"change").pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.O4)(null),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.UI)(()=>status.state)))).subscribe(subscriber);subscriber.error("Permissions is not supported in your browser")}).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.d)({bufferSize:1,refCount:!0}))}}__name(PermissionsService,"PermissionsService"),PermissionsService.\u0275fac=__name(function(t){return new(t||PermissionsService)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275inject(PERMISSIONS),_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275inject(PERMISSIONS_SUPPORT))},"PermissionsService_Factory"),PermissionsService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275defineInjectable({token:PermissionsService,factory:PermissionsService.\u0275fac,providedIn:"root"})}};