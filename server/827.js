"use strict";var __defProp=Object.defineProperty,__name=(target,value)=>__defProp(target,"name",{value,configurable:!0});exports.id=827,exports.ids=[827],exports.modules={75723:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{wF:()=>MIDI_SUPPORT});var rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(72921),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(57192),_ng_web_apis_common__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(92176),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(74788);function between(value,min,max){return value>=min&&value<=max}function toFrequency(note,tuning=440){return Math.pow(2,(note-69)/12)*tuning}__name(between,"between"),__name(function(){return source=>source.pipe(filter(({data})=>between(data[0],208,223)))},"aftertouch"),__name(function(channel){return source=>source.pipe(filter(({data})=>data[0]%16===channel))},"filterByChannel"),__name(function(id){return source=>source.pipe(filter(({target})=>target.id===id))},"filterById"),__name(function(name){return source=>source.pipe(filter(({target})=>target.name===name))},"filterByName"),__name(function(){return source=>source.pipe(filter(({data})=>between(data[0],176,191)&&7===data[1]))},"mainVolume"),__name(function(){return source=>source.pipe(filter(({data})=>between(data[0],176,191)&&1===data[1]))},"modulationWheel"),__name(function(){return source=>source.pipe(filter(({data})=>between(data[0],128,159)),map(event=>(between(event.data[0],128,143)&&(event.data[0]+=16,event.data[2]=0),event)))},"notes"),__name(function(){return source=>source.pipe(filter(({data})=>between(data[0],176,191)&&10===data[1]))},"pan"),__name(function(){return source=>source.pipe(filter(({data})=>between(data[0],224,239)))},"pitchBend"),__name(function(){return source=>source.pipe(filter(({data})=>between(data[0],160,175)))},"polyphonicAftertouch"),__name(function(){return source=>source.pipe(filter(({data})=>between(data[0],208,223)))},"programChange"),__name(function(){return source=>source.pipe(filter(({data})=>between(data[0],176,191)&&64===data[1]))},"sustainPedal"),__name(function(){return source=>source.pipe(map(({data})=>data))},"toData"),__name(function(){return source=>source.pipe(map(({data})=>data[1]))},"toDataByte"),__name(function(){return source=>source.pipe(map(({data})=>data[0]))},"toStatusByte"),__name(function(){return source=>source.pipe(map(({timeStamp})=>timeStamp))},"toTimeStamp"),__name(function(){return source=>source.pipe(map(({data})=>data[2]))},"toValueByte"),__name(toFrequency,"toFrequency");class FrequencyPipe{transform(note,tuning){return toFrequency(note,tuning)}}__name(FrequencyPipe,"FrequencyPipe"),FrequencyPipe.\u0275fac=__name(function(t){return new(t||FrequencyPipe)},"FrequencyPipe_Factory"),FrequencyPipe.\u0275pipe=_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275definePipe({name:"frequency",type:FrequencyPipe,pure:!0});class FrequencyPipeModule{}__name(FrequencyPipeModule,"FrequencyPipeModule"),FrequencyPipeModule.\u0275fac=__name(function(t){return new(t||FrequencyPipeModule)},"FrequencyPipeModule_Factory"),FrequencyPipeModule.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275defineNgModule({type:FrequencyPipeModule}),FrequencyPipeModule.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275defineInjector({});const SYSEX=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.InjectionToken("Require sysex MIDI access",{providedIn:"root",factory:()=>!1}),MIDI_ACCESS=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.InjectionToken("Promise for MIDIAccess object",{providedIn:"root",factory:()=>{const navigatorRef=(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.inject)(_ng_web_apis_common__WEBPACK_IMPORTED_MODULE_0__.s5),sysex=(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.inject)(SYSEX);return navigatorRef.requestMIDIAccess?navigatorRef.requestMIDIAccess({sysex}):Promise.reject(new Error("Web MIDI API is not supported"))}}),MIDI_INPUT=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.InjectionToken("MIDIInput object");function getPortsStream(ports){return(0,rxjs__WEBPACK_IMPORTED_MODULE_2__.from)((0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.inject)(MIDI_ACCESS).catch(()=>null)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.wt)(access=>access?(0,rxjs__WEBPACK_IMPORTED_MODULE_2__.fromEvent)(access,"statechange").pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.UI)(()=>[...access[ports].values()]),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.O4)([...access[ports].values()])):(0,rxjs__WEBPACK_IMPORTED_MODULE_2__.of)([])),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.d)(1))}__name(getPortsStream,"getPortsStream");new _angular_core__WEBPACK_IMPORTED_MODULE_1__.InjectionToken("Array of MIDI inputs",{factory:()=>getPortsStream("inputs")}),new _angular_core__WEBPACK_IMPORTED_MODULE_1__.InjectionToken("All incoming MIDI messages stream",{providedIn:"root",factory:()=>(0,rxjs__WEBPACK_IMPORTED_MODULE_2__.from)((0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.inject)(MIDI_ACCESS).catch(e=>e)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.wt)(access=>access instanceof Error?(0,rxjs__WEBPACK_IMPORTED_MODULE_2__.throwError)(access):(0,rxjs__WEBPACK_IMPORTED_MODULE_2__.fromEvent)(access,"statechange").pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.O4)(null),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.wt)(()=>(0,rxjs__WEBPACK_IMPORTED_MODULE_2__.merge)(...Array.from(access.inputs).map(([_,input])=>(0,rxjs__WEBPACK_IMPORTED_MODULE_2__.fromEvent)(input,"midimessage")))))),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.BN)())});const MIDI_OUTPUT=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.InjectionToken("MIDIOutput object"),MIDI_SUPPORT=(new _angular_core__WEBPACK_IMPORTED_MODULE_1__.InjectionToken("Array of MIDI inputs",{factory:()=>getPortsStream("outputs")}),new _angular_core__WEBPACK_IMPORTED_MODULE_1__.InjectionToken("Web MIDI API support",{factory:()=>!!(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.inject)(_ng_web_apis_common__WEBPACK_IMPORTED_MODULE_0__.s5).requestMIDIAccess})),MIDI_INPUT_QUERY=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.InjectionToken("MIDIInput object id or name");function inputByIdFactory(midiAccess,id){return midiAccess.then(access=>access.inputs.get(id))}function inputByNameFactory(midiAccess,name){return midiAccess.then(access=>[...access.inputs.values()].find(input=>input.name===name))}__name(function(id){return[{provide:MIDI_INPUT_QUERY,useValue:id},{provide:MIDI_INPUT,deps:[MIDI_ACCESS,MIDI_INPUT_QUERY],useFactory:inputByIdFactory}]},"inputById"),__name(inputByIdFactory,"inputByIdFactory"),__name(function(name){return[{provide:MIDI_INPUT_QUERY,useValue:name},{provide:MIDI_INPUT,deps:[MIDI_ACCESS,MIDI_INPUT_QUERY],useFactory:inputByNameFactory}]},"inputByName"),__name(inputByNameFactory,"inputByNameFactory");const MIDI_OUTPUT_QUERY=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.InjectionToken("MIDIOutput object id or name");function outputByIdFactory(midiAccess,id){return midiAccess.then(access=>access.outputs.get(id))}function outputByNameFactory(midiAccess,name){return midiAccess.then(access=>[...access.outputs.values()].find(output=>output.name===name))}__name(function(id){return[{provide:MIDI_OUTPUT_QUERY,useValue:id},{provide:MIDI_OUTPUT,deps:[MIDI_ACCESS,MIDI_OUTPUT_QUERY],useFactory:outputByIdFactory}]},"outputById"),__name(outputByIdFactory,"outputByIdFactory"),__name(function(name){return[{provide:MIDI_OUTPUT_QUERY,useValue:name},{provide:MIDI_OUTPUT,deps:[MIDI_ACCESS,MIDI_OUTPUT_QUERY],useFactory:outputByNameFactory}]},"outputByName"),__name(outputByNameFactory,"outputByNameFactory");const COEFFICIENT=Math.pow(2,1/12);__name(function(frequency,tuning=440){return Math.round(Math.log(frequency/tuning)/Math.log(COEFFICIENT))+69},"toNote")},40165:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{aB:()=>PAYMENT_REQUEST_SUPPORT});var rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(72921),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(57192),_ng_web_apis_common__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(92176),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(74788);class PaymentItemDirective{}__name(PaymentItemDirective,"PaymentItemDirective"),PaymentItemDirective.\u0275fac=__name(function(t){return new(t||PaymentItemDirective)},"PaymentItemDirective_Factory"),PaymentItemDirective.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275defineDirective({type:PaymentItemDirective,selectors:[["","waPaymentItem","","paymentAmount","","paymentLabel",""]],inputs:{amount:["paymentAmount","amount"],label:["paymentLabel","label"],pending:["paymentPending","pending"]}}),PaymentItemDirective.propDecorators={amount:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input,args:["paymentAmount"]}],label:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input,args:["paymentLabel"]}],pending:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input,args:["paymentPending"]}]};class PaymentDirective{set paymentItems(items){this.displayItems=items.toArray()}}__name(PaymentDirective,"PaymentDirective"),PaymentDirective.\u0275fac=__name(function(t){return new(t||PaymentDirective)},"PaymentDirective_Factory"),PaymentDirective.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275defineDirective({type:PaymentDirective,selectors:[["","waPayment","","paymentTotal",""]],contentQueries:__name(function(rf,ctx,dirIndex){if(1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275contentQuery(dirIndex,PaymentItemDirective,4),2&rf){let _t;_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275queryRefresh(_t=_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275loadQuery())&&(ctx.paymentItems=_t)}},"PaymentDirective_ContentQueries"),inputs:{total:["paymentTotal","total"],id:["paymentId","id"],modifiers:["paymentModifiers","modifiers"],shippingOptions:["paymentShippingOptions","shippingOptions"]}}),PaymentDirective.propDecorators={total:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input,args:["paymentTotal"]}],id:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input,args:["paymentId"]}],modifiers:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input,args:["paymentModifiers"]}],shippingOptions:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input,args:["paymentShippingOptions"]}],paymentItems:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.ContentChildren,args:[PaymentItemDirective]}]};const PAYMENT_METHODS=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.InjectionToken("The methods used by Request Payment API",{factory:()=>[{supportedMethods:"basic-card"}]}),PAYMENT_OPTIONS=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.InjectionToken("Additional data requests from payer",{factory:()=>({})}),PAYMENT_REQUEST_SUPPORT=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.InjectionToken("Is Payment Request Api supported?",{factory:()=>!!(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.inject)(_ng_web_apis_common__WEBPACK_IMPORTED_MODULE_0__.m9).PaymentRequest});class PaymentRequestService{constructor(supported,paymentMethods,paymentOptions){this.supported=supported,this.paymentMethods=paymentMethods,this.paymentOptions=paymentOptions}request(details,methods=this.paymentMethods,options=this.paymentOptions){if(!this.supported)return Promise.reject(new Error("Payment Request is not supported in your browser"));const gateway=new PaymentRequest(methods,details,options);return gateway.canMakePayment().then(canPay=>canPay?gateway.show():Promise.reject(new Error("Payment Request cannot make the payment")))}}function isError(item){return item instanceof Error||item instanceof DOMException}__name(PaymentRequestService,"PaymentRequestService"),PaymentRequestService.\u0275fac=__name(function(t){return new(t||PaymentRequestService)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275inject(PAYMENT_REQUEST_SUPPORT),_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275inject(PAYMENT_METHODS),_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275inject(PAYMENT_OPTIONS))},"PaymentRequestService_Factory"),PaymentRequestService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275defineInjectable({token:PaymentRequestService,factory:PaymentRequestService.\u0275fac,providedIn:"root"}),PaymentRequestService.ctorParameters=()=>[{type:Boolean,decorators:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Inject,args:[PAYMENT_REQUEST_SUPPORT]}]},{type:Array,decorators:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Inject,args:[PAYMENT_METHODS]}]},{type:void 0,decorators:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Inject,args:[PAYMENT_OPTIONS]}]}],PaymentRequestService.ngInjectableDef=(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.defineInjectable)({factory:__name(function(){return new PaymentRequestService((0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.inject)(PAYMENT_REQUEST_SUPPORT),(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.inject)(PAYMENT_METHODS),(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.inject)(PAYMENT_OPTIONS))},"PaymentRequestService_Factory"),token:PaymentRequestService,providedIn:"root"}),__name(isError,"isError");class PaymentSubmitDirective{constructor(paymentHost,paymentRequest,{nativeElement},methods,options){const requests$=(0,rxjs__WEBPACK_IMPORTED_MODULE_2__.fromEvent)(nativeElement,"click").pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.wt)(()=>(0,rxjs__WEBPACK_IMPORTED_MODULE_2__.from)(paymentRequest.request(Object.assign({},paymentHost),methods,options)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.KQ)(error=>(0,rxjs__WEBPACK_IMPORTED_MODULE_2__.of)(error)))),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.BN)());this.waPaymentSubmit=requests$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.hX)(response=>!isError(response))),this.waPaymentError=requests$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.hX)(isError))}}__name(PaymentSubmitDirective,"PaymentSubmitDirective"),PaymentSubmitDirective.\u0275fac=__name(function(t){return new(t||PaymentSubmitDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275directiveInject(PaymentDirective),_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275directiveInject(PaymentRequestService),_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275directiveInject(_angular_core__WEBPACK_IMPORTED_MODULE_1__.ElementRef),_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275directiveInject(PAYMENT_METHODS),_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275directiveInject(PAYMENT_OPTIONS))},"PaymentSubmitDirective_Factory"),PaymentSubmitDirective.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275defineDirective({type:PaymentSubmitDirective,selectors:[["","waPaymentSubmit",""]],outputs:{waPaymentSubmit:"waPaymentSubmit",waPaymentError:"waPaymentError"}}),PaymentSubmitDirective.ctorParameters=()=>[{type:void 0,decorators:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Inject,args:[PaymentDirective]}]},{type:PaymentRequestService,decorators:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Inject,args:[PaymentRequestService]}]},{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.ElementRef,decorators:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Inject,args:[_angular_core__WEBPACK_IMPORTED_MODULE_1__.ElementRef]}]},{type:Array,decorators:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Inject,args:[PAYMENT_METHODS]}]},{type:void 0,decorators:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Inject,args:[PAYMENT_OPTIONS]}]}],PaymentSubmitDirective.propDecorators={waPaymentSubmit:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Output}],waPaymentError:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Output}]};class PaymentRequestModule{}__name(PaymentRequestModule,"PaymentRequestModule"),PaymentRequestModule.\u0275fac=__name(function(t){return new(t||PaymentRequestModule)},"PaymentRequestModule_Factory"),PaymentRequestModule.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275defineNgModule({type:PaymentRequestModule}),PaymentRequestModule.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275defineInjector({})},96077:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Yc:()=>PERMISSIONS_SUPPORT});var _angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(74788),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(72921),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(57192),_ng_web_apis_common__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(92176);const PERMISSIONS=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.InjectionToken("An abstraction over window.navigator.permissions object",{factory:()=>(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.inject)(_ng_web_apis_common__WEBPACK_IMPORTED_MODULE_0__.s5).permissions}),PERMISSIONS_SUPPORT=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.InjectionToken("Is Permissions API supported?",{factory:()=>!!(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.inject)(PERMISSIONS)});class PermissionsService{constructor(permissions,permissionsSupported){this.permissions=permissions,this.permissionsSupported=permissionsSupported}state(nameOrDescriptor){const descriptor="string"==typeof nameOrDescriptor?{name:nameOrDescriptor}:nameOrDescriptor;return new rxjs__WEBPACK_IMPORTED_MODULE_2__.Observable(subscriber=>{if(this.permissionsSupported)return(0,rxjs__WEBPACK_IMPORTED_MODULE_2__.from)(this.permissions.query(descriptor)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.wt)(status=>(0,rxjs__WEBPACK_IMPORTED_MODULE_2__.fromEvent)(status,"change").pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.O4)(null),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.UI)(()=>status.state)))).subscribe(subscriber);subscriber.error("Permissions is not supported in your browser")}).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.d)({bufferSize:1,refCount:!0}))}}__name(PermissionsService,"PermissionsService"),PermissionsService.\u0275fac=__name(function(t){return new(t||PermissionsService)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275inject(PERMISSIONS),_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275inject(PERMISSIONS_SUPPORT))},"PermissionsService_Factory"),PermissionsService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.\u0275\u0275defineInjectable({token:PermissionsService,factory:PermissionsService.\u0275fac,providedIn:"root"})}};