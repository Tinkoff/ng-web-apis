"use strict";var __defProp=Object.defineProperty,__name=(target,value)=>__defProp(target,"name",{value,configurable:!0});exports.id=645,exports.ids=[645],exports.modules={96409:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{StoragePageModule:()=>StoragePageModule});var core=__webpack_require__(74788);var taiga_ui_addon_doc_components=__webpack_require__(2007),src=__webpack_require__(92176);class StorageService{constructor(localStorage,windowRef){this.localStorage=localStorage,this.windowRef=windowRef}get length(){return this.localStorage.length}getItem(key){return this.localStorage.getItem(key)}setItem(key,value){const oldValue=this.getItem(key);this.localStorage.setItem(key,value),this.notify(key,value,oldValue)}removeItem(key){const oldValue=this.getItem(key);this.localStorage.removeItem(key),this.notify(key,null,oldValue)}clear(){this.localStorage.clear(),this.notify(null,null,null)}key(index){return this.localStorage.key(index)}notify(key,newValue,oldValue){const event=new StorageEvent("storage",{key,newValue,oldValue,storageArea:this.localStorage,url:this.windowRef.location.href});this.windowRef.dispatchEvent(event)}}__name(StorageService,"StorageService"),StorageService.\u0275fac=core.\u0275\u0275ngDeclareFactory({minVersion:"12.0.0",version:"12.2.17",ngImport:core,type:StorageService,deps:[{token:src.H3},{token:src.m9}],target:core.\u0275\u0275FactoryTarget.Injectable}),StorageService.\u0275prov=core.\u0275\u0275ngDeclareInjectable({minVersion:"12.0.0",version:"12.2.17",ngImport:core,type:StorageService,providedIn:"root"}),core.\u0275\u0275ngDeclareClassMetadata({minVersion:"12.0.0",version:"12.2.17",ngImport:core,type:StorageService,decorators:[{type:core.Injectable,args:[{providedIn:"root"}]}],ctorParameters:function(){return[{type:Storage,decorators:[{type:core.Inject,args:[src.H3]}]},{type:Window,decorators:[{type:core.Inject,args:[src.m9]}]}]}});var cjs=__webpack_require__(72921);const STORAGE_EVENT=new core.InjectionToken("All changes to Storage objects",{factory:()=>(0,cjs.fromEvent)((0,core.inject)(src.m9),"storage")});var operators=__webpack_require__(57192);function filterByKey(target){return(0,operators.hX)(({key})=>null===key||key===target)}function toValue(){return(0,operators.UI)(({newValue})=>newValue)}__name(filterByKey,"filterByKey"),__name(toValue,"toValue");var taiga_ui_kit_components_input=__webpack_require__(21673),taiga_ui_core_components_notification=__webpack_require__(60885),taiga_ui_core_components_group=__webpack_require__(95974),fesm2015_forms=__webpack_require__(24751),common=__webpack_require__(12057);class ExampleComponent{constructor(event$,storage,storageService){this.event$=event$,this.storage=storage,this.storageService=storageService,this.value$=this.event$.pipe(filterByKey("value"),toValue()),this.native="",this.service="",this.index=0}withStorage(value){this.storage.setItem("value",value),this.native=value}withService(value){this.storageService.setItem("value",value),this.service=value}}__name(ExampleComponent,"ExampleComponent"),ExampleComponent.\u0275fac=core.\u0275\u0275ngDeclareFactory({minVersion:"12.0.0",version:"12.2.17",ngImport:core,type:ExampleComponent,deps:[{token:STORAGE_EVENT},{token:src.H3},{token:StorageService}],target:core.\u0275\u0275FactoryTarget.Component}),ExampleComponent.\u0275cmp=core.\u0275\u0275ngDeclareComponent({minVersion:"12.0.0",version:"12.2.17",type:ExampleComponent,selector:"example",ngImport:core,template:'<h3>\n    Value from\n    <code>STORAGE_EVENT</code>\n    : {{ value$ | async }}\n</h3>\n<p tuiGroup>\n    <tui-input [ngModel]="native" (ngModelChange)="withStorage($event)">\n        Native update\n    </tui-input>\n    <tui-input [ngModel]="service" (ngModelChange)="withService($event)">\n        With service\n    </tui-input>\n</p>\n<tui-notification>\n    Native event is only triggered with update happens in another tab. Try\n    opening this page in another tab and type into the first input. Use\n    <code>StorageService</code>\n    if you need to know about changes in the same tab too.\n</tui-notification>\n',components:[{type:taiga_ui_kit_components_input.K3,selector:"tui-input"},{type:taiga_ui_core_components_notification.L,selector:"tui-notification",inputs:["hasIcon","icon","status","size","hideClose"],outputs:["close"]}],directives:[{type:taiga_ui_core_components_group.gZ,selector:"[tuiGroup]:not(ng-container)",inputs:["orientation","adaptive","collapsed","rounded","size"]},{type:taiga_ui_kit_components_input.wU,selector:"tui-input"},{type:fesm2015_forms.JJ,selector:"[formControlName],[ngModel],[formControl]"},{type:fesm2015_forms.On,selector:"[ngModel]:not([formControlName]):not([formControl])",inputs:["name","disabled","ngModel","ngModelOptions"],outputs:["ngModelChange"],exportAs:["ngModel"]}],pipes:{async:common.Ov}}),core.\u0275\u0275ngDeclareClassMetadata({minVersion:"12.0.0",version:"12.2.17",ngImport:core,type:ExampleComponent,decorators:[{type:core.Component,args:[{selector:"example",templateUrl:"./example.template.html"}]}],ctorParameters:function(){return[{type:cjs.Observable,decorators:[{type:core.Inject,args:[STORAGE_EVENT]}]},{type:Storage,decorators:[{type:core.Inject,args:[src.H3]}]},{type:Storage,decorators:[{type:core.Inject,args:[StorageService]}]}]}});class StoragePageComponent{constructor(){this.example={TypeScript:"import {Component, Inject} from '@angular/core';\nimport {LOCAL_STORAGE} from '@ng-web-apis/common';\nimport {filterByKey, STORAGE_EVENT, StorageService, toValue} from '@ng-web-apis/storage';\nimport {Observable} from 'rxjs';\n\n@Component({\n    selector: 'example',\n    templateUrl: './example.template.html',\n})\nexport class ExampleComponent {\n    readonly value$ = this.event$.pipe(filterByKey('value'), toValue());\n\n    native = '';\n\n    service = '';\n\n    index = 0;\n\n    constructor(\n        @Inject(STORAGE_EVENT) private readonly event$: Observable<StorageEvent>,\n        @Inject(LOCAL_STORAGE) private readonly storage: Storage,\n        @Inject(StorageService) private readonly storageService: Storage,\n    ) {}\n\n    withStorage(value: string) {\n        this.storage.setItem('value', value);\n        this.native = value;\n    }\n\n    withService(value: string) {\n        this.storageService.setItem('value', value);\n        this.service = value;\n    }\n}\n",HTML:'<h3>\n    Value from\n    <code>STORAGE_EVENT</code>\n    : {{ value$ | async }}\n</h3>\n<p tuiGroup>\n    <tui-input [ngModel]="native" (ngModelChange)="withStorage($event)">\n        Native update\n    </tui-input>\n    <tui-input [ngModel]="service" (ngModelChange)="withService($event)">\n        With service\n    </tui-input>\n</p>\n<tui-notification>\n    Native event is only triggered with update happens in another tab. Try\n    opening this page in another tab and type into the first input. Use\n    <code>StorageService</code>\n    if you need to know about changes in the same tab too.\n</tui-notification>\n'}}}__name(StoragePageComponent,"StoragePageComponent"),StoragePageComponent.\u0275fac=core.\u0275\u0275ngDeclareFactory({minVersion:"12.0.0",version:"12.2.17",ngImport:core,type:StoragePageComponent,deps:[],target:core.\u0275\u0275FactoryTarget.Component}),StoragePageComponent.\u0275cmp=core.\u0275\u0275ngDeclareComponent({minVersion:"12.0.0",version:"12.2.17",type:StoragePageComponent,selector:"common-page",ngImport:core,template:'<tui-doc-example [content]="example">\n    <example></example>\n</tui-doc-example>\n',styles:[":host{display:block;max-width:600px;margin:0 auto}tui-doc-example{padding:0}\n"],components:[{type:taiga_ui_addon_doc_components.f2,selector:"tui-doc-example",inputs:["id","heading","description","content","fullsize","componentName"]},{type:ExampleComponent,selector:"example"}],changeDetection:core.ChangeDetectionStrategy.OnPush}),core.\u0275\u0275ngDeclareClassMetadata({minVersion:"12.0.0",version:"12.2.17",ngImport:core,type:StoragePageComponent,decorators:[{type:core.Component,args:[{selector:"common-page",templateUrl:"./storage-page.component.html",styleUrls:["./storage-page.component.less"],changeDetection:core.ChangeDetectionStrategy.OnPush}]}]});var router=__webpack_require__(3984);class StoragePageModule{}__name(StoragePageModule,"StoragePageModule"),StoragePageModule.\u0275fac=core.\u0275\u0275ngDeclareFactory({minVersion:"12.0.0",version:"12.2.17",ngImport:core,type:StoragePageModule,deps:[],target:core.\u0275\u0275FactoryTarget.NgModule}),StoragePageModule.\u0275mod=core.\u0275\u0275ngDeclareNgModule({minVersion:"12.0.0",version:"12.2.17",ngImport:core,type:StoragePageModule,declarations:[StoragePageComponent,ExampleComponent],imports:[common.ez,fesm2015_forms.u5,taiga_ui_kit_components_input.Qf,taiga_ui_core_components_notification.H,taiga_ui_core_components_group.n6,taiga_ui_addon_doc_components.u4,taiga_ui_addon_doc_components.qn,router.Bz]}),StoragePageModule.\u0275inj=core.\u0275\u0275ngDeclareInjector({minVersion:"12.0.0",version:"12.2.17",ngImport:core,type:StoragePageModule,imports:[[common.ez,fesm2015_forms.u5,taiga_ui_kit_components_input.Qf,taiga_ui_core_components_notification.H,taiga_ui_core_components_group.n6,taiga_ui_addon_doc_components.u4,taiga_ui_addon_doc_components.qn,router.Bz.forChild([{path:"",component:StoragePageComponent}])]]}),core.\u0275\u0275ngDeclareClassMetadata({minVersion:"12.0.0",version:"12.2.17",ngImport:core,type:StoragePageModule,decorators:[{type:core.NgModule,args:[{imports:[common.ez,fesm2015_forms.u5,taiga_ui_kit_components_input.Qf,taiga_ui_core_components_notification.H,taiga_ui_core_components_group.n6,taiga_ui_addon_doc_components.u4,taiga_ui_addon_doc_components.qn,router.Bz.forChild([{path:"",component:StoragePageComponent}])],declarations:[StoragePageComponent,ExampleComponent]}]}]})},76091:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{V:()=>MutationObserverDirective});var core=__webpack_require__(74788),mutation_observer_init=__webpack_require__(6348);function booleanAttribute(element,attribute){return null!==element.getAttribute(attribute)||void 0}function mutationObserverInitFactory({nativeElement}){const attributeFilter=nativeElement.getAttribute("attributeFilter");return{attributeFilter:null==attributeFilter?void 0:attributeFilter.split(",").map(attr=>attr.trim()),attributeOldValue:booleanAttribute(nativeElement,"attributeOldValue"),attributes:booleanAttribute(nativeElement,"attributes"),characterData:booleanAttribute(nativeElement,"characterData"),characterDataOldValue:booleanAttribute(nativeElement,"characterDataOldValue"),childList:booleanAttribute(nativeElement,"childList"),subtree:booleanAttribute(nativeElement,"subtree")}}__name(booleanAttribute,"booleanAttribute"),__name(mutationObserverInitFactory,"mutationObserverInitFactory");class MutationObserverDirective extends MutationObserver{constructor({nativeElement},config,_1,_2,_3,_4,_5,_6,_7){super(records=>{this.waMutationObserver.emit(records)}),this.waMutationObserver=new core.EventEmitter,this.observe(nativeElement,config)}ngOnDestroy(){this.disconnect()}}__name(MutationObserverDirective,"MutationObserverDirective"),MutationObserverDirective.\u0275fac=core.\u0275\u0275ngDeclareFactory({minVersion:"12.0.0",version:"12.2.17",ngImport:core,type:MutationObserverDirective,deps:[{token:core.ElementRef},{token:mutation_observer_init.k},{token:"attributeFilter",attribute:!0},{token:"attributeOldValue",attribute:!0},{token:"attributes",attribute:!0},{token:"characterData",attribute:!0},{token:"characterDataOldValue",attribute:!0},{token:"childList",attribute:!0},{token:"subtree",attribute:!0}],target:core.\u0275\u0275FactoryTarget.Directive}),MutationObserverDirective.\u0275dir=core.\u0275\u0275ngDeclareDirective({minVersion:"12.0.0",version:"12.2.17",type:MutationObserverDirective,selector:"[waMutationObserver]",outputs:{waMutationObserver:"waMutationObserver"},providers:[{provide:mutation_observer_init.k,deps:[core.ElementRef],useFactory:mutationObserverInitFactory}],exportAs:["MutationObserver"],usesInheritance:!0,ngImport:core}),core.\u0275\u0275ngDeclareClassMetadata({minVersion:"12.0.0",version:"12.2.17",ngImport:core,type:MutationObserverDirective,decorators:[{type:core.Directive,args:[{selector:"[waMutationObserver]",exportAs:"MutationObserver",providers:[{provide:mutation_observer_init.k,deps:[core.ElementRef],useFactory:mutationObserverInitFactory}]}]}],ctorParameters:function(){return[{type:core.ElementRef,decorators:[{type:core.Inject,args:[core.ElementRef]}]},{type:void 0,decorators:[{type:core.Inject,args:[mutation_observer_init.k]}]},{type:void 0,decorators:[{type:core.Attribute,args:["attributeFilter"]}]},{type:void 0,decorators:[{type:core.Attribute,args:["attributeOldValue"]}]},{type:void 0,decorators:[{type:core.Attribute,args:["attributes"]}]},{type:void 0,decorators:[{type:core.Attribute,args:["characterData"]}]},{type:void 0,decorators:[{type:core.Attribute,args:["characterDataOldValue"]}]},{type:void 0,decorators:[{type:core.Attribute,args:["childList"]}]},{type:void 0,decorators:[{type:core.Attribute,args:["subtree"]}]}]},propDecorators:{waMutationObserver:[{type:core.Output}]}})},1367:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{k2:()=>mutation_observer_init.k,NI:()=>MutationObserverModule,IM:()=>MutationObserverService});var mutation_observer_directive=__webpack_require__(76091),core=__webpack_require__(74788),cjs=__webpack_require__(72921),mutation_observer_init=__webpack_require__(6348);class MutationObserverService extends cjs.Observable{constructor({nativeElement},config){super(subscriber=>{const observer=new MutationObserver(records=>{subscriber.next(records)});return observer.observe(nativeElement,config),()=>{observer.disconnect()}})}}__name(MutationObserverService,"MutationObserverService"),MutationObserverService.\u0275fac=core.\u0275\u0275ngDeclareFactory({minVersion:"12.0.0",version:"12.2.17",ngImport:core,type:MutationObserverService,deps:[{token:core.ElementRef},{token:mutation_observer_init.k}],target:core.\u0275\u0275FactoryTarget.Injectable}),MutationObserverService.\u0275prov=core.\u0275\u0275ngDeclareInjectable({minVersion:"12.0.0",version:"12.2.17",ngImport:core,type:MutationObserverService}),core.\u0275\u0275ngDeclareClassMetadata({minVersion:"12.0.0",version:"12.2.17",ngImport:core,type:MutationObserverService,decorators:[{type:core.Injectable}],ctorParameters:function(){return[{type:core.ElementRef,decorators:[{type:core.Inject,args:[core.ElementRef]}]},{type:void 0,decorators:[{type:core.Inject,args:[mutation_observer_init.k]}]}]}});class MutationObserverModule{}__name(MutationObserverModule,"MutationObserverModule"),MutationObserverModule.\u0275fac=core.\u0275\u0275ngDeclareFactory({minVersion:"12.0.0",version:"12.2.17",ngImport:core,type:MutationObserverModule,deps:[],target:core.\u0275\u0275FactoryTarget.NgModule}),MutationObserverModule.\u0275mod=core.\u0275\u0275ngDeclareNgModule({minVersion:"12.0.0",version:"12.2.17",ngImport:core,type:MutationObserverModule,declarations:[mutation_observer_directive.V],exports:[mutation_observer_directive.V]}),MutationObserverModule.\u0275inj=core.\u0275\u0275ngDeclareInjector({minVersion:"12.0.0",version:"12.2.17",ngImport:core,type:MutationObserverModule}),core.\u0275\u0275ngDeclareClassMetadata({minVersion:"12.0.0",version:"12.2.17",ngImport:core,type:MutationObserverModule,decorators:[{type:core.NgModule,args:[{declarations:[mutation_observer_directive.V],exports:[mutation_observer_directive.V]}]}]})},6348:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{k:()=>MUTATION_OBSERVER_INIT});const MUTATION_OBSERVER_INIT=new(__webpack_require__(74788).InjectionToken)("MutationObserver config")}};