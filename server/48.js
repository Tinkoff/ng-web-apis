"use strict";var __defProp=Object.defineProperty,__name=(target,value)=>__defProp(target,"name",{value,configurable:!0});exports.id=48,exports.ids=[48],exports.modules={88048:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AudioPageModule:()=>AudioPageModule});var core=__webpack_require__(74788),audio_context=__webpack_require__(30190),common=__webpack_require__(12057),fesm2015_forms=__webpack_require__(24751),buffer_source=__webpack_require__(40601),analyser=__webpack_require__(12343),output=__webpack_require__(20047),media_source=__webpack_require__(1896),oscillator=__webpack_require__(45772),destination=__webpack_require__(54295),gain=__webpack_require__(33555),stereo_panner=__webpack_require__(19935),delay=__webpack_require__(15836),biquad_filter=__webpack_require__(44058),wave_shaper=__webpack_require__(4664),convolver=__webpack_require__(16667),periodic_wave_pipe=__webpack_require__(17634),audio_param_pipe=__webpack_require__(6029);class AudioPageComponent{constructor(context){this.context=context,this.buffers=[Date.now()],this.selectedChain="dry",this.selectedSource="buffer",this.gain=1,this.pan=0,this.delayTime=1,this.delayGain=.5,this.distortion=20,this.frequency=350,this.detune=0,this.filterGain=0,this.Q=1,this.type="lowpass",this.curve=makeDistortionCurve(this.distortion),this.started=!1,this.real=[0,0,1,0,1]}get distortionCompensation(){return 1.2-this.distortion/20}start(){this.started=!0,this.context.resume()}onCurveChange(distortion){this.distortion=distortion,this.curve=makeDistortionCurve(distortion)}onClick(source,button){"Play"===button.textContent.trim()?(button.textContent="Stop",source.start()):this.buffers[0]=Date.now()}onTimeDomain(array,canvas){const canvasCtx=canvas.getContext("2d");if(!canvasCtx)return;canvasCtx.fillStyle="rgb(200, 200, 200)",canvasCtx.fillRect(0,0,canvas.width,canvas.height),canvasCtx.lineWidth=2,canvasCtx.strokeStyle="rgb(0, 0, 0)",canvasCtx.beginPath();const sliceWidth=Number(canvas.width)/array.length;let x=0;for(let i=0;i<array.length;i++){const y=array[i]/128*canvas.height/2;0===i?canvasCtx.moveTo(x,y):canvasCtx.lineTo(x,y),x+=sliceWidth}canvasCtx.lineTo(canvas.width,canvas.height/2),canvasCtx.stroke()}}function makeDistortionCurve(amount){const curve=new Float32Array(44100),deg=Math.PI/180;for(let i=0;i<44100;++i){const x=2*i/44100-1;curve[i]=(3+amount)*x*20*deg/(Math.PI+amount*Math.abs(x))}return curve}__name(AudioPageComponent,"AudioPageComponent"),AudioPageComponent.\u0275fac=core.\u0275\u0275ngDeclareFactory({minVersion:"12.0.0",version:"12.2.15",ngImport:core,type:AudioPageComponent,deps:[{token:audio_context.N}],target:core.\u0275\u0275FactoryTarget.Component}),AudioPageComponent.\u0275cmp=core.\u0275\u0275ngDeclareComponent({minVersion:"12.0.0",version:"12.2.15",type:AudioPageComponent,selector:"audio-page",viewQueries:[{propertyName:"chain",first:!0,predicate:["chain"],descendants:!0}],ngImport:core,template:'<button *ngIf="!started; else graph" (click)="start()">\n    Start AudioContext\n</button>\n<ng-template #graph>\n    <section>\n        <h1>Description</h1>\n        <p>\n            This is a demo for\n            <code><em>@ng-web-apis/audio</em></code>\n            \u2014 a Web Audio API declarative library for Angular. Here you can\n            select different audio source options and see AudioNode graph for\n            selected configuration. Demo page uses HTML elements as directives\n            hosts, in real life scenario you can use\n            <code>ng-container</code>\n            so you will not have redundant DOM tags.\n        </p>\n    </section>\n    <section>\n        <h1>Source</h1>\n\n        <p>\n            <label>\n                <input\n                    type="radio"\n                    value="buffer"\n                    name="source"\n                    [(ngModel)]="selectedSource"\n                />\n                AudioBufferSourceNode\n            </label>\n        </p>\n        <p>\n            <label>\n                <input\n                    type="radio"\n                    value="media"\n                    name="source"\n                    [(ngModel)]="selectedSource"\n                />\n                MediaElementAudioSourceNode\n            </label>\n        </p>\n        <p>\n            <label>\n                <input\n                    type="radio"\n                    value="oscillator"\n                    name="source"\n                    [(ngModel)]="selectedSource"\n                />\n                OscillatorNode\n            </label>\n        </p>\n\n        <ng-container [ngSwitch]="selectedSource">\n            <ng-container *ngSwitchCase="\'buffer\'">\n                <button\n                    *ngFor="let _ of buffers"\n                    #source="AudioNode"\n                    waAudioBufferSourceNode\n                    buffer="assets/demo.mp3"\n                    [loop]="true"\n                    (click)="onClick(source, $any($event).target)"\n                >\n                    Play\n                    <ng-container\n                        waAnalyserNode\n                        (timeByte$)="onTimeDomain($event, canvas)"\n                    >\n                        <ng-container\n                            [waOutput]="chain || fallback"\n                        ></ng-container>\n                    </ng-container>\n                </button>\n            </ng-container>\n            <audio\n                *ngSwitchCase="\'media\'"\n                waMediaElementAudioSourceNode\n                src="assets/demo.mp3"\n                loop\n                controls\n            >\n                <ng-container\n                    waAnalyserNode\n                    (timeByte$)="onTimeDomain($event, canvas)"\n                >\n                    <ng-container [waOutput]="chain || fallback"></ng-container>\n                </ng-container>\n            </audio>\n            <ng-container *ngSwitchCase="\'oscillator\'">\n                <button\n                    *ngFor="let _ of buffers"\n                    #source="AudioNode"\n                    waOscillatorNode\n                    [frequency]="100"\n                    [periodicWave]="real | waPeriodicWave"\n                    (click)="onClick(source, $any($event).target)"\n                >\n                    Play\n                    <ng-container\n                        waAnalyserNode\n                        (timeByte$)="onTimeDomain($event, canvas)"\n                    >\n                        <ng-container\n                            [waOutput]="chain || fallback"\n                        ></ng-container>\n                    </ng-container>\n                </button>\n            </ng-container>\n        </ng-container>\n\n        <p>\n            <canvas\n                #fallback="AudioNode"\n                #canvas\n                waAudioDestinationNode\n            ></canvas>\n        </p>\n    </section>\n\n    <section>\n        <h1>Chain</h1>\n\n        <p>\n            <label>\n                <input\n                    type="radio"\n                    name="chain"\n                    value="dry"\n                    [(ngModel)]="selectedChain"\n                />\n                Dry\n            </label>\n        </p>\n        <p>\n            <label>\n                <input\n                    type="radio"\n                    name="chain"\n                    value="balance"\n                    [(ngModel)]="selectedChain"\n                />\n                Balance\n            </label>\n        </p>\n        <p>\n            <label>\n                <input\n                    type="radio"\n                    name="chain"\n                    value="delay"\n                    [(ngModel)]="selectedChain"\n                />\n                Delay\n            </label>\n        </p>\n        <p>\n            <label>\n                <input\n                    type="radio"\n                    name="chain"\n                    value="complex"\n                    [(ngModel)]="selectedChain"\n                />\n                Complex\n            </label>\n        </p>\n\n        <ng-container [ngSwitch]="selectedChain">\n            <ng-container *ngSwitchCase="\'balance\'">\n                <fieldset\n                    #chain="AudioNode"\n                    waGainNode\n                    [gain]="gain | waAudioParam: 0.1"\n                >\n                    <legend>GainNode</legend>\n                    <input\n                        type="range"\n                        min="0"\n                        max="1"\n                        step="0.01"\n                        [(ngModel)]="gain"\n                    />\n                    <fieldset\n                        waStereoPannerNode\n                        [pan]="pan | waAudioParam: 0.1"\n                    >\n                        <legend>StereoPannerNode</legend>\n                        <input\n                            type="range"\n                            min="-1"\n                            max="1"\n                            step="0.01"\n                            [(ngModel)]="pan"\n                        />\n                        <fieldset waAudioDestinationNode>\n                            <legend>AudioDestinationNode</legend>\n                        </fieldset>\n                    </fieldset>\n                </fieldset>\n            </ng-container>\n\n            <ng-container *ngSwitchCase="\'delay\'">\n                <fieldset\n                    #chain="AudioNode"\n                    waGainNode\n                    [gain]="gain | waAudioParam: 0.1"\n                >\n                    <legend>GainNode</legend>\n                    <em>For feedback loop purposes only</em>\n\n                    <fieldset\n                        waDelayNode\n                        [delayTime]="delayTime | waAudioParam: 0.1"\n                    >\n                        <legend>DelayNode</legend>\n                        <input\n                            type="range"\n                            min="0"\n                            max="1"\n                            step="0.01"\n                            [(ngModel)]="delayTime"\n                        />\n                        <fieldset waGainNode [gain]="delayGain">\n                            <legend>GainNode</legend>\n                            <input\n                                type="range"\n                                min="0"\n                                max="1"\n                                step="0.01"\n                                [(ngModel)]="delayGain"\n                            />\n                            <fieldset [waOutput]="chain">\n                                <legend>Output</legend>\n                                <em>\n                                    Connected back to the beginning of the chain\n                                </em>\n                            </fieldset>\n                        </fieldset>\n                    </fieldset>\n                    <fieldset waAudioDestinationNode>\n                        <legend>AudioDestinationNode</legend>\n                    </fieldset>\n                </fieldset>\n            </ng-container>\n\n            <ng-container *ngSwitchCase="\'complex\'">\n                <fieldset\n                    #chain="AudioNode"\n                    waBiquadFilterNode\n                    [type]="type"\n                    [gain]="filterGain | waAudioParam: 0.1"\n                    [frequency]="frequency | waAudioParam: 0.1"\n                    [Q]="Q | waAudioParam: 0.1"\n                    [detune]="detune | waAudioParam: 0.1"\n                >\n                    <legend>BiquadFilterNode</legend>\n                    <label>\n                        <select [(ngModel)]="type">\n                            <option value="lowpass">lowpass</option>\n                            <option value="highpass">highpass</option>\n                            <option value="bandpass">bandpass</option>\n                            <option value="lowshelf">lowshelf</option>\n                            <option value="highshelf">highshelf</option>\n                            <option value="peaking">peaking</option>\n                            <option value="notch">notch</option>\n                            <option value="allpass">allpass</option>\n                        </select>\n                        <code>type</code>\n                    </label>\n                    <label>\n                        <input\n                            type="range"\n                            min="0"\n                            max="1"\n                            step="0.01"\n                            [(ngModel)]="filterGain"\n                        />\n                        <code>gain</code>\n                    </label>\n                    <label>\n                        <input\n                            type="range"\n                            min="20"\n                            max="5000"\n                            [(ngModel)]="frequency"\n                        />\n                        <code>frequency</code>\n                    </label>\n                    <label>\n                        <input type="range" min="1" max="100" [(ngModel)]="Q" />\n                        <code>Q</code>\n                    </label>\n                    <label>\n                        <input\n                            type="range"\n                            min="0"\n                            max="100"\n                            [(ngModel)]="detune"\n                        />\n                        <code>detune</code>\n                    </label>\n                    <fieldset waWaveShaperNode oversample="4x" [curve]="curve">\n                        <legend>WaveShaperNode</legend>\n                        <input\n                            type="range"\n                            min="0"\n                            max="20"\n                            step="0.1"\n                            [ngModel]="distortion"\n                            (ngModelChange)="onCurveChange($event)"\n                        />\n                        <ng-container\n                            waGainNode\n                            [gain]="distortionCompensation | waAudioParam: 0.1"\n                        >\n                            <fieldset\n                                waConvolverNode\n                                buffer="assets/response.m4a"\n                            >\n                                <legend>ConvolverNode</legend>\n                                <fieldset waAudioDestinationNode>\n                                    <legend>AudioDestinationNode</legend>\n                                </fieldset>\n                            </fieldset>\n                        </ng-container>\n                    </fieldset>\n                </fieldset>\n            </ng-container>\n        </ng-container>\n    </section>\n</ng-template>\n',directives:[{type:common.O5,selector:"[ngIf]",inputs:["ngIf","ngIfThen","ngIfElse"]},{type:fesm2015_forms._,selector:"input[type=radio][formControlName],input[type=radio][formControl],input[type=radio][ngModel]",inputs:["name","formControlName","value"]},{type:fesm2015_forms.Fj,selector:"input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]"},{type:fesm2015_forms.JJ,selector:"[formControlName],[ngModel],[formControl]"},{type:fesm2015_forms.On,selector:"[ngModel]:not([formControlName]):not([formControl])",inputs:["name","disabled","ngModel","ngModelOptions"],outputs:["ngModelChange"],exportAs:["ngModel"]},{type:common.RF,selector:"[ngSwitch]",inputs:["ngSwitch"]},{type:common.n9,selector:"[ngSwitchCase]",inputs:["ngSwitchCase"]},{type:common.sg,selector:"[ngFor][ngForOf]",inputs:["ngForOf","ngForTrackBy","ngForTemplate"]},{type:buffer_source.v,selector:"[waAudioBufferSourceNode]",inputs:["loop","loopStart","loopEnd","channelCount","channelCountMode","channelInterpretation","buffer","detune","playbackRate"],outputs:["ended"],exportAs:["AudioNode"]},{type:analyser.A,selector:"[waAnalyserNode]",inputs:["fftSize","minDecibels","maxDecibels","smoothingTimeConstant","channelCount","channelCountMode","channelInterpretation"],outputs:["frequencyByte$","frequencyFloat$","timeByte$","timeFloat$"],exportAs:["AudioNode"]},{type:output.g,selector:"[waOutput]",inputs:["waOutput"]},{type:media_source.X,selector:"audio[waMediaElementAudioSourceNode], video[waMediaElementAudioSourceNode]",exportAs:["AudioNode"]},{type:oscillator.P,selector:"[waOscillatorNode]",inputs:["type","channelCount","channelCountMode","channelInterpretation","periodicWave","detune","frequency"],outputs:["ended"],exportAs:["AudioNode"]},{type:destination.i,selector:"[waAudioDestinationNode]",outputs:["quiet"],exportAs:["AudioNode"]},{type:gain.z,selector:"[waGainNode]",inputs:["channelCount","channelCountMode","channelInterpretation","gain"],exportAs:["AudioNode"]},{type:fesm2015_forms.eT,selector:"input[type=range][formControlName],input[type=range][formControl],input[type=range][ngModel]"},{type:stereo_panner.o,selector:"[waStereoPannerNode]",inputs:["channelCount","channelCountMode","channelInterpretation","pan"],exportAs:["AudioNode"]},{type:delay.A,selector:"[waDelayNode]",inputs:["channelCount","channelCountMode","channelInterpretation","delayTime"],exportAs:["AudioNode"]},{type:biquad_filter.e,selector:"[waBiquadFilterNode]",inputs:["type","channelCount","channelCountMode","channelInterpretation","detune","frequency","gain","Q"],exportAs:["AudioNode"]},{type:fesm2015_forms.EJ,selector:"select:not([multiple])[formControlName],select:not([multiple])[formControl],select:not([multiple])[ngModel]",inputs:["compareWith"]},{type:fesm2015_forms.YN,selector:"option",inputs:["ngValue","value"]},{type:fesm2015_forms.Kr,selector:"option",inputs:["ngValue","value"]},{type:wave_shaper.q,selector:"[waWaveShaperNode]",inputs:["oversample","curve","channelCount","channelCountMode","channelInterpretation"],exportAs:["AudioNode"]},{type:convolver.g,selector:"[waConvolverNode]",inputs:["normalize","channelCount","channelCountMode","channelInterpretation","buffer"],exportAs:["AudioNode"]}],pipes:{waPeriodicWave:periodic_wave_pipe.Y,waAudioParam:audio_param_pipe.v},changeDetection:core.ChangeDetectionStrategy.OnPush}),core.\u0275\u0275ngDeclareClassMetadata({minVersion:"12.0.0",version:"12.2.15",ngImport:core,type:AudioPageComponent,decorators:[{type:core.Component,args:[{selector:"audio-page",templateUrl:"./audio-page.component.html",changeDetection:core.ChangeDetectionStrategy.OnPush}]}],ctorParameters:function(){return[{type:AudioContext,decorators:[{type:core.Inject,args:[audio_context.N]}]}]},propDecorators:{chain:[{type:core.ViewChild,args:["chain"]}]}}),__name(makeDistortionCurve,"makeDistortionCurve");var router=__webpack_require__(3984),src_module=__webpack_require__(87280);class AudioPageModule{}__name(AudioPageModule,"AudioPageModule"),AudioPageModule.\u0275fac=core.\u0275\u0275ngDeclareFactory({minVersion:"12.0.0",version:"12.2.15",ngImport:core,type:AudioPageModule,deps:[],target:core.\u0275\u0275FactoryTarget.NgModule}),AudioPageModule.\u0275mod=core.\u0275\u0275ngDeclareNgModule({minVersion:"12.0.0",version:"12.2.15",ngImport:core,type:AudioPageModule,declarations:[AudioPageComponent],imports:[common.ez,fesm2015_forms.u5,src_module.O,router.Bz]}),AudioPageModule.\u0275inj=core.\u0275\u0275ngDeclareInjector({minVersion:"12.0.0",version:"12.2.15",ngImport:core,type:AudioPageModule,imports:[[common.ez,fesm2015_forms.u5,src_module.O,router.Bz.forChild([{path:"",component:AudioPageComponent}])]]}),core.\u0275\u0275ngDeclareClassMetadata({minVersion:"12.0.0",version:"12.2.15",ngImport:core,type:AudioPageModule,decorators:[{type:core.NgModule,args:[{imports:[common.ez,fesm2015_forms.u5,src_module.O,router.Bz.forChild([{path:"",component:AudioPageComponent}])],declarations:[AudioPageComponent]}]}]})}};