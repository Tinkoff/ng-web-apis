"use strict";(self.webpackChunkng_web_apis=self.webpackChunkng_web_apis||[]).push([[30],{8030:(T,r,i)=>{i.r(r),i.d(r,{GeolocationPageModule:()=>y});var o=i(74788),h=i(96247),d=i(91211),l=i(41751),s=i(12057),g=i(12628),u=i(40719);function Z(t,a){if(1&t){const n=o.EpF();o.TgZ(0,"button",3),o.NdJ("click",function(){return o.CHM(n),o.oxw().watch=!0}),o._uU(1," Get my position!\n"),o.qZA()}}function f(t,a){if(1&t&&o._UZ(0,"iframe",6),2&t){const n=a.ngIf,e=o.oxw(2);o.Q6J("src",e.getUrl(n),o.uOi)}}function _(t,a){1&t&&o._UZ(0,"tui-loader")}function U(t,a){if(1&t&&(o.ynx(0),o.YNc(1,f,1,1,"iframe",4),o.ALo(2,"async"),o.YNc(3,_,1,0,"ng-template",null,5,o.W1O),o.BQk()),2&t){const n=o.MAs(4),e=o.oxw();o.xp6(1),o.Q6J("ngIf",o.lcZ(2,2,e.geolocation$))("ngIfElse",n)}}let A=(()=>{class t{constructor(n,e){this.geolocation$=n,this.sanitizer=e,this.watch=!1,this.sample="import {GeolocationService} from '@ng-web-apis/geolocation';\n\n// ...\n\nconstructor(private readonly geolocation$: GeolocationService) {}\n\ngetPosition() {\n  geolocation$.subscribe((position) => {\n     doSomethingWithPosition(position);\n  });\n}",this.sampleAsync='<app-component-using-position\n  [position]="geolocation$ | async"\n></app-component-using-position>'}getUrl({coords:n}){const{longitude:e,latitude:c}=n;return this.sanitizer.bypassSecurityTrustResourceUrl(`//www.openstreetmap.org/export/embed.html?bbox=${e-.005},${c-.005},${e+.005},${c+.005}&marker=${c},${e}&layer=mapnik`)}}return t.\u0275fac=function(n){return new(n||t)(o.Y36(h._1),o.Y36(d.H7))},t.\u0275cmp=o.Xpm({type:t,selectors:[["geolocation-page"]],decls:42,vars:4,consts:[[3,"highlight"],["tuiButton","","appearance","secondary",3,"click",4,"ngIf"],[4,"ngIf"],["tuiButton","","appearance","secondary",3,"click"],[3,"src",4,"ngIf","ngIfElse"],["loading",""],[3,"src"]],template:function(n,e){1&n&&(o.TgZ(0,"strong"),o._uU(1,"Angular"),o.qZA(),o._uU(2,"\ndoes not have any built-in instruments to use\n"),o.TgZ(3,"strong"),o._uU(4,"Geolocation API"),o.qZA(),o._uU(5,"\n. This is an\n"),o.TgZ(6,"code"),o._uU(7,"Observable"),o.qZA(),o._uU(8,"\nbased abstraction over\n"),o.TgZ(9,"strong"),o._uU(10,"Geolocation API"),o.qZA(),o._uU(11,"\nto use with\n"),o.TgZ(12,"strong"),o._uU(13,"Angular"),o.qZA(),o.TgZ(14,"h2"),o._uU(15,"How to use"),o.qZA(),o.TgZ(16,"p"),o._uU(17," Usage is pretty simple: just import service in your component and subscribe to it. Service extends "),o.TgZ(18,"code"),o._uU(19,"Observable"),o.qZA(),o._uU(20," and will emit the "),o.TgZ(21,"code"),o._uU(22,"Position"),o.qZA(),o._uU(23," object.\n"),o.qZA(),o.TgZ(24,"pre"),o._UZ(25,"code",0),o.qZA(),o.TgZ(26,"p"),o._uU(27,"You also can use async pipe"),o.qZA(),o.TgZ(28,"pre"),o._UZ(29,"code",0),o.qZA(),o.TgZ(30,"h2"),o._uU(31,"Single position"),o.qZA(),o.TgZ(32,"p"),o._uU(33," If you need to get position just once and stop observing user location, you can subscribe to "),o.TgZ(34,"code"),o._uU(35,"geolocation$"),o.qZA(),o._uU(36," and use "),o.TgZ(37,"code"),o._uU(38,"take(1)"),o.qZA(),o._uU(39," RxJS operator. Service is cold, meaning if there are no Subscribers, it doesn't track position\n"),o.qZA(),o.YNc(40,Z,2,0,"button",1),o.YNc(41,U,5,4,"ng-container",2)),2&n&&(o.xp6(25),o.Q6J("highlight",e.sample),o.xp6(4),o.Q6J("highlight",e.sampleAsync),o.xp6(11),o.Q6J("ngIf",!e.watch),o.xp6(1),o.Q6J("ngIf",e.watch))},directives:[l.y$,s.O5,g.v0,u.kM],pipes:[s.Ov],styles:["[_nghost-%COMP%]{display:block;max-width:600px;margin:0 auto;line-height:1.5;font-size:1.1em}button[_ngcontent-%COMP%]{margin:0 auto;display:block}iframe[_ngcontent-%COMP%]{width:100%;height:20rem}"],changeDetection:0}),t})();var b=i(23327);let y=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[s.ez,l._l,g.fN,u.dS,b.Bz.forChild([{path:"",component:A}])]]}),t})()}}]);