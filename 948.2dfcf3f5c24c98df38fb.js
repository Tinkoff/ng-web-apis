"use strict";(self.webpackChunkng_web_apis=self.webpackChunkng_web_apis||[]).push([[948],{948:(S,g,t)=>{t.r(g),t.d(g,{PermissionsPageModule:()=>a});var e=t(2176),w=t(4121),y=t(4945),P=t(8168),o=t(3568),n=t(4788),f=t(8332),s=t(2554),c=t(2057);function l(i,m){if(1&i&&(n.TgZ(0,"div"),n._uU(1," Unfortunately we could not show what the code snippet above would render due to an error: "),n._UZ(2,"br"),n.TgZ(3,"b"),n._uU(4),n.qZA(),n.qZA()),2&i){const d=m.ngIf;n.xp6(4),n.Oqu(d)}}function h(i,m){if(1&i&&(n.TgZ(0,"div"),n.TgZ(1,"p"),n._uU(2,"The sample above would render the following:"),n.qZA(),n._UZ(3,"hr"),n.TgZ(4,"h2",2),n._uU(5),n.qZA(),n._UZ(6,"hr"),n.TgZ(7,"p"),n._uU(8," Go ahead and change your browser Location permission as shown below to see this change reflected above. "),n.qZA(),n.TgZ(9,"div",2),n._UZ(10,"img",3),n.qZA(),n.qZA()),2&i){const d=m.ngIf;n.xp6(5),n.hij("Geolocation state: ",d,"")}}let v=(()=>{class i{constructor(d,p){this.permissionsService=d,this.navigator=p,this.error$=new w.X(null),this.basicSample="import { PermissionsService } from '@ng-web-apis/permissions';\n\n@Component({\n  selector: 'main',\n  template: `\n    <h2>Geolocation state: {{ geolocationState$ | async }}</h2>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class AppComponent {\n  geolocationState$ = this.permissionsService.state('geolocation');\n\n  constructor(\n    private readonly permissionsService: PermissionsService,\n  ) {}\n}\n",this.geolocationState$=this.permissionsService.state("geolocation").pipe((0,P.b)(A=>{"prompt"===A&&(alert("After you acknowledge this message the browser will ask your permission to allow location access!"),this.navigator.geolocation.getCurrentPosition(()=>{}))}),(0,o.K)(A=>(this.error$.next(A.message),(0,y.of)(null))))}}return i.\u0275fac=function(d){return new(d||i)(n.Y36(f.qQ),n.Y36(e.s5))},i.\u0275cmp=n.Xpm({type:i,selectors:[["permissions-page"]],decls:10,vars:7,consts:[[3,"highlight"],[4,"ngIf"],[1,"align-center"],["src","assets/change-permissions-instructions.jpg","alt","Click on 'View site information' icon next to the address bar and change selected permission for Location"]],template:function(d,p){1&d&&(n._uU(0,"The following example shows basic usage of\n"),n.TgZ(1,"code"),n._uU(2,"PermissionsService"),n.qZA(),n._uU(3,"\n: "),n.TgZ(4,"pre"),n._UZ(5,"code",0),n.qZA(),n.YNc(6,l,5,1,"div",1),n.ALo(7,"async"),n.YNc(8,h,11,1,"div",1),n.ALo(9,"async")),2&d&&(n.xp6(5),n.Q6J("highlight",p.basicSample),n.xp6(1),n.Q6J("ngIf",n.lcZ(7,3,p.error$)),n.xp6(2),n.Q6J("ngIf",n.lcZ(9,5,p.geolocationState$)))},directives:[s.y$,c.O5],pipes:[c.Ov],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),i})();var E=t(6618);let a=(()=>{class i{}return i.\u0275fac=function(d){return new(d||i)},i.\u0275mod=n.oAB({type:i}),i.\u0275inj=n.cJS({imports:[[c.ez,s._l,E.Bz.forChild([{path:"",component:v}])]]}),i})()},2176:(S,g,t)=>{t.d(g,{L1:()=>r,s5:()=>v,m9:()=>o});var e=t(4788),w=t(7980),y=t(815),P=t(2057);const o=new e.OlP("An abstraction over global window object",{factory:()=>{const{defaultView:u}=(0,e.f3M)(P.K0);if(!u)throw new Error("Window is not available");return u}}),r=new e.OlP("Shared Observable based on `window.requestAnimationFrame`",{factory:()=>{const{requestAnimationFrame:u,cancelAnimationFrame:I}=(0,e.f3M)(o);return new w.y(R=>{let C=NaN;const T=L=>{R.next(L),C=u(T)};return C=u(T),()=>{I(C)}}).pipe((0,y.B)())}}),v=(new e.OlP("An abstraction over window.caches object",{factory:()=>(0,e.f3M)(o).caches}),new e.OlP("An abstraction over window.crypto object",{factory:()=>(0,e.f3M)(o).crypto}),new e.OlP("An abstraction over window.CSS object",{factory:()=>(0,e.f3M)(o).CSS||{escape:u=>u,supports:()=>!1}}),new e.OlP("An abstraction over window.history object",{factory:()=>(0,e.f3M)(o).history}),new e.OlP("An abstraction over window.localStorage object",{factory:()=>(0,e.f3M)(o).localStorage}),new e.OlP("An abstraction over window.location object",{factory:()=>(0,e.f3M)(o).location}),new e.OlP("An abstraction over window.navigator object",{factory:()=>(0,e.f3M)(o).navigator}));new e.OlP("An abstraction over window.navigator.mediaDevices object",{factory:()=>(0,e.f3M)(v).mediaDevices}),new e.OlP("An abstraction over window.navigator.connection object",{factory:()=>(0,e.f3M)(v).connection||null});var i=t(4581),m=t(1927),d=t(7969),p=t(2147),A=t(5086);new e.OlP("Shared Observable based on `document visibility changed`",{factory:()=>{const u=(0,e.f3M)(P.K0);return(0,i.R)(u,"visibilitychange").pipe((0,m.O)(0),(0,d.U)(()=>"hidden"!==u.visibilityState),(0,p.x)(),(0,A.d)({refCount:!1,bufferSize:1}))}}),new e.OlP("An abstraction over window.performance object",{factory:()=>(0,e.f3M)(o).performance}),new e.OlP("An abstraction over window.screen object",{factory:()=>(0,e.f3M)(o).screen}),new e.OlP("An abstraction over window.sessionStorage object",{factory:()=>(0,e.f3M)(o).sessionStorage}),new e.OlP("An abstraction over SpeechRecognition class",{factory:()=>{const u=(0,e.f3M)(o);return u.speechRecognition||u.webkitSpeechRecognition||null}}),new e.OlP("An abstraction over window.speechSynthesis object",{factory:()=>(0,e.f3M)(o).speechSynthesis}),new e.OlP("An abstraction over window.navigator.userAgent object",{factory:()=>(0,e.f3M)(v).userAgent})},4581:(S,g,t)=>{t.d(g,{R:()=>c});var e=t(5955),w=t(7980),y=t(3159),P=t(6602),o=t(5975),r=t(2692);const n=["addListener","removeListener"],f=["addEventListener","removeEventListener"],s=["on","off"];function c(a,i,m,d){if((0,o.m)(m)&&(d=m,m=void 0),d)return c(a,i,m).pipe((0,r.Z)(d));const[p,A]=function(a){return(0,o.m)(a.addEventListener)&&(0,o.m)(a.removeEventListener)}(a)?f.map(O=>b=>a[O](i,b,m)):function(a){return(0,o.m)(a.addListener)&&(0,o.m)(a.removeListener)}(a)?n.map(l(a,i)):function(a){return(0,o.m)(a.on)&&(0,o.m)(a.off)}(a)?s.map(l(a,i)):[];if(!p&&(0,P.z)(a))return(0,y.z)(O=>c(O,i,m))((0,e.Xf)(a));if(!p)throw new TypeError("Invalid event target");return new w.y(O=>{const b=(...M)=>O.next(1<M.length?M:M[0]);return p(b),()=>A(b)})}function l(a,i){return m=>d=>a[m](i,d)}},2147:(S,g,t)=>{t.d(g,{x:()=>P});var e=t(8330),w=t(2085),y=t(8499);function P(r,n=e.y){return r=null!=r?r:o,(0,w.e)((f,s)=>{let c,l=!0;f.subscribe(new y.Q(s,h=>{const v=n(h);(l||!r(c,v))&&(l=!1,c=v,s.next(h))}))})}function o(r,n){return r===n}},5086:(S,g,t)=>{t.d(g,{d:()=>o});var e=t(9359),w=t(2069);class y extends e.x{constructor(n=1/0,f=1/0,s=w.l){super(),this._bufferSize=n,this._windowTime=f,this._timestampProvider=s,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=f===1/0,this._bufferSize=Math.max(1,n),this._windowTime=Math.max(1,f)}next(n){const{isStopped:f,_buffer:s,_infiniteTimeWindow:c,_timestampProvider:l,_windowTime:h}=this;f||(s.push(n),!c&&s.push(l.now()+h)),this._trimBuffer(),super.next(n)}_subscribe(n){this._throwIfClosed(),this._trimBuffer();const f=this._innerSubscribe(n),{_infiniteTimeWindow:s,_buffer:c}=this,l=c.slice();for(let h=0;h<l.length&&!n.closed;h+=s?1:2)n.next(l[h]);return this._checkFinalizedStatuses(n),f}_trimBuffer(){const{_bufferSize:n,_timestampProvider:f,_buffer:s,_infiniteTimeWindow:c}=this,l=(c?1:2)*n;if(n<1/0&&l<s.length&&s.splice(0,s.length-l),!c){const h=f.now();let v=0;for(let E=1;E<s.length&&s[E]<=h;E+=2)v=E;v&&s.splice(0,v+1)}}}var P=t(815);function o(r,n,f){var s,c;let l,h=!1;return r&&"object"==typeof r?(l=null!==(s=r.bufferSize)&&void 0!==s?s:1/0,n=null!==(c=r.windowTime)&&void 0!==c?c:1/0,h=!!r.refCount,f=r.scheduler):l=null!=r?r:1/0,(0,P.B)({connector:()=>new y(l,n,f),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:h})}}}]);