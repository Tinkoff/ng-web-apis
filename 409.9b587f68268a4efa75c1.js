"use strict";(self.webpackChunkng_web_apis=self.webpackChunkng_web_apis||[]).push([[409],{96409:(I,u,a)=>{a.r(u),a.d(u,{StoragePageModule:()=>O});var e=a(74788),c=a(67092),l=a(92176);let f=(()=>{class n{constructor(t,o){this.localStorage=t,this.windowRef=o}get length(){return this.localStorage.length}getItem(t){return this.localStorage.getItem(t)}setItem(t,o){const r=this.getItem(t);this.localStorage.setItem(t,o),this.notify(t,o,r)}removeItem(t){const o=this.getItem(t);this.localStorage.removeItem(t),this.notify(t,null,o)}clear(){this.localStorage.clear(),this.notify(null,null,null)}key(t){return this.localStorage.key(t)}notify(t,o,r){const s=new StorageEvent("storage",{key:t,newValue:o,oldValue:r,storageArea:this.localStorage,url:this.windowRef.location.href});this.windowRef.dispatchEvent(s)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(l.H3),e.LFG(l.m9))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var y=a(14581);const E=new e.OlP("All changes to Storage objects",{factory:()=>(0,y.R)((0,e.f3M)(l.m9),"storage")});var T=a(74970),w=a(27969),m=a(95974),h=a(60885),g=a(21673),p=a(81422),v=a(12057);let A=(()=>{class n{constructor(t,o,r){this.event$=t,this.storage=o,this.storageService=r,this.value$=this.event$.pipe((0,T.h)(({key:i})=>null===i||"value"===i),(0,w.U)(({newValue:n})=>n)),this.native="",this.service="",this.index=0}withStorage(t){this.storage.setItem("value",t),this.native=t}withService(t){this.storageService.setItem("value",t),this.service=t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(E),e.Y36(l.H3),e.Y36(f))},n.\u0275cmp=e.Xpm({type:n,selectors:[["example"]],decls:16,vars:5,consts:[["tuiGroup",""],[3,"ngModel","ngModelChange"]],template:function(t,o){1&t&&(e.TgZ(0,"h3"),e._uU(1," Value from "),e.TgZ(2,"code"),e._uU(3,"STORAGE_EVENT"),e.qZA(),e._uU(4),e.ALo(5,"async"),e.qZA(),e.TgZ(6,"p",0),e.TgZ(7,"tui-input",1),e.NdJ("ngModelChange",function(s){return o.withStorage(s)}),e._uU(8," Native update "),e.qZA(),e.TgZ(9,"tui-input",1),e.NdJ("ngModelChange",function(s){return o.withService(s)}),e._uU(10," With service "),e.qZA(),e.qZA(),e.TgZ(11,"tui-notification"),e._uU(12," Native event is only triggered with update happens in another tab. Try opening this page in another tab and type into the first input. Use "),e.TgZ(13,"code"),e._uU(14,"StorageService"),e.qZA(),e._uU(15," if you need to know about changes in the same tab too.\n"),e.qZA()),2&t&&(e.xp6(4),e.hij(" : ",e.lcZ(5,3,o.value$),"\n"),e.xp6(3),e.Q6J("ngModel",o.native),e.xp6(2),e.Q6J("ngModel",o.service))},directives:[m.gZ,g.K3,g.wU,p.JJ,p.On,h.L],pipes:[v.Ov],encapsulation:2}),n})(),M=(()=>{class n{constructor(){this.example={TypeScript:"import {Component, Inject} from '@angular/core';\nimport {LOCAL_STORAGE} from '@ng-web-apis/common';\nimport {filterByKey, STORAGE_EVENT, StorageService, toValue} from '@ng-web-apis/storage';\nimport {Observable} from 'rxjs';\n\n@Component({\n    selector: 'example',\n    templateUrl: './example.template.html',\n})\nexport class ExampleComponent {\n    readonly value$ = this.event$.pipe(filterByKey('value'), toValue());\n\n    native = '';\n\n    service = '';\n\n    index = 0;\n\n    constructor(\n        @Inject(STORAGE_EVENT) private readonly event$: Observable<StorageEvent>,\n        @Inject(LOCAL_STORAGE) private readonly storage: Storage,\n        @Inject(StorageService) private readonly storageService: Storage,\n    ) {}\n\n    withStorage(value: string) {\n        this.storage.setItem('value', value);\n        this.native = value;\n    }\n\n    withService(value: string) {\n        this.storageService.setItem('value', value);\n        this.service = value;\n    }\n}\n",HTML:'<h3>\n    Value from\n    <code>STORAGE_EVENT</code>\n    : {{ value$ | async }}\n</h3>\n<p tuiGroup>\n    <tui-input\n        [ngModel]="native"\n        (ngModelChange)="withStorage($event)"\n    >\n        Native update\n    </tui-input>\n    <tui-input\n        [ngModel]="service"\n        (ngModelChange)="withService($event)"\n    >\n        With service\n    </tui-input>\n</p>\n<tui-notification>\n    Native event is only triggered with update happens in another tab. Try opening this page in another tab and type\n    into the first input. Use\n    <code>StorageService</code>\n    if you need to know about changes in the same tab too.\n</tui-notification>\n'}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["common-page"]],decls:2,vars:1,consts:[[3,"content"]],template:function(t,o){1&t&&(e.TgZ(0,"tui-doc-example",0),e._UZ(1,"example"),e.qZA()),2&t&&e.Q6J("content",o.example)},directives:[c.f2,A],styles:["[_nghost-%COMP%]{display:block;max-width:600px;margin:0 auto}tui-doc-example[_ngcontent-%COMP%]{padding:0}"],changeDetection:0}),n})();var Z=a(59367);let O=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[v.ez,p.u5,g.Qf,h.H,m.n6,c.u4,c.qn,Z.Bz.forChild([{path:"",component:M}])]]}),n})()}}]);