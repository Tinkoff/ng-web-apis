"use strict";(self.webpackChunkng_web_apis=self.webpackChunkng_web_apis||[]).push([[428],{5428:(Ge,J,l)=>{l.r(J),l.d(J,{AudioPageModule:()=>Ye});var e=l(4788);const g=new e.OlP("Web Audio API context",{providedIn:"root",factory:()=>new AudioContext});var T=l(2057),C=l(1422),Q=l(9593);class z extends Q.w0{constructor(a,n){super()}schedule(a,n=0){return this}}const N={setInterval(...t){const{delegate:a}=N;return((null==a?void 0:a.setInterval)||setInterval)(...t)},clearInterval(t){const{delegate:a}=N;return((null==a?void 0:a.clearInterval)||clearInterval)(t)},delegate:void 0};var R=l(8308);class B extends z{constructor(a,n){super(a,n),this.scheduler=a,this.work=n,this.pending=!1}schedule(a,n=0){if(this.closed)return this;this.state=a;const o=this.id,i=this.scheduler;return null!=o&&(this.id=this.recycleAsyncId(i,o,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(i,this.id,n),this}requestAsyncId(a,n,o=0){return N.setInterval(a.flush.bind(a,this),o)}recycleAsyncId(a,n,o=0){if(null!=o&&this.delay===o&&!1===this.pending)return n;N.clearInterval(n)}execute(a,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const o=this._execute(a,n);if(o)return o;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(a,n){let i,o=!1;try{this.work(a)}catch(r){o=!0,i=r||new Error("Scheduled action threw falsy error")}if(o)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:a,scheduler:n}=this,{actions:o}=n;this.work=this.state=this.scheduler=null,this.pending=!1,(0,R.P)(o,this),null!=a&&(this.id=this.recycleAsyncId(n,a,null)),this.delay=null,super.unsubscribe()}}}var L=l(2069);class w{constructor(a,n=w.now){this.schedulerActionCtor=a,this.now=n}schedule(a,n=0,o){return new this.schedulerActionCtor(this,a).schedule(o,n)}}w.now=L.l.now;class D extends w{constructor(a,n=w.now){super(a,n),this.actions=[],this._active=!1,this._scheduled=void 0}flush(a){const{actions:n}=this;if(this._active)return void n.push(a);let o;this._active=!0;do{if(o=a.execute(a.state,a.delay))break}while(a=n.shift());if(this._active=!1,o){for(;a=n.shift();)a.unsubscribe();throw o}}}const S=new D(B),V=S;var X=l(7980),K=l(1830);function P(t=0,a=S){return t<0&&(t=0),function(t=0,a,n=V){let o=-1;return null!=a&&((0,K.K)(a)?n=a:o=a),new X.y(i=>{let r=function(t){return t instanceof Date&&!isNaN(t)}(t)?+t-n.now():t;r<0&&(r=0);let s=0;return n.schedule(function(){i.closed||(i.next(s++),0<=o?this.schedule(void 0,o):i.complete())},r)})}(t,t,a)}var M=l(7969),oe=l(8168),ie=l(2147),U=l(2085),I=l(8499),se=l(4970);const p=new e.OlP("Web Audio API audio node",{factory:()=>null}),A=new e.OlP("Tests if constructor mode of node creation is supported or a fallback to factory method is needed",{providedIn:"root",factory:()=>{try{return!!new GainNode((0,e.f3M)(g))}catch(t){return!1}}});function d(t,a){t&&a&&t.connect(a)}let ue=(()=>{class t extends AnalyserNode{constructor(n,o,i){if(!i){const r=n.createAnalyser();return Object.setPrototypeOf(r,t.prototype),t.init(r,o),r}super(n),t.init(this,o)}ngOnDestroy(){this.disconnect()}isSilent(n){return Math.abs(n.reduce((o,i)=>o+i,0))<.001}static init(n,o){d(o,n),n.fftSize=256,n.connect(n.context.destination),n.quiet=P(100).pipe(function(t){return(0,M.U)(()=>t)}(new Float32Array(n.fftSize)),(0,oe.b)(i=>n.getFloatTimeDomainData(i)),(0,M.U)(i=>n.isSilent(i)),(0,ie.x)(),(0,U.e)((a,n)=>{let o=!1;a.subscribe(new I.Q(n,r=>(o||(o=!r))&&n.next(r)))}),function(t,a=S){return(0,U.e)((n,o)=>{let i=null,r=null,s=null;const c=()=>{if(i){i.unsubscribe(),i=null;const u=r;r=null,o.next(u)}};function _(){const u=s+t,m=a.now();if(m<u)return i=this.schedule(void 0,u-m),void o.add(i);c()}n.subscribe(new I.Q(o,u=>{r=u,s=a.now(),i||(i=a.schedule(_,t),o.add(i))},()=>{c(),o.complete()},void 0,()=>{r=i=null}))})}(5e3),(0,se.h)(i=>i))}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(g),e.Y36(p),e.Y36(A))},t.\u0275dir=e.lG2({type:t,selectors:[["","waAudioDestinationNode",""]],outputs:{quiet:"quiet"},exportAs:["AudioNode"],features:[e.qOj]}),t})();var y=l(4762),Y=l(9359),G=l(4945),W=l(1528);function k(t,a,n=0){t.cancelAndHoldAtTime?t.cancelAndHoldAtTime(n):(t.cancelScheduledValues(n),t.setValueAtTime(Z(t.value),n)),"number"!=typeof a?a instanceof Array?function(t,a,n){a.forEach(o=>{"mode"in o?$(t,o,n):t.setValueCurveAtTime(o.value,n,o.duration),n+=o.duration})}(t,a,n):"mode"in a?(t.setValueAtTime(Z(t.value),n),$(t,a,n)):t.setValueCurveAtTime(a.value,n,a.duration):t.setValueAtTime(Z(a),n)}function $(t,{value:a,mode:n="instant",duration:o},i){switch(n){case"instant":t.setValueAtTime(Z(a),i),t.setValueAtTime(Z(a),i+o);break;case"exponential":a<0||a*t.value<0?t.linearRampToValueAtTime(Z(a),i+o):t.exponentialRampToValueAtTime(Z(a),i+o),t.setValueAtTime(Z(a),i+o);break;case"linear":t.linearRampToValueAtTime(Z(a),i+o)}}function Z(t){return t||1e-8}function x(t=""){return(n,o)=>{Object.defineProperty(n,o,{set(i){i="string"==typeof i?Number.parseFloat(i):i;const r=this instanceof AudioWorkletNode?this.parameters.get(o):this[t];r instanceof AudioParam?k(r,i,this.context.currentTime):Object.defineProperty(n,o,{value:i})}})}}let E=(()=>{class t{constructor(n){this.context=n,this.cache=new Map}fetch(n){return new Promise((o,i)=>{if(this.cache.has(n))return void o(this.cache.get(n));const r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType="arraybuffer",r.onerror=i,r.onabort=i,r.onload=()=>{this.context.decodeAudioData(r.response,s=>{this.cache.set(n,s),o(s)},i)},r.send()})}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(g))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function f(t,a){const n=parseFloat(t||"");return isNaN(n)?a:n}let de=(()=>{class t extends AudioBufferSourceNode{constructor(n,o,i,r,s,c){const _=f(s,0),u=f(c,1);if(!i){const m=o.createBufferSource();return Object.setPrototypeOf(t.prototype,Object.getPrototypeOf(m)),Object.setPrototypeOf(m,t.prototype),m.playbackRate.value=u,t.init(m,null,r,n),m}super(o,{detune:_,playbackRate:u}),t.init(this,null,r,n)}set bufferSetter(n){this.buffer$.next(n)}ngOnDestroy(){this.buffer$.complete();try{this.stop()}catch(n){}this.disconnect()}static init(n,o,i,r){null!==i&&n.start();const s=new e.vpe;n.ended=s,n.onended=()=>s.emit(),n.buffer$=new Y.x,n.buffer$.pipe((0,W.w)(c=>"string"==typeof c?r.fetch(c):(0,G.of)(c))).subscribe(c=>{n.buffer=c})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(E),e.Y36(g),e.Y36(A),e.$8M("autoplay"),e.$8M("detune"),e.$8M("playbackRate"))},t.\u0275dir=e.lG2({type:t,selectors:[["","waAudioBufferSourceNode",""]],inputs:{loop:"loop",loopStart:"loopStart",loopEnd:"loopEnd",channelCount:"channelCount",channelCountMode:"channelCountMode",channelInterpretation:"channelInterpretation",bufferSetter:["buffer","bufferSetter"],detuneParam:["detune","detuneParam"],playbackRateParam:["playbackRate","playbackRateParam"]},outputs:{ended:"ended"},exportAs:["AudioNode"],features:[e._Bn([{provide:p,useExisting:(0,e.Gpc)(()=>t)}]),e.qOj]}),(0,y.gn)([x("detune")],t.prototype,"detuneParam",void 0),(0,y.gn)([x("playbackRate")],t.prototype,"playbackRateParam",void 0),t})();const q={schedule(t){let a=requestAnimationFrame,n=cancelAnimationFrame;const{delegate:o}=q;o&&(a=o.requestAnimationFrame,n=o.cancelAnimationFrame);const i=a(r=>{n=void 0,t(r)});return new Q.w0(()=>null==n?void 0:n(i))},requestAnimationFrame(...t){const{delegate:a}=q;return((null==a?void 0:a.requestAnimationFrame)||requestAnimationFrame)(...t)},cancelAnimationFrame(...t){const{delegate:a}=q;return((null==a?void 0:a.cancelAnimationFrame)||cancelAnimationFrame)(...t)},delegate:void 0},O=new class extends D{flush(a){this._active=!0;const n=this._scheduled;this._scheduled=void 0;const{actions:o}=this;let i;a=a||o.shift();do{if(i=a.execute(a.state,a.delay))break}while((a=o[0])&&a.id===n&&o.shift());if(this._active=!1,i){for(;(a=o[0])&&a.id===n&&o.shift();)a.unsubscribe();throw i}}}(class extends B{constructor(a,n){super(a,n),this.scheduler=a,this.work=n}requestAsyncId(a,n,o=0){return null!==o&&o>0?super.requestAsyncId(a,n,o):(a.actions.push(this),a._scheduled||(a._scheduled=q.requestAnimationFrame(()=>a.flush(void 0))))}recycleAsyncId(a,n,o=0){if(null!=o&&o>0||null==o&&this.delay>0)return super.recycleAsyncId(a,n,o);a.actions.some(i=>i.id===n)||(q.cancelAnimationFrame(n),a._scheduled=void 0)}});var F=l(815);let fe=(()=>{class t extends AnalyserNode{constructor(n,o,i,r,s,c,_){const u=f(r,2048),m=f(s,-30),b=f(c,-100),v=f(_,.8);if(!i){const h=n.createAnalyser();return Object.setPrototypeOf(h,t.prototype),t.init(h,o),h.fftSize=u,h.maxDecibels=m,h.minDecibels=b,h.smoothingTimeConstant=v,h}super(n,{fftSize:u,maxDecibels:m,minDecibels:b,smoothingTimeConstant:v}),t.init(this,o)}ngOnDestroy(){this.disconnect()}static init(n,o){d(o,n);let i=new Uint8Array(n.frequencyBinCount),r=new Float32Array(n.frequencyBinCount),s=new Uint8Array(n.fftSize),c=new Float32Array(n.fftSize);n.frequencyByte$=P(0,O).pipe((0,M.U)(()=>(i.length!==n.frequencyBinCount&&(i=new Uint8Array(n.frequencyBinCount)),n.getByteFrequencyData(i),i)),(0,F.B)()),n.frequencyFloat$=P(0,O).pipe((0,M.U)(()=>(r.length!==n.frequencyBinCount&&(r=new Float32Array(n.frequencyBinCount)),n.getFloatFrequencyData(r),r)),(0,F.B)()),n.timeByte$=P(0,O).pipe((0,M.U)(()=>(s.length!==n.fftSize&&(s=new Uint8Array(n.frequencyBinCount)),n.getByteTimeDomainData(s),s)),(0,F.B)()),n.timeFloat$=P(0,O).pipe((0,M.U)(()=>(c.length!==n.fftSize&&(c=new Float32Array(n.frequencyBinCount)),n.getFloatTimeDomainData(c),c)),(0,F.B)())}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(g),e.Y36(p,4),e.Y36(A),e.$8M("fftSize"),e.$8M("maxDecibels"),e.$8M("minDecibels"),e.$8M("smoothingTimeConstant"))},t.\u0275dir=e.lG2({type:t,selectors:[["","waAnalyserNode",""]],inputs:{fftSize:"fftSize",minDecibels:"minDecibels",maxDecibels:"maxDecibels",smoothingTimeConstant:"smoothingTimeConstant",channelCount:"channelCount",channelCountMode:"channelCountMode",channelInterpretation:"channelInterpretation"},outputs:{frequencyByte$:"frequencyByte$",frequencyFloat$:"frequencyFloat$",timeByte$:"timeByte$",timeFloat$:"timeFloat$"},exportAs:["AudioNode"],features:[e._Bn([{provide:p,useExisting:(0,e.Gpc)(()=>t)}]),e.qOj]}),t})(),he=(()=>{class t extends GainNode{constructor(n,o,i){if(!i){const r=n.createGain();return Object.setPrototypeOf(r,t.prototype),d(o,r),r}super(n),d(o,this)}set waOutput(n){this.disconnect(),d(this,n)}ngOnDestroy(){this.disconnect()}static init(n,o){d(o,n)}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(g),e.Y36(p),e.Y36(A))},t.\u0275dir=e.lG2({type:t,selectors:[["","waOutput",""]],inputs:{waOutput:"waOutput"},features:[e.qOj]}),t})(),_e=(()=>{class t extends MediaElementAudioSourceNode{constructor(n,o,{nativeElement:i}){if(!o){const r=n.createMediaElementSource(i);return Object.setPrototypeOf(r,t.prototype),r}super(n,{mediaElement:i})}ngOnDestroy(){this.disconnect()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(g),e.Y36(A),e.Y36(e.SBq))},t.\u0275dir=e.lG2({type:t,selectors:[["audio","waMediaElementAudioSourceNode",""],["video","waMediaElementAudioSourceNode",""]],exportAs:["AudioNode"],features:[e._Bn([{provide:p,useExisting:(0,e.Gpc)(()=>t)}]),e.qOj]}),t})(),me=(()=>{class t extends OscillatorNode{constructor(n,o,i,r,s){const c=f(r,0),_=f(s,440);if(!o){const u=n.createOscillator();return Object.setPrototypeOf(t.prototype,Object.getPrototypeOf(u)),Object.setPrototypeOf(u,t.prototype),u.detune.value=c,u.frequency.value=_,t.init(u,null,i),u}super(n,{detune:c,frequency:_}),t.init(this,null,i)}set periodicWave(n){this.setPeriodicWave(n)}ngOnDestroy(){try{this.stop()}catch(n){}this.disconnect()}static init(n,o,i){d(o,n),null!==i&&n.start();const r=new e.vpe;n.ended=r,n.onended=()=>r.emit()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(g),e.Y36(A),e.$8M("autoplay"),e.$8M("detune"),e.$8M("frequency"))},t.\u0275dir=e.lG2({type:t,selectors:[["","waOscillatorNode",""]],inputs:{type:"type",channelCount:"channelCount",channelCountMode:"channelCountMode",channelInterpretation:"channelInterpretation",periodicWave:"periodicWave",detuneParam:["detune","detuneParam"],frequencyParam:["frequency","frequencyParam"]},outputs:{ended:"ended"},exportAs:["AudioNode"],features:[e._Bn([{provide:p,useExisting:(0,e.Gpc)(()=>t)}]),e.qOj]}),(0,y.gn)([x("detune")],t.prototype,"detuneParam",void 0),(0,y.gn)([x("frequency")],t.prototype,"frequencyParam",void 0),t})(),Ae=(()=>{class t extends GainNode{constructor(n,o,i,r){const s=f(r,1);if(!i){const c=n.createGain();return Object.setPrototypeOf(c,t.prototype),d(o,c),c.gain.value=s,c}super(n,{gain:s}),d(o,this)}ngOnDestroy(){this.disconnect()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(g),e.Y36(p,4),e.Y36(A),e.$8M("gain"))},t.\u0275dir=e.lG2({type:t,selectors:[["","waGainNode",""]],inputs:{channelCount:"channelCount",channelCountMode:"channelCountMode",channelInterpretation:"channelInterpretation",gainParam:["gain","gainParam"]},exportAs:["AudioNode"],features:[e._Bn([{provide:p,useExisting:(0,e.Gpc)(()=>t)}]),e.qOj]}),(0,y.gn)([x("gain")],t.prototype,"gainParam",void 0),t})();function j(t){if(!t)return 0;if("number"==typeof t)return t;if(t instanceof Array){const a=t[t.length-1].value;return"number"==typeof a?a:a[a.length-1]}return t.value instanceof Array?t.value[t.value.length-1]:t.value}let ye=(()=>{class t extends StereoPannerNode{constructor(n,o,i){const r=f(i,0);try{new StereoPannerNode(n)}catch(s){const c=n.createPanner();return Object.setPrototypeOf(c,t.prototype),c.fallbackToPannerNode(j(r)),d(o,c),c}super(n,{pan:r}),d(o,this)}set panParam(n){"setPosition"in this?this.fallbackToPannerNode(j(n)):k(this.pan,n,this.context.currentTime)}ngOnDestroy(){this.disconnect()}fallbackToPannerNode(n){const o=100*n,i=o>0?270-o:o+90,r=Math.sin(o*(Math.PI/180)),s=Math.sin(i*(Math.PI/180));this.setPosition(r,0,s)}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(g),e.Y36(p,4),e.$8M("pan"))},t.\u0275dir=e.lG2({type:t,selectors:[["","waStereoPannerNode",""]],inputs:{channelCount:"channelCount",channelCountMode:"channelCountMode",channelInterpretation:"channelInterpretation",panParam:["pan","panParam"]},exportAs:["AudioNode"],features:[e._Bn([{provide:p,useExisting:(0,e.Gpc)(()=>t)}]),e.qOj]}),t})(),xe=(()=>{class t extends DelayNode{constructor(n,o,i,r,s){const c=f(r,0),_=f(s,1);if(!i){const u=n.createDelay(_);return Object.setPrototypeOf(u,t.prototype),d(o,u),u.delayTime.value=c,u}super(n,{delayTime:c,maxDelayTime:_}),d(o,this)}ngOnDestroy(){this.disconnect()}static init(n,o){d(o,n)}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(g),e.Y36(p,4),e.Y36(A),e.$8M("delayTime"),e.$8M("maxDelayTime"))},t.\u0275dir=e.lG2({type:t,selectors:[["","waDelayNode",""]],inputs:{channelCount:"channelCount",channelCountMode:"channelCountMode",channelInterpretation:"channelInterpretation",delayTimeParam:["delayTime","delayTimeParam"]},exportAs:["AudioNode"],features:[e._Bn([{provide:p,useExisting:(0,e.Gpc)(()=>t)}]),e.qOj]}),(0,y.gn)([x("delayTime")],t.prototype,"delayTimeParam",void 0),t})(),Ce=(()=>{class t extends BiquadFilterNode{constructor(n,o,i,r,s,c,_){const u=f(r,0),m=f(s,350),b=f(c,0),v=f(_,1);if(!o){const h=n.createBiquadFilter();return Object.setPrototypeOf(h,t.prototype),h.detune.value=u,h.frequency.value=m,h.gain.value=b,h.Q.value=v,d(i,h),h}super(n,{detune:u,frequency:m,gain:b,Q:v}),d(i,this)}ngOnDestroy(){this.disconnect()}static init(n,o){d(o,n)}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(g),e.Y36(A),e.Y36(p,4),e.$8M("detune"),e.$8M("frequency"),e.$8M("gain"),e.$8M("Q"))},t.\u0275dir=e.lG2({type:t,selectors:[["","waBiquadFilterNode",""]],inputs:{type:"type",channelCount:"channelCount",channelCountMode:"channelCountMode",channelInterpretation:"channelInterpretation",detuneParam:["detune","detuneParam"],frequencyParam:["frequency","frequencyParam"],gainParam:["gain","gainParam"],qParam:["Q","qParam"]},exportAs:["AudioNode"],features:[e._Bn([{provide:p,useExisting:(0,e.Gpc)(()=>t)}]),e.qOj]}),(0,y.gn)([x("detune")],t.prototype,"detuneParam",void 0),(0,y.gn)([x("frequency")],t.prototype,"frequencyParam",void 0),(0,y.gn)([x("gain")],t.prototype,"gainParam",void 0),(0,y.gn)([x("Q")],t.prototype,"qParam",void 0),t})(),Ze=(()=>{class t extends WaveShaperNode{constructor(n,o,i){if(!i){const r=n.createWaveShaper();return Object.setPrototypeOf(r,t.prototype),d(o,r),r}super(n),d(o,this)}ngOnDestroy(){this.disconnect()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(g),e.Y36(p,4),e.Y36(A))},t.\u0275dir=e.lG2({type:t,selectors:[["","waWaveShaperNode",""]],inputs:{oversample:"oversample",curve:"curve",channelCount:"channelCount",channelCountMode:"channelCountMode",channelInterpretation:"channelInterpretation"},exportAs:["AudioNode"],features:[e._Bn([{provide:p,useExisting:(0,e.Gpc)(()=>t)}]),e.qOj]}),t})(),Me=(()=>{class t extends ConvolverNode{constructor(n,o,i,r){if(!r){const s=o.createConvolver();return Object.setPrototypeOf(s,t.prototype),t.init(s,i,n),s}super(o),t.init(this,i,n)}set bufferSetter(n){this.buffer$.next(n)}ngOnDestroy(){this.buffer$.complete(),this.disconnect()}static init(n,o,i){d(o,n),n.buffer$=new Y.x,n.buffer$.pipe((0,W.w)(r=>"string"==typeof r?i.fetch(r):(0,G.of)(r))).subscribe(r=>{n.buffer=r})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(E),e.Y36(g),e.Y36(p,4),e.Y36(A))},t.\u0275dir=e.lG2({type:t,selectors:[["","waConvolverNode",""]],inputs:{normalize:"normalize",channelCount:"channelCount",channelCountMode:"channelCountMode",channelInterpretation:"channelInterpretation",bufferSetter:["buffer","bufferSetter"]},exportAs:["AudioNode"],features:[e._Bn([{provide:p,useExisting:(0,e.Gpc)(()=>t)}]),e.qOj]}),t})(),Te=(()=>{class t{constructor(n){this.context=n}transform(n,o,i){return this.context.createPeriodicWave(new Float32Array(n),o?new Float32Array(o):new Float32Array(n.length),{disableNormalization:!!i})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(g,16))},t.\u0275pipe=e.Yjl({name:"waPeriodicWave",type:t,pure:!0}),t})(),we=(()=>{class t{transform(n,o,i="exponential"){return n instanceof Array?{value:n,duration:o}:{value:n,duration:o,mode:i}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275pipe=e.Yjl({name:"waAudioParam",type:t,pure:!0}),t})();const Pe=["chain"];function qe(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"button",2),e.NdJ("click",function(){return e.CHM(n),e.oxw().start()}),e._uU(1," Start AudioContext\n"),e.qZA()}}function be(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"button",16,17),e.NdJ("click",function(i){e.CHM(n);const r=e.MAs(1);return e.oxw(3).onClick(r,i.target)}),e._uU(2," Play "),e.ynx(3,18),e.NdJ("timeByte$",function(i){e.CHM(n),e.oxw(2);const r=e.MAs(34);return e.oxw().onTimeDomain(i,r)}),e.GkF(4,19),e.BQk(),e.qZA()}if(2&t){e.oxw(2);const n=e.MAs(33),o=e.oxw();e.Q6J("loop",!0),e.xp6(4),e.Q6J("waOutput",o.chain||n)}}function ve(t,a){if(1&t&&(e.ynx(0),e.YNc(1,be,5,2,"button",15),e.BQk()),2&t){const n=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",n.buffers)}}function Ne(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"audio",20),e.ynx(1,18),e.NdJ("timeByte$",function(i){e.CHM(n),e.oxw();const r=e.MAs(34);return e.oxw().onTimeDomain(i,r)}),e.GkF(2,19),e.BQk(),e.qZA()}if(2&t){e.oxw();const n=e.MAs(33),o=e.oxw();e.xp6(2),e.Q6J("waOutput",o.chain||n)}}function Oe(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"button",22,17),e.NdJ("click",function(i){e.CHM(n);const r=e.MAs(1);return e.oxw(3).onClick(r,i.target)}),e.ALo(2,"waPeriodicWave"),e._uU(3," Play "),e.ynx(4,18),e.NdJ("timeByte$",function(i){e.CHM(n),e.oxw(2);const r=e.MAs(34);return e.oxw().onTimeDomain(i,r)}),e.GkF(5,19),e.BQk(),e.qZA()}if(2&t){e.oxw(2);const n=e.MAs(33),o=e.oxw();e.Q6J("frequency",100)("periodicWave",e.lcZ(2,3,o.real)),e.xp6(5),e.Q6J("waOutput",o.chain||n)}}function Fe(t,a){if(1&t&&(e.ynx(0),e.YNc(1,Oe,6,5,"button",21),e.BQk()),2&t){const n=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",n.buffers)}}function Se(t,a){if(1&t){const n=e.EpF();e.ynx(0),e.TgZ(1,"fieldset",23,24),e.ALo(3,"waAudioParam"),e.TgZ(4,"legend"),e._uU(5,"GainNode"),e.qZA(),e.TgZ(6,"input",25),e.NdJ("ngModelChange",function(i){return e.CHM(n),e.oxw(2).gain=i}),e.qZA(),e.TgZ(7,"fieldset",26),e.ALo(8,"waAudioParam"),e.TgZ(9,"legend"),e._uU(10,"StereoPannerNode"),e.qZA(),e.TgZ(11,"input",27),e.NdJ("ngModelChange",function(i){return e.CHM(n),e.oxw(2).pan=i}),e.qZA(),e.TgZ(12,"fieldset",9),e.TgZ(13,"legend"),e._uU(14,"AudioDestinationNode"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&t){const n=e.oxw(2);e.xp6(1),e.Q6J("gain",e.xi3(3,4,n.gain,.1)),e.xp6(5),e.Q6J("ngModel",n.gain),e.xp6(1),e.Q6J("pan",e.xi3(8,7,n.pan,.1)),e.xp6(4),e.Q6J("ngModel",n.pan)}}function Je(t,a){if(1&t){const n=e.EpF();e.ynx(0),e.TgZ(1,"fieldset",23,24),e.ALo(3,"waAudioParam"),e.TgZ(4,"legend"),e._uU(5,"GainNode"),e.qZA(),e.TgZ(6,"em"),e._uU(7,"For feedback loop purposes only"),e.qZA(),e.TgZ(8,"fieldset",28),e.ALo(9,"waAudioParam"),e.TgZ(10,"legend"),e._uU(11,"DelayNode"),e.qZA(),e.TgZ(12,"input",25),e.NdJ("ngModelChange",function(i){return e.CHM(n),e.oxw(2).delayTime=i}),e.qZA(),e.TgZ(13,"fieldset",23),e.TgZ(14,"legend"),e._uU(15,"GainNode"),e.qZA(),e.TgZ(16,"input",25),e.NdJ("ngModelChange",function(i){return e.CHM(n),e.oxw(2).delayGain=i}),e.qZA(),e.TgZ(17,"fieldset",19),e.TgZ(18,"legend"),e._uU(19,"Output"),e.qZA(),e.TgZ(20,"em"),e._uU(21," Connected back to the beginning of the chain "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(22,"fieldset",9),e.TgZ(23,"legend"),e._uU(24,"AudioDestinationNode"),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&t){const n=e.MAs(2),o=e.oxw(2);e.xp6(1),e.Q6J("gain",e.xi3(3,6,o.gain,.1)),e.xp6(7),e.Q6J("delayTime",e.xi3(9,9,o.delayTime,.1)),e.xp6(4),e.Q6J("ngModel",o.delayTime),e.xp6(1),e.Q6J("gain",o.delayGain),e.xp6(3),e.Q6J("ngModel",o.delayGain),e.xp6(1),e.Q6J("waOutput",n)}}function Qe(t,a){if(1&t){const n=e.EpF();e.ynx(0),e.TgZ(1,"fieldset",29,24),e.ALo(3,"waAudioParam"),e.ALo(4,"waAudioParam"),e.ALo(5,"waAudioParam"),e.ALo(6,"waAudioParam"),e.TgZ(7,"legend"),e._uU(8,"BiquadFilterNode"),e.qZA(),e.TgZ(9,"label"),e.TgZ(10,"select",30),e.NdJ("ngModelChange",function(i){return e.CHM(n),e.oxw(2).type=i}),e.TgZ(11,"option",31),e._uU(12,"lowpass"),e.qZA(),e.TgZ(13,"option",32),e._uU(14,"highpass"),e.qZA(),e.TgZ(15,"option",33),e._uU(16,"bandpass"),e.qZA(),e.TgZ(17,"option",34),e._uU(18,"lowshelf"),e.qZA(),e.TgZ(19,"option",35),e._uU(20,"highshelf"),e.qZA(),e.TgZ(21,"option",36),e._uU(22,"peaking"),e.qZA(),e.TgZ(23,"option",37),e._uU(24,"notch"),e.qZA(),e.TgZ(25,"option",38),e._uU(26,"allpass"),e.qZA(),e.qZA(),e.TgZ(27,"code"),e._uU(28,"type"),e.qZA(),e.qZA(),e.TgZ(29,"label"),e.TgZ(30,"input",25),e.NdJ("ngModelChange",function(i){return e.CHM(n),e.oxw(2).filterGain=i}),e.qZA(),e.TgZ(31,"code"),e._uU(32,"gain"),e.qZA(),e.qZA(),e.TgZ(33,"label"),e.TgZ(34,"input",39),e.NdJ("ngModelChange",function(i){return e.CHM(n),e.oxw(2).frequency=i}),e.qZA(),e.TgZ(35,"code"),e._uU(36,"frequency"),e.qZA(),e.qZA(),e.TgZ(37,"label"),e.TgZ(38,"input",40),e.NdJ("ngModelChange",function(i){return e.CHM(n),e.oxw(2).Q=i}),e.qZA(),e.TgZ(39,"code"),e._uU(40,"Q"),e.qZA(),e.qZA(),e.TgZ(41,"label"),e.TgZ(42,"input",41),e.NdJ("ngModelChange",function(i){return e.CHM(n),e.oxw(2).detune=i}),e.qZA(),e.TgZ(43,"code"),e._uU(44,"detune"),e.qZA(),e.qZA(),e.TgZ(45,"fieldset",42),e.TgZ(46,"legend"),e._uU(47,"WaveShaperNode"),e.qZA(),e.TgZ(48,"input",43),e.NdJ("ngModelChange",function(i){return e.CHM(n),e.oxw(2).onCurveChange(i)}),e.qZA(),e.ynx(49,23),e.ALo(50,"waAudioParam"),e.TgZ(51,"fieldset",44),e.TgZ(52,"legend"),e._uU(53,"ConvolverNode"),e.qZA(),e.TgZ(54,"fieldset",9),e.TgZ(55,"legend"),e._uU(56,"AudioDestinationNode"),e.qZA(),e.qZA(),e.qZA(),e.BQk(),e.qZA(),e.qZA(),e.BQk()}if(2&t){const n=e.oxw(2);e.xp6(1),e.Q6J("type",n.type)("gain",e.xi3(3,13,n.filterGain,.1))("frequency",e.xi3(4,16,n.frequency,.1))("Q",e.xi3(5,19,n.Q,.1))("detune",e.xi3(6,22,n.detune,.1)),e.xp6(9),e.Q6J("ngModel",n.type),e.xp6(20),e.Q6J("ngModel",n.filterGain),e.xp6(4),e.Q6J("ngModel",n.frequency),e.xp6(4),e.Q6J("ngModel",n.Q),e.xp6(4),e.Q6J("ngModel",n.detune),e.xp6(3),e.Q6J("curve",n.curve),e.xp6(3),e.Q6J("ngModel",n.distortion),e.xp6(1),e.Q6J("gain",e.xi3(50,25,n.distortionCompensation,.1))}}function Be(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"section"),e.TgZ(1,"h1"),e._uU(2,"Description"),e.qZA(),e.TgZ(3,"p"),e._uU(4," This is a demo for "),e.TgZ(5,"code"),e.TgZ(6,"em"),e._uU(7,"@ng-web-apis/audio"),e.qZA(),e.qZA(),e._uU(8," \u2014 a Web Audio API declarative library for Angular. Here you can select different audio source options and see AudioNode graph for selected configuration. Demo page uses HTML elements as directives hosts, in real life scenario you can use "),e.TgZ(9,"code"),e._uU(10,"ng-container"),e.qZA(),e._uU(11," so you will not have redundant DOM tags. "),e.qZA(),e.qZA(),e.TgZ(12,"section"),e.TgZ(13,"h1"),e._uU(14,"Source"),e.qZA(),e.TgZ(15,"p"),e.TgZ(16,"label"),e.TgZ(17,"input",3),e.NdJ("ngModelChange",function(i){return e.CHM(n),e.oxw().selectedSource=i}),e.qZA(),e._uU(18," AudioBufferSourceNode "),e.qZA(),e.qZA(),e.TgZ(19,"p"),e.TgZ(20,"label"),e.TgZ(21,"input",4),e.NdJ("ngModelChange",function(i){return e.CHM(n),e.oxw().selectedSource=i}),e.qZA(),e._uU(22," MediaElementAudioSourceNode "),e.qZA(),e.qZA(),e.TgZ(23,"p"),e.TgZ(24,"label"),e.TgZ(25,"input",5),e.NdJ("ngModelChange",function(i){return e.CHM(n),e.oxw().selectedSource=i}),e.qZA(),e._uU(26," OscillatorNode "),e.qZA(),e.qZA(),e.ynx(27,6),e.YNc(28,ve,2,1,"ng-container",7),e.YNc(29,Ne,3,1,"audio",8),e.YNc(30,Fe,2,1,"ng-container",7),e.BQk(),e.TgZ(31,"p"),e._UZ(32,"canvas",9,10),e.qZA(),e.qZA(),e.TgZ(35,"section"),e.TgZ(36,"h1"),e._uU(37,"Chain"),e.qZA(),e.TgZ(38,"p"),e.TgZ(39,"label"),e.TgZ(40,"input",11),e.NdJ("ngModelChange",function(i){return e.CHM(n),e.oxw().selectedChain=i}),e.qZA(),e._uU(41," Dry "),e.qZA(),e.qZA(),e.TgZ(42,"p"),e.TgZ(43,"label"),e.TgZ(44,"input",12),e.NdJ("ngModelChange",function(i){return e.CHM(n),e.oxw().selectedChain=i}),e.qZA(),e._uU(45," Balance "),e.qZA(),e.qZA(),e.TgZ(46,"p"),e.TgZ(47,"label"),e.TgZ(48,"input",13),e.NdJ("ngModelChange",function(i){return e.CHM(n),e.oxw().selectedChain=i}),e.qZA(),e._uU(49," Delay "),e.qZA(),e.qZA(),e.TgZ(50,"p"),e.TgZ(51,"label"),e.TgZ(52,"input",14),e.NdJ("ngModelChange",function(i){return e.CHM(n),e.oxw().selectedChain=i}),e.qZA(),e._uU(53," Complex "),e.qZA(),e.qZA(),e.ynx(54,6),e.YNc(55,Se,15,10,"ng-container",7),e.YNc(56,Je,25,12,"ng-container",7),e.YNc(57,Qe,57,28,"ng-container",7),e.BQk(),e.qZA()}if(2&t){const n=e.oxw();e.xp6(17),e.Q6J("ngModel",n.selectedSource),e.xp6(4),e.Q6J("ngModel",n.selectedSource),e.xp6(4),e.Q6J("ngModel",n.selectedSource),e.xp6(2),e.Q6J("ngSwitch",n.selectedSource),e.xp6(1),e.Q6J("ngSwitchCase","buffer"),e.xp6(1),e.Q6J("ngSwitchCase","media"),e.xp6(1),e.Q6J("ngSwitchCase","oscillator"),e.xp6(10),e.Q6J("ngModel",n.selectedChain),e.xp6(4),e.Q6J("ngModel",n.selectedChain),e.xp6(4),e.Q6J("ngModel",n.selectedChain),e.xp6(4),e.Q6J("ngModel",n.selectedChain),e.xp6(2),e.Q6J("ngSwitch",n.selectedChain),e.xp6(1),e.Q6J("ngSwitchCase","balance"),e.xp6(1),e.Q6J("ngSwitchCase","delay"),e.xp6(1),e.Q6J("ngSwitchCase","complex")}}let De=(()=>{class t{constructor(n){this.context=n,this.buffers=[Date.now()],this.selectedChain="dry",this.selectedSource="buffer",this.gain=1,this.pan=0,this.delayTime=1,this.delayGain=.5,this.distortion=20,this.frequency=350,this.detune=0,this.filterGain=0,this.Q=1,this.type="lowpass",this.curve=H(this.distortion),this.started=!1,this.real=[0,0,1,0,1]}get distortionCompensation(){return 1.2-this.distortion/20}start(){this.started=!0,this.context.resume()}onCurveChange(n){this.distortion=n,this.curve=H(n)}onClick(n,o){"Play"===o.textContent.trim()?(o.textContent="Stop",n.start()):this.buffers[0]=Date.now()}onTimeDomain(n,o){const i=o.getContext("2d");if(!i)return;i.fillStyle="rgb(200, 200, 200)",i.fillRect(0,0,o.width,o.height),i.lineWidth=2,i.strokeStyle="rgb(0, 0, 0)",i.beginPath();const r=Number(o.width)/n.length;let s=0;for(let c=0;c<n.length;c++){const u=n[c]/128*o.height/2;0===c?i.moveTo(s,u):i.lineTo(s,u),s+=r}i.lineTo(o.width,o.height/2),i.stroke()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(g))},t.\u0275cmp=e.Xpm({type:t,selectors:[["audio-page"]],viewQuery:function(n,o){if(1&n&&e.Gf(Pe,5),2&n){let i;e.iGM(i=e.CRH())&&(o.chain=i.first)}},decls:3,vars:2,consts:[[3,"click",4,"ngIf","ngIfElse"],["graph",""],[3,"click"],["type","radio","value","buffer","name","source",3,"ngModel","ngModelChange"],["type","radio","value","media","name","source",3,"ngModel","ngModelChange"],["type","radio","value","oscillator","name","source",3,"ngModel","ngModelChange"],[3,"ngSwitch"],[4,"ngSwitchCase"],["waMediaElementAudioSourceNode","","src","assets/demo.mp3","loop","","controls","",4,"ngSwitchCase"],["waAudioDestinationNode",""],["fallback","AudioNode","canvas",""],["type","radio","name","chain","value","dry",3,"ngModel","ngModelChange"],["type","radio","name","chain","value","balance",3,"ngModel","ngModelChange"],["type","radio","name","chain","value","delay",3,"ngModel","ngModelChange"],["type","radio","name","chain","value","complex",3,"ngModel","ngModelChange"],["waAudioBufferSourceNode","","buffer","assets/demo.mp3",3,"loop","click",4,"ngFor","ngForOf"],["waAudioBufferSourceNode","","buffer","assets/demo.mp3",3,"loop","click"],["source","AudioNode"],["waAnalyserNode","",3,"timeByte$"],[3,"waOutput"],["waMediaElementAudioSourceNode","","src","assets/demo.mp3","loop","","controls",""],["waOscillatorNode","",3,"frequency","periodicWave","click",4,"ngFor","ngForOf"],["waOscillatorNode","",3,"frequency","periodicWave","click"],["waGainNode","",3,"gain"],["chain","AudioNode"],["type","range","min","0","max","1","step","0.01",3,"ngModel","ngModelChange"],["waStereoPannerNode","",3,"pan"],["type","range","min","-1","max","1","step","0.01",3,"ngModel","ngModelChange"],["waDelayNode","",3,"delayTime"],["waBiquadFilterNode","",3,"type","gain","frequency","Q","detune"],[3,"ngModel","ngModelChange"],["value","lowpass"],["value","highpass"],["value","bandpass"],["value","lowshelf"],["value","highshelf"],["value","peaking"],["value","notch"],["value","allpass"],["type","range","min","20","max","5000",3,"ngModel","ngModelChange"],["type","range","min","1","max","100",3,"ngModel","ngModelChange"],["type","range","min","0","max","100",3,"ngModel","ngModelChange"],["waWaveShaperNode","","oversample","4x",3,"curve"],["type","range","min","0","max","20","step","0.1",3,"ngModel","ngModelChange"],["waConvolverNode","","buffer","assets/response.m4a"]],template:function(n,o){if(1&n&&(e.YNc(0,qe,2,0,"button",0),e.YNc(1,Be,58,15,"ng-template",null,1,e.W1O)),2&n){const i=e.MAs(2);e.Q6J("ngIf",!o.started)("ngIfElse",i)}},directives:[T.O5,C._,C.Fj,C.JJ,C.On,T.RF,T.n9,ue,T.sg,de,fe,he,_e,me,Ae,C.eT,ye,xe,Ce,C.EJ,C.YN,C.Kr,Ze,Me],pipes:[Te,we],encapsulation:2,changeDetection:0}),t})();function H(t){const a=44100,n=new Float32Array(a),o=Math.PI/180;for(let i=0;i<a;++i){const r=2*i/a-1;n[i]=(3+t)*r*20*o/(Math.PI+t*Math.abs(r))}return n}var Ue=l(5674);let Ie=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({}),t})(),Ye=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[T.ez,C.u5,Ie,Ue.Bz.forChild([{path:"",component:De}])]]}),t})()}}]);